import{k as v,g as b,a as B,u as n,v as k,U as Q,c as g,h as P,l as F,d as x,o as q,ai as u,aj as l,F as E,ar as $,an as w,f as c,ao as d,ap as D,aq as p,at as m,al as S,Q as A,av as _,ak as j}from"./index-D4B5Fc2c.js";import{a as I,b as V,c as z,Q as L}from"./orderStore-BIe33Xfr.js";import{Q as y}from"./QCardSection-DWRgnqko.js";import{Q as N}from"./QCard-Dx7cBBBn.js";import{u as H}from"./use-quasar-_wIG5KxE.js";import{_ as K}from"./_plugin-vue_export-helper-DlAUqK2U.js";const T=v({name:"QPage",props:{padding:Boolean,styleFn:Function},setup(i,{slots:r}){const{proxy:{$q:o}}=b(),a=B(k,n);if(a===n)return console.error("QPage needs to be a deep child of QLayout"),n;if(B(Q,n)===n)return console.error("QPage needs to be child of QPageContainer"),n;const f=g(()=>{const t=(a.header.space===!0?a.header.size:0)+(a.footer.space===!0?a.footer.size:0);if(typeof i.styleFn=="function"){const s=a.isContainer.value===!0?a.containerHeight.value:o.screen.height;return i.styleFn(t,s)}return{minHeight:a.isContainer.value===!0?a.containerHeight.value-t+"px":o.screen.height===0?t!==0?`calc(100vh - ${t}px)`:"100vh":o.screen.height-t+"px"}}),e=g(()=>`q-page${i.padding===!0?" q-layout-padding":""}`);return()=>P("main",{class:e.value,style:f.value},F(r.default))}}),O={class:"product-card row q-col-gutter-xs"},R={class:"text-center card-title"},U={class:"text-center"},Y={class:"text-bold"},J={key:0,class:"text-grey old-price"},M=x({__name:"ProductList",setup(i){const r=H(),o=I(),a=V();q(async()=>{try{r.loading.show();const e=await o.fetchProducts();e&&(o.products=e)}catch(e){console.error(e)}finally{r.loading.hide()}});function h(e){try{if(r.loading.show(),a.basketData?.length){const t=a.basketData.find(s=>s.id===e.id);t?f(t,e):a.basketData.push(structuredClone(_(e)))}else a.basketData.push(structuredClone(_(e)))}catch(t){console.error(t)}finally{r.notify({message:`Товар ${e.name} добавлен в корзину`,color:"primary"}),r.loading.hide()}}function f(e,t){e.price&&(e.price+=t.price),e.weight&&(e.weight+=t.weight),e.oldPrice&&(e.oldPrice+=t.oldPrice)}return(e,t)=>(l(),u("div",O,[(l(!0),u(E,null,$(w(o).products,(s,C)=>(l(),u("div",{class:"col-6",key:C},[c(N,{class:"my-card radius-12 full-height",style:{"border-radius":"20px"},flat:"",bordered:""},{default:d(()=>[c(y,{class:"q-pa-sm full-height"},{default:d(()=>[D("div",null,[c(z,{class:"cursor-pointer",src:"https://media.istockphoto.com/id/1141529240/ru/%D0%B2%D0%B5%D0%BA%D1%82%D0%BE%D1%80%D0%BD%D0%B0%D1%8F/%D0%BF%D1%80%D0%BE%D1%81%D1%82%D0%BE%D0%B5-%D1%8F%D0%B1%D0%BB%D0%BE%D0%BA%D0%BE-%D0%B2-%D0%BF%D0%BB%D0%BE%D1%81%D0%BA%D0%BE%D0%BC-%D1%81%D1%82%D0%B8%D0%BB%D0%B5-%D0%B8%D0%BB%D0%BB%D1%8E%D1%81%D1%82%D1%80%D0%B0%D1%86%D0%B8%D1%8F-%D0%B2%D0%B5%D0%BA%D1%82%D0%BE%D1%80%D0%B0.jpg?s=612x612&w=0&k=20&c=B-KXrA7VTm8E6t4jk9qcuFz8bDFzTJwiIGaYGYUcsZI="})]),c(y,{class:"q-pa-sm"},{default:d(()=>[D("div",R,p(s.name),1),D("div",U,[D("span",Y,p(s.price),1),t[0]||(t[0]=m(" ₽ ",-1)),s?.oldPrice?(l(),u("span",J,p(s.oldPrice)+" ₽",1)):S("",!0),m(" / "+p(s.weight),1)])]),_:2},1024),c(L,{class:"justify-center"},{default:d(()=>[c(A,{dense:"","no-caps":"",class:"full-width",color:"secondary",icon:"add_shopping_cart",label:"В корзину",onClick:Z=>h(s)},null,8,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]))),128))]))}}),X=K(M,[["__scopeId","data-v-d9bb180f"]]),re=x({__name:"DashboardPage",setup(i){return(r,o)=>(l(),j(T,{class:"q-mx-xs"},{default:d(()=>[c(X,{class:"q-mb-lg q-mt-md"})]),_:1}))}});export{re as default};
