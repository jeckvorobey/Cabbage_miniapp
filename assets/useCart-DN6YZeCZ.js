import{H as W,aN as T,aO as P,aP as I,aC as H,aQ as A,B as q,aR as V,aS as J,i as G,ad as Z,r as N,e as y,w as ee,k as O,af as te,aT as re,m as U,aU as ne,z as oe,c as b,aV as ae}from"./index-lR2VyFMA.js";import{c as ie}from"./QMenu-voHclf0S.js";const B={left:!0,right:!0,up:!0,down:!0,horizontal:!0,vertical:!0},se=Object.keys(B);B.all=!0;function Q(e){const r={};for(const u of se)e[u]===!0&&(r[u]=!0);return Object.keys(r).length===0?B:(r.horizontal===!0?r.left=r.right=!0:r.left===!0&&r.right===!0&&(r.horizontal=!0),r.vertical===!0?r.up=r.down=!0:r.up===!0&&r.down===!0&&(r.vertical=!0),r.horizontal===!0&&r.vertical===!0&&(r.all=!0),r)}const ue=["INPUT","TEXTAREA"];function j(e,r){return r.event===void 0&&e.target!==void 0&&e.target.draggable!==!0&&typeof r.handler=="function"&&ue.includes(e.target.nodeName.toUpperCase())===!1&&(e.qClonedBy===void 0||e.qClonedBy.indexOf(r.uid)===-1)}function le(e){const r=[.06,6,50];return typeof e=="string"&&e.length&&e.split(":").forEach((u,c)=>{const h=parseFloat(u);h&&(r[c]=h)}),r}const ce=W({name:"touch-swipe",beforeMount(e,{value:r,arg:u,modifiers:c}){if(c.mouse!==!0&&P.has.touch!==!0)return;const h=c.mouseCapture===!0?"Capture":"",t={handler:r,sensitivity:le(u),direction:Q(c),noop:H,mouseStart(s){j(s,t)&&J(s)&&(A(t,"temp",[[document,"mousemove","move",`notPassive${h}`],[document,"mouseup","end","notPassiveCapture"]]),t.start(s,!0))},touchStart(s){if(j(s,t)){const p=s.target;A(t,"temp",[[p,"touchmove","move","notPassiveCapture"],[p,"touchcancel","end","notPassiveCapture"],[p,"touchend","end","notPassiveCapture"]]),t.start(s)}},start(s,p){P.is.firefox===!0&&I(e,!0);const o=V(s);t.event={x:o.left,y:o.top,time:Date.now(),mouse:p===!0,dir:!1}},move(s){if(t.event===void 0)return;if(t.event.dir!==!1){q(s);return}const p=Date.now()-t.event.time;if(p===0)return;const o=V(s),n=o.left-t.event.x,i=Math.abs(n),l=o.top-t.event.y,d=Math.abs(l);if(t.event.mouse!==!0){if(i<t.sensitivity[1]&&d<t.sensitivity[1]){t.end(s);return}}else if(window.getSelection().toString()!==""){t.end(s);return}else if(i<t.sensitivity[2]&&d<t.sensitivity[2])return;const v=i/p,g=d/p;t.direction.vertical===!0&&i<d&&i<100&&g>t.sensitivity[0]&&(t.event.dir=l<0?"up":"down"),t.direction.horizontal===!0&&i>d&&d<100&&v>t.sensitivity[0]&&(t.event.dir=n<0?"left":"right"),t.direction.up===!0&&i<d&&l<0&&i<100&&g>t.sensitivity[0]&&(t.event.dir="up"),t.direction.down===!0&&i<d&&l>0&&i<100&&g>t.sensitivity[0]&&(t.event.dir="down"),t.direction.left===!0&&i>d&&n<0&&d<100&&v>t.sensitivity[0]&&(t.event.dir="left"),t.direction.right===!0&&i>d&&n>0&&d<100&&v>t.sensitivity[0]&&(t.event.dir="right"),t.event.dir!==!1?(q(s),t.event.mouse===!0&&(document.body.classList.add("no-pointer-events--children"),document.body.classList.add("non-selectable"),ie(),t.styleCleanup=S=>{t.styleCleanup=void 0,document.body.classList.remove("non-selectable");const C=()=>{document.body.classList.remove("no-pointer-events--children")};S===!0?setTimeout(C,50):C()}),t.handler({evt:s,touch:t.event.mouse!==!0,mouse:t.event.mouse,direction:t.event.dir,duration:p,distance:{x:i,y:d}})):t.end(s)},end(s){t.event!==void 0&&(T(t,"temp"),P.is.firefox===!0&&I(e,!1),t.styleCleanup?.(!0),s!==void 0&&t.event.dir!==!1&&q(s),t.event=void 0)}};if(e.__qtouchswipe=t,c.mouse===!0){const s=c.mouseCapture===!0||c.mousecapture===!0?"Capture":"";A(t,"main",[[e,"mousedown","mouseStart",`passive${s}`]])}P.has.touch===!0&&A(t,"main",[[e,"touchstart","touchStart",`passive${c.capture===!0?"Capture":""}`],[e,"touchmove","noop","notPassiveCapture"]])},updated(e,r){const u=e.__qtouchswipe;u!==void 0&&(r.oldValue!==r.value&&(typeof r.value!="function"&&u.end(),u.handler=r.value),u.direction=Q(r.modifiers))},beforeUnmount(e){const r=e.__qtouchswipe;r!==void 0&&(T(r,"main"),T(r,"temp"),P.is.firefox===!0&&I(e,!1),r.styleCleanup?.(),delete e.__qtouchswipe)}});function de(){let e=Object.create(null);return{getCache:(r,u)=>e[r]===void 0?e[r]=typeof u=="function"?u():u:e[r],setCache(r,u){e[r]=u},hasCache(r){return Object.hasOwnProperty.call(e,r)},clearCache(r){r!==void 0?delete e[r]:e=Object.create(null)}}}const he={name:{required:!0},disable:Boolean},R={setup(e,{slots:r}){return()=>O("div",{class:"q-panel scroll",role:"tabpanel"},U(r.default))}},me={modelValue:{required:!0},animated:Boolean,infinite:Boolean,swipeable:Boolean,vertical:Boolean,transitionPrev:String,transitionNext:String,transitionDuration:{type:[String,Number],default:300},keepAlive:Boolean,keepAliveInclude:[String,Array,RegExp],keepAliveExclude:[String,Array,RegExp],keepAliveMax:Number},ge=["update:modelValue","beforeTransition","transition"];function ye(){const{props:e,emit:r,proxy:u}=G(),{getCache:c}=de(),{registerTimeout:h}=Z();let t,s;const p=N(null),o={value:null};function n(a){const f=e.vertical===!0?"up":"left";w((u.$q.lang.rtl===!0?-1:1)*(a.direction===f?1:-1))}const i=y(()=>[[ce,n,void 0,{horizontal:e.vertical!==!0,vertical:e.vertical,mouse:!0}]]),l=y(()=>e.transitionPrev||`slide-${e.vertical===!0?"down":"right"}`),d=y(()=>e.transitionNext||`slide-${e.vertical===!0?"up":"left"}`),v=y(()=>`--q-transition-duration: ${e.transitionDuration}ms`),g=y(()=>typeof e.modelValue=="string"||typeof e.modelValue=="number"?e.modelValue:String(e.modelValue)),S=y(()=>({include:e.keepAliveInclude,exclude:e.keepAliveExclude,max:e.keepAliveMax})),C=y(()=>e.keepAliveInclude!==void 0||e.keepAliveExclude!==void 0);ee(()=>e.modelValue,(a,f)=>{const m=x(a)===!0?D(a):-1;s!==!0&&_(m===-1?0:m<D(f)?-1:1),o.value!==m&&(o.value=m,r("beforeTransition",a,f),h(()=>{r("transition",a,f)},e.transitionDuration))});function E(){w(1)}function z(){w(-1)}function $(a){r("update:modelValue",a)}function x(a){return a!=null&&a!==""}function D(a){return t.findIndex(f=>f.props.name===a&&f.props.disable!==""&&f.props.disable!==!0)}function F(){return t.filter(a=>a.props.disable!==""&&a.props.disable!==!0)}function _(a){const f=a!==0&&e.animated===!0&&o.value!==-1?"q-transition--"+(a===-1?l.value:d.value):null;p.value!==f&&(p.value=f)}function w(a,f=o.value){let m=f+a;for(;m!==-1&&m<t.length;){const k=t[m];if(k!==void 0&&k.props.disable!==""&&k.props.disable!==!0){_(a),s=!0,r("update:modelValue",k.props.name),setTimeout(()=>{s=!1});return}m+=a}e.infinite===!0&&t.length!==0&&f!==-1&&f!==t.length&&w(a,a===-1?t.length:-1)}function L(){const a=D(e.modelValue);return o.value!==a&&(o.value=a),!0}function M(){const a=x(e.modelValue)===!0&&L()&&t[o.value];return e.keepAlive===!0?[O(ne,S.value,[O(C.value===!0?c(g.value,()=>({...R,name:g.value})):R,{key:g.value,style:v.value},()=>a)])]:[O("div",{class:"q-panel scroll",style:v.value,key:g.value,role:"tabpanel"},[a])]}function X(){if(t.length!==0)return e.animated===!0?[O(te,{name:p.value},M)]:M()}function K(a){return t=re(U(a.default,[])).filter(f=>f.props!==null&&f.props.slot===void 0&&x(f.props.name)===!0),t.length}function Y(){return t}return Object.assign(u,{next:E,previous:z,goTo:$}),{panelIndex:o,panelDirectives:i,updatePanelsList:K,updatePanelIndex:L,getPanelContent:X,getEnabledPanels:F,getPanels:Y,isValidPanelName:x,keepAliveProps:S,needsUniqueKeepAliveWrapper:C,goToPanelByOffset:w,goToPanel:$,nextPanel:E,previousPanel:z}}const fe=oe("Order",()=>{const e=N([]),r=N();async function u(o){return b.post("order",o).then(n=>n.data).catch(n=>{throw console.error("[OrderStore] - An error occurred while createing via createOrder",n.message),n})}async function c(){return b.get("orders").then(o=>o.data).catch(o=>{throw console.error("[OrderStore] - An error occurred while fetching via fetchOrders",o.message),o})}async function h(){return b.get("orders/my").then(o=>o.data).catch(o=>{throw console.error("[OrderStore] - An error occurred while fetching via fetchMyOrder",o.message),o})}async function t(o){return b.get(`orders/${o}`).then(n=>n.data).catch(n=>{throw console.error("[OrderStore] - An error occurred while fetching via fetchOrderById",n.message),n})}async function s(o){return b.patch(`/addresses/${o.id}`,o).then(n=>n.data).catch(n=>{throw console.error("[OrderStore] - An error occurred while creating via updateOrder",n.message),n})}async function p(o){return b.delete(`orders/${o}`).then(n=>n.data).catch(n=>{throw console.error("[OrderStore] - An error occurred while deleting via deleteOrder",n.message),n})}return{basketData:e,totalCost:r,createOrder:u,fetchOrder:c,fetchMyOrder:h,fetchOrderById:t,updateOrder:s,deleteOrder:p}});function be(){const e=fe();function r(n){return typeof n=="string"?parseFloat(n)||0:Number(n)||0}function u(n){return typeof n=="string"?parseInt(n,10)||1:Number(n)||1}function c(){try{window.localStorage.setItem("basket",JSON.stringify(e.basketData))}catch(n){console.error("[useCart] Ошибка при сохранении корзины в localStorage:",n)}}function h(n){if(n)return e.basketData.find(i=>i.id===n)}function t(n){try{if(n?.id==null)return console.warn("[useCart] Нельзя добавить товар без ID"),null;const i=n.id,l={...structuredClone(ae(n)),id:i,quantity:1,product_id:i,price:r(n.price)};if(!e.basketData.length)return e.basketData.push(l),c(),l;const d=e.basketData.find(v=>v.id===n.id);if(d){const v=u(d.quantity);return d.quantity=v+1,c(),d}else return e.basketData.push(l),c(),l}catch(i){return console.error("[useCart] Ошибка при добавлении товара в корзину:",i),null}}function s(n,i){try{let l;if(typeof n=="number"?l=h(n):l=n,!l)return console.warn("[useCart] Товар не найден в корзине"),null;const v=u(l.quantity)+i;return v<=0?(p(l.id),null):(l.quantity=v,c(),l)}catch(l){return console.error("[useCart] Ошибка при изменении количества товара:",l),null}}function p(n){try{const i=e.basketData.findIndex(l=>l.id===n);return i!==-1?(e.basketData.splice(i,1),c(),!0):!1}catch(i){return console.error("[useCart] Ошибка при удалении товара из корзины:",i),!1}}function o(n){try{return n>=0&&n<e.basketData.length?(e.basketData.splice(n,1),c(),!0):!1}catch(i){return console.error("[useCart] Ошибка при удалении товара по индексу:",i),!1}}return{addToCart:t,updateQuantity:s,removeFromCart:p,removeFromCartByIndex:o,getCartItem:h,saveToLocalStorage:c}}export{he as a,ge as b,me as c,ye as d,de as e,fe as f,Q as g,j as s,be as u};
