import{R as K,aO as T,aP as P,aQ as q,aE as W,aR as A,s as I,aS as V,aT as Y,n as J,ah as G,r as H,f as g,B as Z,h as x,aj as ee,aU as te,p as $,aV as ne,aW as re}from"./index-DJ9SSKXY.js";import{c as ie}from"./QMenu-CfS2TLFZ.js";import{u as ae}from"./orderStore-BQ5EwhYp.js";const N={left:!0,right:!0,up:!0,down:!0,horizontal:!0,vertical:!0},oe=Object.keys(N);N.all=!0;function j(e){const n={};for(const u of oe)e[u]===!0&&(n[u]=!0);return Object.keys(n).length===0?N:(n.horizontal===!0?n.left=n.right=!0:n.left===!0&&n.right===!0&&(n.horizontal=!0),n.vertical===!0?n.up=n.down=!0:n.up===!0&&n.down===!0&&(n.vertical=!0),n.horizontal===!0&&n.vertical===!0&&(n.all=!0),n)}const ue=["INPUT","TEXTAREA"];function Q(e,n){return n.event===void 0&&e.target!==void 0&&e.target.draggable!==!0&&typeof n.handler=="function"&&ue.includes(e.target.nodeName.toUpperCase())===!1&&(e.qClonedBy===void 0||e.qClonedBy.indexOf(n.uid)===-1)}function se(e){const n=[.06,6,50];return typeof e=="string"&&e.length&&e.split(":").forEach((u,d)=>{const m=parseFloat(u);m&&(n[d]=m)}),n}const le=K({name:"touch-swipe",beforeMount(e,{value:n,arg:u,modifiers:d}){if(d.mouse!==!0&&P.has.touch!==!0)return;const m=d.mouseCapture===!0?"Capture":"",t={handler:n,sensitivity:se(u),direction:j(d),noop:W,mouseStart(o){Q(o,t)&&Y(o)&&(A(t,"temp",[[document,"mousemove","move",`notPassive${m}`],[document,"mouseup","end","notPassiveCapture"]]),t.start(o,!0))},touchStart(o){if(Q(o,t)){const f=o.target;A(t,"temp",[[f,"touchmove","move","notPassiveCapture"],[f,"touchcancel","end","notPassiveCapture"],[f,"touchend","end","notPassiveCapture"]]),t.start(o)}},start(o,f){P.is.firefox===!0&&q(e,!0);const p=V(o);t.event={x:p.left,y:p.top,time:Date.now(),mouse:f===!0,dir:!1}},move(o){if(t.event===void 0)return;if(t.event.dir!==!1){I(o);return}const f=Date.now()-t.event.time;if(f===0)return;const p=V(o),r=p.left-t.event.x,a=Math.abs(r),s=p.top-t.event.y,l=Math.abs(s);if(t.event.mouse!==!0){if(a<t.sensitivity[1]&&l<t.sensitivity[1]){t.end(o);return}}else if(window.getSelection().toString()!==""){t.end(o);return}else if(a<t.sensitivity[2]&&l<t.sensitivity[2])return;const v=a/f,y=l/f;t.direction.vertical===!0&&a<l&&a<100&&y>t.sensitivity[0]&&(t.event.dir=s<0?"up":"down"),t.direction.horizontal===!0&&a>l&&l<100&&v>t.sensitivity[0]&&(t.event.dir=r<0?"left":"right"),t.direction.up===!0&&a<l&&s<0&&a<100&&y>t.sensitivity[0]&&(t.event.dir="up"),t.direction.down===!0&&a<l&&s>0&&a<100&&y>t.sensitivity[0]&&(t.event.dir="down"),t.direction.left===!0&&a>l&&r<0&&l<100&&v>t.sensitivity[0]&&(t.event.dir="left"),t.direction.right===!0&&a>l&&r>0&&l<100&&v>t.sensitivity[0]&&(t.event.dir="right"),t.event.dir!==!1?(I(o),t.event.mouse===!0&&(document.body.classList.add("no-pointer-events--children"),document.body.classList.add("non-selectable"),ie(),t.styleCleanup=w=>{t.styleCleanup=void 0,document.body.classList.remove("non-selectable");const b=()=>{document.body.classList.remove("no-pointer-events--children")};w===!0?setTimeout(b,50):b()}),t.handler({evt:o,touch:t.event.mouse!==!0,mouse:t.event.mouse,direction:t.event.dir,duration:f,distance:{x:a,y:l}})):t.end(o)},end(o){t.event!==void 0&&(T(t,"temp"),P.is.firefox===!0&&q(e,!1),t.styleCleanup?.(!0),o!==void 0&&t.event.dir!==!1&&I(o),t.event=void 0)}};if(e.__qtouchswipe=t,d.mouse===!0){const o=d.mouseCapture===!0||d.mousecapture===!0?"Capture":"";A(t,"main",[[e,"mousedown","mouseStart",`passive${o}`]])}P.has.touch===!0&&A(t,"main",[[e,"touchstart","touchStart",`passive${d.capture===!0?"Capture":""}`],[e,"touchmove","noop","notPassiveCapture"]])},updated(e,n){const u=e.__qtouchswipe;u!==void 0&&(n.oldValue!==n.value&&(typeof n.value!="function"&&u.end(),u.handler=n.value),u.direction=j(n.modifiers))},beforeUnmount(e){const n=e.__qtouchswipe;n!==void 0&&(T(n,"main"),T(n,"temp"),P.is.firefox===!0&&q(e,!1),n.styleCleanup?.(),delete e.__qtouchswipe)}});function ce(){let e=Object.create(null);return{getCache:(n,u)=>e[n]===void 0?e[n]=typeof u=="function"?u():u:e[n],setCache(n,u){e[n]=u},hasCache(n){return Object.hasOwnProperty.call(e,n)},clearCache(n){n!==void 0?delete e[n]:e=Object.create(null)}}}const ve={name:{required:!0},disable:Boolean},R={setup(e,{slots:n}){return()=>x("div",{class:"q-panel scroll",role:"tabpanel"},$(n.default))}},me={modelValue:{required:!0},animated:Boolean,infinite:Boolean,swipeable:Boolean,vertical:Boolean,transitionPrev:String,transitionNext:String,transitionDuration:{type:[String,Number],default:300},keepAlive:Boolean,keepAliveInclude:[String,Array,RegExp],keepAliveExclude:[String,Array,RegExp],keepAliveMax:Number},he=["update:modelValue","beforeTransition","transition"];function ye(){const{props:e,emit:n,proxy:u}=J(),{getCache:d}=ce(),{registerTimeout:m}=G();let t,o;const f=H(null),p={value:null};function r(i){const c=e.vertical===!0?"up":"left";C((u.$q.lang.rtl===!0?-1:1)*(i.direction===c?1:-1))}const a=g(()=>[[le,r,void 0,{horizontal:e.vertical!==!0,vertical:e.vertical,mouse:!0}]]),s=g(()=>e.transitionPrev||`slide-${e.vertical===!0?"down":"right"}`),l=g(()=>e.transitionNext||`slide-${e.vertical===!0?"up":"left"}`),v=g(()=>`--q-transition-duration: ${e.transitionDuration}ms`),y=g(()=>typeof e.modelValue=="string"||typeof e.modelValue=="number"?e.modelValue:String(e.modelValue)),w=g(()=>({include:e.keepAliveInclude,exclude:e.keepAliveExclude,max:e.keepAliveMax})),b=g(()=>e.keepAliveInclude!==void 0||e.keepAliveExclude!==void 0);Z(()=>e.modelValue,(i,c)=>{const h=S(i)===!0?D(i):-1;o!==!0&&z(h===-1?0:h<D(c)?-1:1),p.value!==h&&(p.value=h,n("beforeTransition",i,c),m(()=>{n("transition",i,c)},e.transitionDuration))});function E(){C(1)}function O(){C(-1)}function B(i){n("update:modelValue",i)}function S(i){return i!=null&&i!==""}function D(i){return t.findIndex(c=>c.props.name===i&&c.props.disable!==""&&c.props.disable!==!0)}function M(){return t.filter(i=>i.props.disable!==""&&i.props.disable!==!0)}function z(i){const c=i!==0&&e.animated===!0&&p.value!==-1?"q-transition--"+(i===-1?s.value:l.value):null;f.value!==c&&(f.value=c)}function C(i,c=p.value){let h=c+i;for(;h!==-1&&h<t.length;){const k=t[h];if(k!==void 0&&k.props.disable!==""&&k.props.disable!==!0){z(i),o=!0,n("update:modelValue",k.props.name),setTimeout(()=>{o=!1});return}h+=i}e.infinite===!0&&t.length!==0&&c!==-1&&c!==t.length&&C(i,i===-1?t.length:-1)}function _(){const i=D(e.modelValue);return p.value!==i&&(p.value=i),!0}function L(){const i=S(e.modelValue)===!0&&_()&&t[p.value];return e.keepAlive===!0?[x(ne,w.value,[x(b.value===!0?d(y.value,()=>({...R,name:y.value})):R,{key:y.value,style:v.value},()=>i)])]:[x("div",{class:"q-panel scroll",style:v.value,key:y.value,role:"tabpanel"},[i])]}function U(){if(t.length!==0)return e.animated===!0?[x(ee,{name:f.value},L)]:L()}function F(i){return t=te($(i.default,[])).filter(c=>c.props!==null&&c.props.slot===void 0&&S(c.props.name)===!0),t.length}function X(){return t}return Object.assign(u,{next:E,previous:O,goTo:B}),{panelIndex:p,panelDirectives:a,updatePanelsList:F,updatePanelIndex:_,getPanelContent:U,getEnabledPanels:M,getPanels:X,isValidPanelName:S,keepAliveProps:w,needsUniqueKeepAliveWrapper:b,goToPanelByOffset:C,goToPanel:B,nextPanel:E,previousPanel:O}}function ge(){const e=ae();function n(r){return typeof r=="string"?parseFloat(r)||0:Number(r)||0}function u(r){return typeof r=="string"?parseInt(r,10)||1:Number(r)||1}function d(){try{window.localStorage.setItem("basket",JSON.stringify(e.basketData))}catch(r){console.error("[useCart] Ошибка при сохранении корзины в localStorage:",r)}}function m(r){if(r)return e.basketData.find(a=>a.id===r)}function t(r){try{if(r?.id==null)return console.warn("[useCart] Нельзя добавить товар без ID"),null;const a=r.id,s={...structuredClone(re(r)),id:a,quantity:1,product_id:a,price:n(r.price)};if(!e.basketData.length)return e.basketData.push(s),d(),s;const l=e.basketData.find(v=>v.id===r.id);if(l){const v=u(l.quantity);return l.quantity=v+1,d(),l}else return e.basketData.push(s),d(),s}catch(a){return console.error("[useCart] Ошибка при добавлении товара в корзину:",a),null}}function o(r,a){try{let s;if(typeof r=="number"?s=m(r):s=r,!s)return console.warn("[useCart] Товар не найден в корзине"),null;const v=u(s.quantity)+a;return v<=0?(f(s.id),null):(s.quantity=v,d(),s)}catch(s){return console.error("[useCart] Ошибка при изменении количества товара:",s),null}}function f(r){try{const a=e.basketData.findIndex(s=>s.id===r);return a!==-1?(e.basketData.splice(a,1),d(),!0):!1}catch(a){return console.error("[useCart] Ошибка при удалении товара из корзины:",a),!1}}function p(r){try{return r>=0&&r<e.basketData.length?(e.basketData.splice(r,1),d(),!0):!1}catch(a){return console.error("[useCart] Ошибка при удалении товара по индексу:",a),!1}}return{addToCart:t,updateQuantity:o,removeFromCart:f,removeFromCartByIndex:p,getCartItem:m,saveToLocalStorage:d}}export{ve as a,he as b,me as c,ye as d,ce as e,j as g,Q as s,ge as u};
