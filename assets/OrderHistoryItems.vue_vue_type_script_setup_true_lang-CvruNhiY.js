import{Q as v,a as f,b as o}from"./QItem-DtjGrfGK.js";import{Q as D}from"./QList-DHJcuI02.js";import{Q as N}from"./QBtnDropdown-CfcJA1R7.js";import{C as S}from"./ClosePopup-COvk0Z3k.js";import{u as B}from"./use-quasar-Dnf3Jod8.js";import{u as A}from"./orderStore-CWQ6RtuI.js";import{d as M}from"./useUtils-wljdfP6y.js";import{X as w,Y as T,a3 as _,_ as s,a1 as a,$ as e,a4 as L,a5 as b,Z as C,ad as V,a7 as n,a8 as c,a6 as G,a9 as O}from"./index-ClLLv0Nx.js";var u=(l=>(l.CREATED="created",l.ASSEMBLING="assembling",l.DELIVERING="delivering",l.COMPLETED="completed",l.CANCELLED="cancelled",l))(u||{});const Z=w({__name:"OrderHistoryItems",props:{orderData:{},adminMode:{type:Boolean}},setup(l){const d=B(),y=A(),E=[{label:"создан",value:u.CREATED},{label:"собирается",value:u.ASSEMBLING},{label:"в пути",value:u.DELIVERING},{label:"завершён",value:u.COMPLETED},{label:"отменён",value:u.CANCELLED}];function I(r,t){d.dialog({cancel:!0,message:"Вы уверенны что хотите изменить статус?",persistent:!0,title:"Смена статуса"}).onOk(()=>{g(r,t)})}async function g(r,t){try{d.loading.show(),await y.updateOrderStatus(r,t)&&d.notify({color:"primary",message:"Статус успешно изменен"})}catch(m){console.error(m)}finally{d.loading.hide()}}return(r,t)=>{const m=T("q-item-action");return s(),_("div",null,[a(D,null,{default:e(()=>[(s(!0),_(L,null,b(r.orderData,(p,k)=>(s(),C(v,{key:k,class:"border-bot"},{default:e(()=>[a(f,null,{default:e(()=>[a(o,{caption:"",lines:"2"},{default:e(()=>[...t[0]||(t[0]=[n("Дата",-1)])]),_:1}),a(o,null,{default:e(()=>[n(c(G(M)(p.order_date)),1)]),_:2},1024)]),_:2},1024),a(f,null,{default:e(()=>[a(o,{caption:"",lines:"2"},{default:e(()=>[...t[1]||(t[1]=[n("Статус",-1)])]),_:1}),a(o,null,{default:e(()=>[n(c(E.find(i=>i.value===i)),1)]),_:1})]),_:1}),a(f,null,{default:e(()=>[a(o,{caption:"",lines:"2"},{default:e(()=>[...t[2]||(t[2]=[n("Общая сумма",-1)])]),_:1}),a(o,null,{default:e(()=>[n(c(p.total_amount),1)]),_:2},1024)]),_:2},1024),r.adminMode?(s(),C(m,{key:0},{default:e(()=>[a(N,{color:"green",dense:""},{default:e(()=>[(s(),_(L,null,b(E,(i,Q)=>a(D,{key:Q},{default:e(()=>[O((s(),C(v,{clickable:"",onClick:R=>I(p.id,i.value)},{default:e(()=>[a(f,null,{default:e(()=>[a(o,null,{default:e(()=>[n(c(i.label),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"])),[[S]])]),_:2},1024)),64))]),_:2},1024)]),_:2},1024)):V("",!0)]),_:2},1024))),128))]),_:1})])}}});export{Z as _};
