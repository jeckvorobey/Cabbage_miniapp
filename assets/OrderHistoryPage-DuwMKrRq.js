import{Q as n}from"./QInfiniteScroll-G5ehRvoi.js";import{u as m}from"./use-quasar-qOqJJ0L1.js";import{u as f}from"./orderStore-Dt5bGS-r.js";import{O as d}from"./OrderHistoryItems-BsetsbaS.js";import{V as p,m as l,a1 as c,Y as u,$ as i,Z as g,_ as h,a4 as _}from"./index-BemvcPyr.js";import"./QItem-ZOZ4Z8yr.js";import"./QList-CefNm_iU.js";import"./QBtnDropdown-C4OJaoRt.js";import"./QMenu-DnV_Jb4m.js";import"./ClosePopup-D1KKjhzk.js";import"./QBadge-Coz1ZpB_.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const H=p({__name:"OrderHistoryPage",setup(y){const e=m(),a=f();l(async()=>{a.pagination.offset=0,await r()});const s=async(o,t)=>{if(!a.pagination.has_more){t(!0);return}await r(),a.pagination.offset+=a.pagination.limit,t()};async function r(){try{e.loading.show();const o={limit:a.pagination.limit,offset:a.pagination.offset},t=await a.fetchOrders(o);t&&(a.pagination.total=t.total,a.pagination.has_more=t.has_more,a.ordersData?.length?a.ordersData.push(t.items):a.ordersData=t.items),t&&(a.ordersData=t.items)}catch(o){console.error(o)}finally{e.loading.hide()}}return(o,t)=>(u(),c("div",null,[i(n,{offset:250,onLoad:s},{default:g(()=>[t[1]||(t[1]=h("h6",{class:"text-center q-mt-md q-mb-md"},"История заказов",-1)),i(d,{orderData:_(a).ordersData,adminMode:!0,onRefresh:t[0]||(t[0]=D=>r())},null,8,["orderData"])]),_:1})]))}});export{H as default};
