import{b3 as C,r as g,b4 as v,c as d,k as G,U as z,m as Q,o as H,h as m,a6 as V,l as p,aC as x,w as K,aD as I,g as W,am as q}from"./index--8XxpmhN.js";import{E as u}from"./useUtils-DxDhiyl2.js";const T={left:!0,right:!0,up:!0,down:!0,horizontal:!0,vertical:!0},X=Object.keys(T);T.all=!0;function oe(e){const t={};for(const n of X)e[n]===!0&&(t[n]=!0);return Object.keys(t).length===0?T:(t.horizontal===!0?t.left=t.right=!0:t.left===!0&&t.right===!0&&(t.horizontal=!0),t.vertical===!0?t.up=t.down=!0:t.up===!0&&t.down===!0&&(t.vertical=!0),t.horizontal===!0&&t.vertical===!0&&(t.all=!0),t)}const J=["INPUT","TEXTAREA"];function ie(e,t){return t.event===void 0&&e.target!==void 0&&e.target.draggable!==!0&&typeof t.handler=="function"&&J.includes(e.target.nodeName.toUpperCase())===!1&&(e.qClonedBy===void 0||e.qClonedBy.indexOf(t.uid)===-1)}const B=["B","KB","MB","GB","TB","PB"];function ae(e,t=1){let n=0;for(;parseInt(e,10)>=1024&&n<B.length-1;)e/=1024,++n;return`${e.toFixed(t)}${B[n]}`}function ue(e,t,n){return n<=t?t:Math.min(n,Math.max(t,e))}function se(e,t,n){if(n<=t)return t;const s=n-t+1;let l=t+(e-t)%s;return l<t&&(l=s+l),l===0?0:l}const le=C("Products",()=>{const e=g(),t=g({offset:0,limit:20,total:0,has_more:!0});async function n(i){return v.post("products",i).then(r=>r.data).catch(r=>{throw console.error("[ProductsStore] - An error occurred while createing via product",r.message),r})}async function s(i){return v.patch(`/products/${i.id}`,i).then(r=>r.data).catch(r=>{throw console.error("[ProductsStore] - An error occurred while creating via updateProduct",r.message),r})}async function l(i){return v.get(`/products/${i}`).then(r=>r.data).catch(r=>{throw console.error("[ProductsStore] - An error occurred while fetching via product",r.message),r})}async function y(i){return v.get("products",{params:i}).then(r=>r.data).catch(r=>{throw console.error("[ProductsStore] - An error occurred while fetching via products",r.message),r})}async function c(i){return v.delete(`products/${i}`).then(r=>r.data).catch(r=>{throw console.error("[ProductsStore] - An error occurred while deleting via Product",r.message),r})}async function a(i,r){return v.post(`/products/${i}/images`,r).then(w=>w.data).catch(w=>{throw console.error("[ProductsStore] - An error occurred while createing via uploadFile",w.message),w})}async function A(i){return v.delete(`/products/images/${i}`).then(r=>r.data).catch(r=>{throw console.error("[ProductsStore] - An error occurred while createing via deleteFile",r.message),r})}return{pagination:t,products:e,createProduct:n,updateProduct:s,fetchProducts:y,deleteProduct:c,fetchProductsById:l,uploadFile:a,deleteFile:A}}),Y={ratio:[String,Number]};function Z(e,t){return d(()=>{const n=Number(e.ratio||(t!==void 0?t.value:void 0));return isNaN(n)!==!0&&n>0?{paddingBottom:`${100/n}%`}:null})}const ee=1.7778,ce=G({name:"QImg",props:{...Y,src:String,srcset:String,sizes:String,alt:String,crossorigin:String,decoding:String,referrerpolicy:String,draggable:Boolean,loading:{type:String,default:"lazy"},loadingShowDelay:{type:[Number,String],default:0},fetchpriority:{type:String,default:"auto"},width:String,height:String,initialRatio:{type:[Number,String],default:ee},placeholderSrc:String,errorSrc:String,fit:{type:String,default:"cover"},position:{type:String,default:"50% 50%"},imgClass:String,imgStyle:Object,noSpinner:Boolean,noNativeMenu:Boolean,noTransition:Boolean,spinnerColor:String,spinnerSize:String},emits:["load","error"],setup(e,{slots:t,emit:n}){const s=g(e.initialRatio),l=Z(e,s),y=W(),{registerTimeout:c,removeTimeout:a}=z(),{registerTimeout:A,removeTimeout:i}=z(),r=d(()=>e.placeholderSrc!==void 0?{src:e.placeholderSrc}:null),w=d(()=>e.errorSrc!==void 0?{src:e.errorSrc,__qerror:!0}:null),f=[g(null),g(r.value)],h=g(0),b=g(!1),N=g(!1),D=d(()=>`q-img q-img--${e.noNativeMenu===!0?"no-":""}menu`),E=d(()=>({width:e.width,height:e.height})),k=d(()=>`q-img__image ${e.imgClass!==void 0?e.imgClass+" ":""}q-img__image--with${e.noTransition===!0?"out":""}-transition q-img__image--`),$=d(()=>({...e.imgStyle,objectFit:e.fit,objectPosition:e.position}));function L(){if(i(),e.loadingShowDelay===0){b.value=!0;return}A(()=>{b.value=!0},e.loadingShowDelay)}function M(){i(),b.value=!1}function O({target:o}){I(y)===!1&&(a(),s.value=o.naturalHeight===0?.5:o.naturalWidth/o.naturalHeight,_(o,1))}function _(o,S){S===1e3||I(y)===!0||(o.complete===!0?j(o):c(()=>{_(o,S+1)},50))}function j(o){I(y)!==!0&&(h.value=h.value^1,f[h.value].value=null,M(),o.getAttribute("__qerror")!=="true"&&(N.value=!1),n("load",o.currentSrc||o.src))}function F(o){a(),M(),N.value=!0,f[h.value].value=w.value,f[h.value^1].value=r.value,n("error",o)}function R(o){const S=f[o].value,P={key:"img_"+o,class:k.value,style:$.value,alt:e.alt,crossorigin:e.crossorigin,decoding:e.decoding,referrerpolicy:e.referrerpolicy,height:e.height,width:e.width,loading:e.loading,fetchpriority:e.fetchpriority,"aria-hidden":"true",draggable:e.draggable,...S};return h.value===o?Object.assign(P,{class:P.class+"current",onLoad:O,onError:F}):P.class+="loaded",m("div",{class:"q-img__container absolute-full",key:"img"+o},m("img",P))}function U(){return b.value===!1?m("div",{key:"content",class:"q-img__content absolute-full q-anchor--skip"},p(t[N.value===!0?"error":"default"])):m("div",{key:"loading",class:"q-img__loading absolute-full flex flex-center"},t.loading!==void 0?t.loading():e.noSpinner===!0?void 0:[m(x,{color:e.spinnerColor,size:e.spinnerSize})])}{let o=function(){K(()=>e.src||e.srcset||e.sizes?{src:e.src,srcset:e.srcset,sizes:e.sizes}:null,S=>{a(),N.value=!1,S===null?(M(),f[h.value^1].value=r.value):L(),f[h.value].value=S},{immediate:!0})};Q.value===!0?H(o):o()}return()=>{const o=[];return l.value!==null&&o.push(m("div",{key:"filler",style:l.value})),f[0].value!==null&&o.push(R(0)),f[1].value!==null&&o.push(R(1)),o.push(m(V,{name:"q-transition--fade"},U)),m("div",{key:"main",class:D.value,style:E.value,role:"img","aria-label":e.alt},o)}}}),de=C("Order",()=>{const e=g([]);async function t(n){return v.post("order",n).then(s=>s.data).catch(s=>{throw console.error("[OrderStore] - An error occurred while createing via order",s.message),s})}return{basketData:e,createOrder:t}});function te(e){const t=q(e);if(t&&typeof t=="object"&&"role"in t){const n=t.role;return n!=null?q(n):null}return t}function ge(e){const t=d(()=>{const c=te(e);if(c==null)return;const a=Number(c);if(Object.values(u).includes(a))return a}),n=d(()=>t.value===u.ADMIN),s=d(()=>t.value===u.MANAGER||t.value===u.ADMIN),l=d(()=>{const c=t.value;return c===u.USER||c===u.MANAGER||c===u.ADMIN});return{permission:t,isAdmin:n,isManager:s,isUser:l,hasPermission:c=>d(()=>{const a=t.value;if(a==null)return!1;switch(Number(c)){case u.ADMIN:return a===u.ADMIN;case u.MANAGER:return a===u.MANAGER||a===u.ADMIN;case u.USER:return a===u.USER||a===u.MANAGER||a===u.ADMIN;default:return!1}})}}export{ce as Q,de as a,ue as b,ge as c,oe as g,ae as h,se as n,ie as s,le as u};
