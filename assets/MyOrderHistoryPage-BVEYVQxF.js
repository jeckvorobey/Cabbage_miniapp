import{Q as n}from"./QInfiniteScroll-DIUAgkx4.js";import{u as m}from"./use-quasar-Dnf3Jod8.js";import{u as f}from"./orderStore-CWQ6RtuI.js";import{_ as d}from"./OrderHistoryItems.vue_vue_type_script_setup_true_lang-CvruNhiY.js";import{X as p,m as c,a3 as l,_ as u,a1 as i,$ as _,a0 as g,a6 as h}from"./index-ClLLv0Nx.js";import"./QItem-DtjGrfGK.js";import"./QList-DHJcuI02.js";import"./QBtnDropdown-CfcJA1R7.js";import"./QMenu-CgB58gES.js";import"./ClosePopup-COvk0Z3k.js";import"./useUtils-wljdfP6y.js";const C=p({__name:"MyOrderHistoryPage",setup(y){const e=m(),t=f();c(async()=>{t.pagination.offset=0,await r()});const s=async(o,a)=>{if(!t.pagination.has_more){a(!0);return}await r(),t.pagination.offset+=t.pagination.limit,a()};async function r(){try{e.loading.show();const o={limit:t.pagination.limit,offset:t.pagination.offset},a=await t.fetchMyOrder(o);a&&(t.pagination.total=a.total,t.pagination.has_more=a.has_more,t.ordersData?.length?t.ordersData.push(a.items):t.ordersData=a.items),a&&(t.ordersData=a.items)}catch(o){console.error(o)}finally{e.loading.hide()}}return(o,a)=>(u(),l("div",null,[i(n,{offset:250,onLoad:s},{default:_(()=>[a[0]||(a[0]=g("h6",{class:"text-center q-mt-md q-mb-md"},"История заказов",-1)),i(d,{orderData:h(t).ordersData,adminMode:!0},null,8,["orderData"])]),_:1})]))}});export{C as default};
