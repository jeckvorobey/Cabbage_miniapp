import{w as y,s as f,r as m,c as v,j as g}from"./index-H9N5e26t.js";var a;(e=>{e.settings=u({apikey:""}),e.isReadyToInit=p(()=>!!e.settings.value.apikey),e.ymaps=()=>ymaps3,e.script=f(null);class i extends Error{constructor(s){super(s),this.message=s,this.name="YandexMapException"}}e.YandexMapException=i,e.loadStatus=u("pending"),e.isLoaded=p(()=>e.loadStatus.value==="loaded"||e.loadStatus.value==="error"),e.loadError=u(null);function t(){return ymaps3.import("@yandex/ymaps3-layers-extra")}e.importLayersExtra=t})(a||(a={}));function u(e){return typeof window>"u"?{value:e,__v_isRef:!0}:m(e)}function p(e,i){return typeof window>"u"?{get value(){return e()},__v_isRef:!0}:v(e,i)}function w(){return typeof process<"u"&&process.dev}function x({text:e,isInternal:i,warn:t}){return t&&(e=`Warning: ${e}`),i&&(e+=" This is likely Vue Yandex Maps internal bug.",w()&&(e+=" You can report this bug here: https://github.com/yandex-maps-unofficial/vue-yandex-maps/issues/new/choose")),new a.YandexMapException(e)}function l(e){const i=x(e);if(e.warn)console.warn(i);else throw i}const h=a.YandexMapException,c={apikey:!0,servicesApikeys:!0,lang:!0,initializeOn:!0,importModules:!0,version:!0,strictMode:!0,domain:!0,mapsRenderWaitDuration:!0,mapsScriptWaitDuration:!0,scriptAttributes:!0,cdnLibraryLoading:!0};function k(){return new Promise((e,i)=>{if(typeof ymaps3<"u")return a.loadStatus.value!=="loaded"&&(a.loadStatus.value="loaded"),e();if(typeof window>"u")return i(new h("You must call initYmaps on Client Side only"));if(a.loadStatus.value==="loading"){const n=y(a.loadStatus,o=>{a.isLoaded.value&&(n(),o==="error"&&i(a.loadError),o==="loaded"&&e())},{immediate:!0});return}a.loadStatus.value="loading";const t=a.settings.value;t.apikey||l({text:"apikey was not set for Yandex Maps initialization. Ensure you have attached needed plugins or called createYmapsOptions with apikey. If you need delayed init, please use VueYandexMaps.isReadyToInit computed as v-if."});const r=document.createElement("SCRIPT");a.script.value=r;const s=new URL(`${t.domain}/${t.version}/`);s.searchParams.set("lang",t.lang||"ru_RU"),s.searchParams.set("apikey",t.apikey);const d={async:"",defer:"",referrerpolicy:"strict-origin-when-cross-origin",type:"text/javascript",id:"vue-yandex-maps",src:s.toString(),...t.scriptAttributes||{}};for(const n in d)d[n]!==!1&&r.setAttribute(n,d[n]);document.head.appendChild(r),r.onload=async()=>{try{await a.ymaps().ready,t.servicesApikeys&&Object.keys(t.servicesApikeys).length>0&&a.ymaps().getDefaultConfig().setApikeys(t.servicesApikeys),typeof t.strictMode=="boolean"&&(a.ymaps().strictMode=t.strictMode),t.importModules&&await Promise.all(t.importModules.map(n=>a.ymaps().import(n))),t.cdnLibraryLoading?.enabled!==!1&&a.ymaps().import.registerCdn(t.cdnLibraryLoading?.url||"https://cdn.jsdelivr.net/npm/{package}",[...["@yandex/ymaps3-default-ui-theme@latest","@yandex/ymaps3-resizer@latest","@yandex/ymaps3-minimap@latest","@yandex/ymaps3-context-menu@latest","@yandex/ymaps3-drawer-control@latest","@yandex/ymaps3-signpost@latest","@yandex/ymaps3-spinner@latest","@yandex/ymaps3-world-utils@latest"].filter(n=>!(t.cdnLibraryLoading?.extendLibraries??[]).some(o=>o.startsWith("@yandex")?o.split("@")[1]===n.split("@")[1]:!1)),...t.cdnLibraryLoading?.extendLibraries??[]]),a.loadStatus.value="loaded",e()}catch(n){a.loadStatus.value="error",a.loadError.value=n,i(n)}},r.onerror=n=>{a.loadError.value=n,i(n)}})}function b(e,i=!1){if(a.isReadyToInit.value)return a.settings.value;const t={lang:"ru_RU",initializeOn:"onComponentMount",importModules:[],version:"v3",strictMode:!1,domain:"https://api-maps.yandex.ru",mapsRenderWaitDuration:!0,mapsScriptWaitDuration:!0,servicesApikeys:null,scriptAttributes:{},cdnLibraryLoading:{},...e};t.apikey||l({text:"You must specify apikey for createYmapsOptions"});const r=Object.keys(t).filter(s=>!(s in c));return r.length&&l({text:`You have passed unknown keys to createYmapsOptions: ${r.join(", ")}. Only ${Object.keys(c).join(", ")} are allowed.`}),typeof window>"u"||(a.settings.value=t),t}function L(e){return{install(i){b(e),e.initializeOn==="onPluginInit"&&k().catch(console.error)}}}const S=g(({app:e})=>{e.use(L({apikey:"d0c80e2a-b8bd-436f-bfe0-efcd05feed2a",lang:"ru_RU",version:"2.1"}))});export{S as default};
