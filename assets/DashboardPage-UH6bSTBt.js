import{k as te,g as Z,a as Se,v as J,x as gt,$ as ht,c as m,h as y,l as de,aw as Je,ax as _t,ay as yt,az as bt,r as N,L as Ze,N as se,G as oe,P as et,S as tt,w as ee,n as Fe,i as xt,aA as St,aB as qt,aC as Te,aD as Ct,ad as at,Q as H,_ as Ft,aE as kt,am as K,D as wt,E as be,H as xe,p as Pt,I as ve,J as Ve,M as $t,U as At,a6 as Dt,aF as Ut,aG as zt,aH as It,aI as Me,aJ as Nt,o as he,aK as Bt,Z as Et,C as Rt,d as _e,u as ke,aj as j,ai as T,an as R,ah as ce,aq as nt,F as ot,f as D,ak as le,aL as Tt,aM as ge,ao as M,ap as W,av as ie,aN as qe,Y as fe,as as lt,aO as Qe,at as Le}from"./index-BHoUKiZc.js";import{g as Oe,s as je,u as we,Q as rt,a as Vt}from"./orderStore-kXVEOvqz.js";import{Q as Mt}from"./QInfiniteScroll-D7gC00Z6.js";import{u as Pe}from"./use-quasar-DVwwMuPz.js";import{b as Qt,h as He,u as Lt}from"./categoriesStore--TP-RUZY.js";import{Q as Ke}from"./QSelect-BhXNaX-S.js";import{u as it,Q as We}from"./unitsStore-Di46ofCs.js";import{C as pe}from"./ClosePopup-xUBZL2Ha.js";import{E as Q,c as Ot,g as ut}from"./useUtils-DibkGWpU.js";import{_ as $e}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./QMenu-BPDKfujU.js";const jt=te({name:"QPage",props:{padding:Boolean,styleFn:Function},setup(e,{slots:o}){const{proxy:{$q:r}}=Z(),n=Se(gt,J);if(n===J)return console.error("QPage needs to be a deep child of QLayout"),J;if(Se(ht,J)===J)return console.error("QPage needs to be child of QPageContainer"),J;const a=m(()=>{const c=(n.header.space===!0?n.header.size:0)+(n.footer.space===!0?n.footer.size:0);if(typeof e.styleFn=="function"){const _=n.isContainer.value===!0?n.containerHeight.value:r.screen.height;return e.styleFn(c,_)}return{minHeight:n.isContainer.value===!0?n.containerHeight.value-c+"px":r.screen.height===0?c!==0?`calc(100vh - ${c}px)`:"100vh":r.screen.height-c+"px"}}),s=m(()=>`q-page${e.padding===!0?" q-layout-padding":""}`);return()=>y("main",{class:s.value,style:a.value},de(o.default))}}),Ht=te({name:"QUploaderAddTrigger",setup(){const e=Se(Je,J);return e===J&&console.error("QUploaderAddTrigger needs to be child of QUploader"),e}}),Kt={..._t,min:{type:Number,default:0},max:{type:Number,default:100},color:String,centerColor:String,trackColor:String,fontSize:String,rounded:Boolean,thickness:{type:Number,default:.2,validator:e=>e>=0&&e<=1},angle:{type:Number,default:0},showValue:Boolean,reverse:Boolean,instantFeedback:Boolean},Ce=50,st=2*Ce,ct=st*Math.PI,Wt=Math.round(ct*1e3)/1e3,Xt=te({name:"QCircularProgress",props:{...Kt,value:{type:Number,default:0},animationSpeed:{type:[String,Number],default:600},indeterminate:Boolean},setup(e,{slots:o}){const{proxy:{$q:r}}=Z(),n=yt(e),u=m(()=>{const p=(r.lang.rtl===!0?-1:1)*e.angle;return{transform:e.reverse!==(r.lang.rtl===!0)?`scale3d(-1, 1, 1) rotate3d(0, 0, 1, ${-90-p}deg)`:`rotate3d(0, 0, 1, ${p-90}deg)`}}),a=m(()=>e.instantFeedback!==!0&&e.indeterminate!==!0?{transition:`stroke-dashoffset ${e.animationSpeed}ms ease 0s, stroke ${e.animationSpeed}ms ease`}:""),s=m(()=>st/(1-e.thickness/2)),c=m(()=>`${s.value/2} ${s.value/2} ${s.value} ${s.value}`),_=m(()=>Qt(e.value,e.min,e.max)),k=m(()=>e.max-e.min),b=m(()=>e.thickness/2*s.value),w=m(()=>{const p=(e.max-_.value)/k.value,t=e.rounded===!0&&_.value<e.max&&p<.25?b.value/2*(1-p/.25):0;return ct*p+t});function l({thickness:p,offset:t,color:q,cls:h,rounded:v}){return y("circle",{class:"q-circular-progress__"+h+(q!==void 0?` text-${q}`:""),style:a.value,fill:"transparent",stroke:"currentColor","stroke-width":p,"stroke-dasharray":Wt,"stroke-dashoffset":t,"stroke-linecap":v,cx:s.value,cy:s.value,r:Ce})}return()=>{const p=[];e.centerColor!==void 0&&e.centerColor!=="transparent"&&p.push(y("circle",{class:`q-circular-progress__center text-${e.centerColor}`,fill:"currentColor",r:Ce-b.value/2,cx:s.value,cy:s.value})),e.trackColor!==void 0&&e.trackColor!=="transparent"&&p.push(l({cls:"track",thickness:b.value,offset:0,color:e.trackColor})),p.push(l({cls:"circle",thickness:b.value,offset:w.value,color:e.color,rounded:e.rounded===!0?"round":void 0}));const t=[y("svg",{class:"q-circular-progress__svg",style:u.value,viewBox:c.value,"aria-hidden":"true"},p)];return e.showValue===!0&&t.push(y("div",{class:"q-circular-progress__text absolute-full row flex-center content-center",style:{fontSize:e.fontSize}},o.default!==void 0?o.default():[y("div",_.value)])),y("div",{class:`q-circular-progress q-circular-progress--${e.indeterminate===!0?"in":""}determinate`,style:n.value,role:"progressbar","aria-valuemin":e.min,"aria-valuemax":e.max,"aria-valuenow":e.indeterminate===!0?void 0:_.value},bt(o.internal,t))}}});function ne(e,o,r,n){const u=[];return e.forEach(a=>{n(a)===!0?u.push(a):o.push({failedPropValidation:r,file:a})}),u}function me(e){e?.dataTransfer&&(e.dataTransfer.dropEffect="copy"),se(e)}const Yt={multiple:Boolean,accept:String,capture:String,maxFileSize:[Number,String],maxTotalSize:[Number,String],maxFiles:[Number,String],filter:Function},Gt=["rejected"];function Jt({editable:e,dnd:o,getFileInput:r,addFilesToQueue:n}){const{props:u,emit:a,proxy:s}=Z(),c=N(null),_=m(()=>u.accept!==void 0?u.accept.split(",").map(i=>(i=i.trim(),i==="*"?"*/":(i.endsWith("/*")&&(i=i.slice(0,i.length-1)),i.toUpperCase()))):null),k=m(()=>parseInt(u.maxFiles,10)),b=m(()=>parseInt(u.maxTotalSize,10));function w(i){if(e.value)if(i!==Object(i)&&(i={target:null}),i.target?.matches('input[type="file"]')===!0)i.clientX===0&&i.clientY===0&&Ze(i);else{const z=r();z!==i.target&&z?.click(i)}}function l(i){e.value&&i&&n(null,i)}function p(i,z,C,g){let f=Array.from(z||i.target.files);const A=[],E=()=>{A.length!==0&&a("rejected",A)};if(u.accept!==void 0&&_.value.indexOf("*/")===-1&&(f=ne(f,A,"accept",P=>_.value.some(S=>P.type.toUpperCase().startsWith(S)||P.name.toUpperCase().endsWith(S))),f.length===0))return E();if(u.maxFileSize!==void 0){const P=parseInt(u.maxFileSize,10);if(f=ne(f,A,"max-file-size",S=>S.size<=P),f.length===0)return E()}if(u.multiple!==!0&&f.length!==0&&(f=[f[0]]),f.forEach(P=>{P.__key=P.webkitRelativePath+P.lastModified+P.name+P.size}),g===!0){const P=C.map(S=>S.__key);f=ne(f,A,"duplicate",S=>P.includes(S.__key)===!1)}if(f.length===0)return E();if(u.maxTotalSize!==void 0){let P=g===!0?C.reduce((S,V)=>S+V.size,0):0;if(f=ne(f,A,"max-total-size",S=>(P+=S.size,P<=b.value)),f.length===0)return E()}if(typeof u.filter=="function"){const P=u.filter(f);f=ne(f,A,"filter",S=>P.includes(S))}if(u.maxFiles!==void 0){let P=g===!0?C.length:0;if(f=ne(f,A,"max-files",()=>(P++,P<=k.value)),f.length===0)return E()}if(E(),f.length!==0)return f}function t(i){me(i),o.value!==!0&&(o.value=!0)}function q(i){se(i),(i.relatedTarget!==null||oe.is.safari!==!0?i.relatedTarget!==c.value:document.elementsFromPoint(i.clientX,i.clientY).includes(c.value)===!1)===!0&&(o.value=!1)}function h(i){me(i);const z=i.dataTransfer.files;z.length!==0&&n(null,z),o.value=!1}function v(i){if(o.value===!0)return y("div",{ref:c,class:`q-${i}__dnd absolute-full`,onDragenter:me,onDragover:me,onDragleave:q,onDrop:h})}return Object.assign(s,{pickFiles:w,addFiles:l}),{pickFiles:w,addFiles:l,onDragover:t,onDragleave:q,processFiles:p,getDndNode:v,maxFilesNumber:k,maxTotalSizeNumber:b}}function Xe(e){return(e*100).toFixed(2)+"%"}const Zt={...et,...Yt,label:String,color:String,textColor:String,square:Boolean,flat:Boolean,bordered:Boolean,noThumbnails:Boolean,thumbnailFit:{type:String,default:"cover"},autoUpload:Boolean,hideUploadBtn:Boolean,disable:Boolean,readonly:Boolean},dt=[...Gt,"start","finish","added","removed"];function ea(e,o){const r=Z(),{props:n,slots:u,emit:a,proxy:s}=r,{$q:c}=s,_=tt(n,c);function k(d,U,L){if(d.__status=U,U==="idle"){d.__uploaded=0,d.__progress=0,d.__sizeLabel=He(d.size),d.__progressLabel="0.00%";return}if(U==="failed"){s.$forceUpdate();return}d.__uploaded=U==="uploaded"?d.size:L,d.__progress=U==="uploaded"?1:Math.min(.9999,d.__uploaded/d.size),d.__progressLabel=Xe(d.__progress),s.$forceUpdate()}const b=m(()=>n.disable!==!0&&n.readonly!==!0),w=N(!1),l=N(null),p=N(null),t={files:N([]),queuedFiles:N([]),uploadedFiles:N([]),uploadedSize:N(0),updateFileStatus:k,isAlive:()=>Ct(r)===!1},{pickFiles:q,addFiles:h,onDragover:v,onDragleave:i,processFiles:z,getDndNode:C,maxFilesNumber:g,maxTotalSizeNumber:f}=Jt({editable:b,dnd:w,getFileInput:Ie,addFilesToQueue:Ne});Object.assign(t,e({props:n,slots:u,emit:a,helpers:t,exposeApi:d=>{Object.assign(t,d)}})),t.isBusy===void 0&&(t.isBusy=N(!1));const A=N(0),E=m(()=>A.value===0?0:t.uploadedSize.value/A.value),P=m(()=>Xe(E.value)),S=m(()=>He(A.value)),V=m(()=>b.value===!0&&t.isUploading.value!==!0&&(n.multiple===!0||t.queuedFiles.value.length===0)&&(n.maxFiles===void 0||t.files.value.length<g.value)&&(n.maxTotalSize===void 0||A.value<f.value)),F=m(()=>b.value===!0&&t.isBusy.value!==!0&&t.isUploading.value!==!0&&t.queuedFiles.value.length!==0);Ft(Je,Ee);const B=m(()=>"q-uploader column no-wrap"+(_.value===!0?" q-uploader--dark q-dark":"")+(n.bordered===!0?" q-uploader--bordered":"")+(n.square===!0?" q-uploader--square no-border-radius":"")+(n.flat===!0?" q-uploader--flat no-shadow":"")+(n.disable===!0?" disabled q-uploader--disable":"")+(w.value===!0?" q-uploader--dnd":"")),x=m(()=>"q-uploader__header"+(n.color!==void 0?` bg-${n.color}`:"")+(n.textColor!==void 0?` text-${n.textColor}`:""));ee(t.isUploading,(d,U)=>{U===!1&&d===!0?a("start"):U===!0&&d===!1&&a("finish")});function $(){n.disable===!1&&(t.abort(),t.uploadedSize.value=0,A.value=0,ze(),t.files.value=[],t.queuedFiles.value=[],t.uploadedFiles.value=[])}function I(){n.disable===!1&&Ue(["uploaded"],()=>{t.uploadedFiles.value=[]})}function X(){Ue(["idle","failed"],({size:d})=>{A.value-=d,t.queuedFiles.value=[]})}function Ue(d,U){if(n.disable===!0)return;const L={files:[],size:0},Y=t.files.value.filter(O=>d.indexOf(O.__status)===-1?!0:(L.size+=O.size,L.files.push(O),O.__img!==void 0&&window.URL.revokeObjectURL(O.__img.src),!1));L.files.length!==0&&(t.files.value=Y,U(L),a("removed",L.files))}function ye(d){n.disable||(d.__status==="uploaded"?t.uploadedFiles.value=t.uploadedFiles.value.filter(U=>U.__key!==d.__key):d.__status==="uploading"?d.__abort():A.value-=d.size,t.files.value=t.files.value.filter(U=>U.__key!==d.__key?!0:(U.__img!==void 0&&window.URL.revokeObjectURL(U.__img.src),!1)),t.queuedFiles.value=t.queuedFiles.value.filter(U=>U.__key!==d.__key),a("removed",[d]))}function ze(){t.files.value.forEach(d=>{d.__img!==void 0&&window.URL.revokeObjectURL(d.__img.src)})}function Ie(){return p.value||l.value.getElementsByClassName("q-uploader__input")[0]}function Ne(d,U){const L=z(d,U,t.files.value,!0),Y=Ie();Y!=null&&(Y.value=""),L!==void 0&&(L.forEach(O=>{if(t.updateFileStatus(O,"idle"),A.value+=O.size,n.noThumbnails!==!0&&O.type.toUpperCase().startsWith("IMAGE")){const Re=new Image;Re.src=window.URL.createObjectURL(O),O.__img=Re}}),t.files.value=t.files.value.concat(L),t.queuedFiles.value=t.queuedFiles.value.concat(L),a("added",L),n.autoUpload===!0&&t.upload())}function Be(){F.value===!0&&t.upload()}function re(d,U,L){if(d===!0){const Y={type:"a",key:U,icon:c.iconSet.uploader[U],flat:!0,dense:!0};let O;return U==="add"?(Y.onClick=q,O=Ee):Y.onClick=L,y(H,Y,O)}}function Ee(){return y("input",{ref:p,class:"q-uploader__input overflow-hidden absolute-full",tabindex:-1,type:"file",title:"",accept:n.accept,multiple:n.multiple===!0?"multiple":void 0,capture:n.capture,onMousedown:Ze,onClick:q,onChange:Ne})}function pt(){return u.header!==void 0?u.header(ae):[y("div",{class:"q-uploader__header-content column"},[y("div",{class:"flex flex-center no-wrap q-gutter-xs"},[re(t.queuedFiles.value.length!==0,"removeQueue",X),re(t.uploadedFiles.value.length!==0,"removeUploaded",I),t.isUploading.value===!0?y(Te,{class:"q-uploader__spinner"}):null,y("div",{class:"col column justify-center"},[n.label!==void 0?y("div",{class:"q-uploader__title"},[n.label]):null,y("div",{class:"q-uploader__subtitle"},[S.value+" / "+P.value])]),re(V.value,"add"),re(n.hideUploadBtn===!1&&F.value===!0,"upload",t.upload),re(t.isUploading.value,"clear",t.abort)])])]}function mt(){return u.list!==void 0?u.list(ae):t.files.value.map(d=>y("div",{key:d.__key,class:"q-uploader__file relative-position"+(n.noThumbnails!==!0&&d.__img!==void 0?" q-uploader__file--img":"")+(d.__status==="failed"?" q-uploader__file--failed":d.__status==="uploaded"?" q-uploader__file--uploaded":""),style:n.noThumbnails!==!0&&d.__img!==void 0?{backgroundImage:'url("'+d.__img.src+'")',backgroundSize:n.thumbnailFit}:null},[y("div",{class:"q-uploader__file-header row flex-center no-wrap"},[d.__status==="failed"?y(at,{class:"q-uploader__file-status",name:c.iconSet.type.negative,color:"negative"}):null,y("div",{class:"q-uploader__file-header-content col"},[y("div",{class:"q-uploader__title"},[d.name]),y("div",{class:"q-uploader__subtitle row items-center no-wrap"},[d.__sizeLabel+" / "+d.__progressLabel])]),d.__status==="uploading"?y(Xt,{value:d.__progress,min:0,max:1,indeterminate:d.__progress===0}):y(H,{round:!0,dense:!0,flat:!0,icon:c.iconSet.uploader[d.__status==="uploaded"?"done":"clear"],onClick:()=>{ye(d)}})])]))}Fe(()=>{t.isUploading.value===!0&&t.abort(),t.files.value.length!==0&&ze()});const ae={};for(const d in t)xt(t[d])===!0?St(ae,d,()=>t[d].value):ae[d]=t[d];return Object.assign(ae,{upload:Be,reset:$,removeUploadedFiles:I,removeQueuedFiles:X,removeFile:ye,pickFiles:q,addFiles:h}),qt(ae,{canAddFiles:()=>V.value,canUpload:()=>F.value,uploadSizeLabel:()=>S.value,uploadProgressLabel:()=>P.value}),o({...t,upload:Be,reset:$,removeUploadedFiles:I,removeQueuedFiles:X,removeFile:ye,pickFiles:q,addFiles:h,canAddFiles:V,canUpload:F,uploadSizeLabel:S,uploadProgressLabel:P}),()=>{const d=[y("div",{class:x.value},pt()),y("div",{class:"q-uploader__list scroll"},mt()),C("uploader")];t.isBusy.value===!0&&d.push(y("div",{class:"q-uploader__overlay absolute-full flex flex-center"},[y(Te)]));const U={ref:l,class:B.value};return V.value===!0&&Object.assign(U,{onDragover:v,onDragleave:i}),y("div",U,d)}}const ta=()=>!0;function vt(e){const o={};return e.forEach(r=>{o[r]=ta}),o}const aa=vt(dt),na=({name:e,props:o,emits:r,injectPlugin:n})=>te({name:e,props:{...Zt,...o},emits:kt(r)===!0?{...aa,...r}:[...dt,...r],setup(u,{expose:a}){return ea(n,a)}});function G(e){return typeof e=="function"?e:()=>e}const oa="QUploader",la={url:[Function,String],method:{type:[Function,String],default:"POST"},fieldName:{type:[Function,String],default:()=>e=>e.name},headers:[Function,Array],formFields:[Function,Array],withCredentials:[Function,Boolean],sendRaw:[Function,Boolean],batch:[Function,Boolean],factory:Function},ra=["factoryFailed","uploaded","failed","uploading"];function ia({props:e,emit:o,helpers:r}){const n=N([]),u=N([]),a=N(0),s=m(()=>({url:G(e.url),method:G(e.method),headers:G(e.headers),formFields:G(e.formFields),fieldName:G(e.fieldName),withCredentials:G(e.withCredentials),sendRaw:G(e.sendRaw),batch:G(e.batch)})),c=m(()=>a.value>0),_=m(()=>u.value.length!==0);let k;function b(){n.value.forEach(t=>{t.abort()}),u.value.length!==0&&(k=!0)}function w(){const t=r.queuedFiles.value.slice(0);r.queuedFiles.value=[],s.value.batch(t)?l(t):t.forEach(q=>{l([q])})}function l(t){if(a.value++,typeof e.factory!="function"){p(t,{});return}const q=e.factory(t);if(!q)o("factoryFailed",new Error("QUploader: factory() does not return properly"),t),a.value--;else if(typeof q.catch=="function"&&typeof q.then=="function"){u.value.push(q);const h=v=>{r.isAlive()===!0&&(u.value=u.value.filter(i=>i!==q),u.value.length===0&&(k=!1),r.queuedFiles.value=r.queuedFiles.value.concat(t),t.forEach(i=>{r.updateFileStatus(i,"failed")}),o("factoryFailed",v,t),a.value--)};q.then(v=>{k===!0?h(new Error("Aborted")):r.isAlive()===!0&&(u.value=u.value.filter(i=>i!==q),p(t,v))}).catch(h)}else p(t,q||{})}function p(t,q){const h=new FormData,v=new XMLHttpRequest,i=(F,B)=>q[F]!==void 0?G(q[F])(B):s.value[F](B),z=i("url",t);if(!z){console.error("q-uploader: invalid or no URL specified"),a.value--;return}const C=i("formFields",t);C!==void 0&&C.forEach(F=>{h.append(F.name,F.value)});let g=0,f=0,A=0,E=0,P;v.upload.addEventListener("progress",F=>{if(P===!0)return;const B=Math.min(E,F.loaded);r.uploadedSize.value+=B-A,A=B;let x=A-f;for(let $=g;x>0&&$<t.length;$++){const I=t[$];if(x>I.size)x-=I.size,g++,f+=I.size,r.updateFileStatus(I,"uploading",I.size);else{r.updateFileStatus(I,"uploading",x);return}}},!1),v.onreadystatechange=()=>{v.readyState<4||(v.status&&v.status<400?(r.uploadedFiles.value=r.uploadedFiles.value.concat(t),t.forEach(F=>{r.updateFileStatus(F,"uploaded")}),o("uploaded",{files:t,xhr:v})):(P=!0,r.uploadedSize.value-=A,r.queuedFiles.value=r.queuedFiles.value.concat(t),t.forEach(F=>{r.updateFileStatus(F,"failed")}),o("failed",{files:t,xhr:v})),a.value--,n.value=n.value.filter(F=>F!==v))},v.open(i("method",t),z),i("withCredentials",t)===!0&&(v.withCredentials=!0);const S=i("headers",t);S!==void 0&&S.forEach(F=>{v.setRequestHeader(F.name,F.value)});const V=i("sendRaw",t);t.forEach(F=>{r.updateFileStatus(F,"uploading",0),V!==!0&&h.append(i("fieldName",F),F,F.name),F.xhr=v,F.__abort=()=>{v.abort()},E+=F.size}),o("uploading",{files:t,xhr:v}),n.value.push(v),V===!0?v.send(new Blob(t)):v.send(h)}return{isUploading:c,isBusy:_,abort:b,upload:w}}const ua={name:oa,props:la,emits:ra,injectPlugin:ia},sa=na(ua);function Ae(){const{emit:e,proxy:o}=Z(),r=N(null);function n(){r.value.show()}function u(){r.value.hide()}function a(c){e("ok",c),u()}function s(){e("hide")}return Object.assign(o,{show:n,hide:u}),{dialogRef:r,onDialogHide:s,onDialogOK:a,onDialogCancel:u}}const ft=["ok","hide"];Ae.emits=ft;Ae.emitsObject=vt(ft);function ca(e){const o=K(e);if(o&&typeof o=="object"&&"role"in o){const r=o.role;return r!=null?K(r):null}return o}function De(e){const o=m(()=>{const s=ca(e);if(s==null)return;const c=Number(s);if(Object.values(Q).includes(c))return c}),r=m(()=>o.value===Q.ADMIN),n=m(()=>o.value===Q.MANAGER||o.value===Q.ADMIN),u=m(()=>{const s=o.value;return s===Q.USER||s===Q.MANAGER||s===Q.ADMIN});return{permission:o,isAdmin:r,isManager:n,isUser:u,hasPermission:s=>m(()=>{const c=o.value;if(c==null)return!1;switch(Number(s)){case Q.ADMIN:return c===Q.ADMIN;case Q.MANAGER:return c===Q.MANAGER||c===Q.ADMIN;case Q.USER:return c===Q.USER||c===Q.MANAGER||c===Q.ADMIN;default:return!1}})}}function da(e){const o=[.06,6,50];return typeof e=="string"&&e.length&&e.split(":").forEach((r,n)=>{const u=parseFloat(r);u&&(o[n]=u)}),o}const va=wt({name:"touch-swipe",beforeMount(e,{value:o,arg:r,modifiers:n}){if(n.mouse!==!0&&oe.has.touch!==!0)return;const u=n.mouseCapture===!0?"Capture":"",a={handler:o,sensitivity:da(r),direction:Oe(n),noop:Pt,mouseStart(s){je(s,a)&&$t(s)&&(ve(a,"temp",[[document,"mousemove","move",`notPassive${u}`],[document,"mouseup","end","notPassiveCapture"]]),a.start(s,!0))},touchStart(s){if(je(s,a)){const c=s.target;ve(a,"temp",[[c,"touchmove","move","notPassiveCapture"],[c,"touchcancel","end","notPassiveCapture"],[c,"touchend","end","notPassiveCapture"]]),a.start(s)}},start(s,c){oe.is.firefox===!0&&xe(e,!0);const _=Ve(s);a.event={x:_.left,y:_.top,time:Date.now(),mouse:c===!0,dir:!1}},move(s){if(a.event===void 0)return;if(a.event.dir!==!1){se(s);return}const c=Date.now()-a.event.time;if(c===0)return;const _=Ve(s),k=_.left-a.event.x,b=Math.abs(k),w=_.top-a.event.y,l=Math.abs(w);if(a.event.mouse!==!0){if(b<a.sensitivity[1]&&l<a.sensitivity[1]){a.end(s);return}}else if(window.getSelection().toString()!==""){a.end(s);return}else if(b<a.sensitivity[2]&&l<a.sensitivity[2])return;const p=b/c,t=l/c;a.direction.vertical===!0&&b<l&&b<100&&t>a.sensitivity[0]&&(a.event.dir=w<0?"up":"down"),a.direction.horizontal===!0&&b>l&&l<100&&p>a.sensitivity[0]&&(a.event.dir=k<0?"left":"right"),a.direction.up===!0&&b<l&&w<0&&b<100&&t>a.sensitivity[0]&&(a.event.dir="up"),a.direction.down===!0&&b<l&&w>0&&b<100&&t>a.sensitivity[0]&&(a.event.dir="down"),a.direction.left===!0&&b>l&&k<0&&l<100&&p>a.sensitivity[0]&&(a.event.dir="left"),a.direction.right===!0&&b>l&&k>0&&l<100&&p>a.sensitivity[0]&&(a.event.dir="right"),a.event.dir!==!1?(se(s),a.event.mouse===!0&&(document.body.classList.add("no-pointer-events--children"),document.body.classList.add("non-selectable"),Ot(),a.styleCleanup=q=>{a.styleCleanup=void 0,document.body.classList.remove("non-selectable");const h=()=>{document.body.classList.remove("no-pointer-events--children")};q===!0?setTimeout(h,50):h()}),a.handler({evt:s,touch:a.event.mouse!==!0,mouse:a.event.mouse,direction:a.event.dir,duration:c,distance:{x:b,y:l}})):a.end(s)},end(s){a.event!==void 0&&(be(a,"temp"),oe.is.firefox===!0&&xe(e,!1),a.styleCleanup?.(!0),s!==void 0&&a.event.dir!==!1&&se(s),a.event=void 0)}};if(e.__qtouchswipe=a,n.mouse===!0){const s=n.mouseCapture===!0||n.mousecapture===!0?"Capture":"";ve(a,"main",[[e,"mousedown","mouseStart",`passive${s}`]])}oe.has.touch===!0&&ve(a,"main",[[e,"touchstart","touchStart",`passive${n.capture===!0?"Capture":""}`],[e,"touchmove","noop","notPassiveCapture"]])},updated(e,o){const r=e.__qtouchswipe;r!==void 0&&(o.oldValue!==o.value&&(typeof o.value!="function"&&r.end(),r.handler=o.value),r.direction=Oe(o.modifiers))},beforeUnmount(e){const o=e.__qtouchswipe;o!==void 0&&(be(o,"main"),be(o,"temp"),oe.is.firefox===!0&&xe(e,!1),o.styleCleanup?.(),delete e.__qtouchswipe)}});function fa(){let e=Object.create(null);return{getCache:(o,r)=>e[o]===void 0?e[o]=typeof r=="function"?r():r:e[o],setCache(o,r){e[o]=r},hasCache(o){return Object.hasOwnProperty.call(e,o)},clearCache(o){o!==void 0?delete e[o]:e=Object.create(null)}}}const pa={name:{required:!0},disable:Boolean},Ye={setup(e,{slots:o}){return()=>y("div",{class:"q-panel scroll",role:"tabpanel"},de(o.default))}},ma={modelValue:{required:!0},animated:Boolean,infinite:Boolean,swipeable:Boolean,vertical:Boolean,transitionPrev:String,transitionNext:String,transitionDuration:{type:[String,Number],default:300},keepAlive:Boolean,keepAliveInclude:[String,Array,RegExp],keepAliveExclude:[String,Array,RegExp],keepAliveMax:Number},ga=["update:modelValue","beforeTransition","transition"];function ha(){const{props:e,emit:o,proxy:r}=Z(),{getCache:n}=fa(),{registerTimeout:u}=At();let a,s;const c=N(null),_={value:null};function k(x){const $=e.vertical===!0?"up":"left";E((r.$q.lang.rtl===!0?-1:1)*(x.direction===$?1:-1))}const b=m(()=>[[va,k,void 0,{horizontal:e.vertical!==!0,vertical:e.vertical,mouse:!0}]]),w=m(()=>e.transitionPrev||`slide-${e.vertical===!0?"down":"right"}`),l=m(()=>e.transitionNext||`slide-${e.vertical===!0?"up":"left"}`),p=m(()=>`--q-transition-duration: ${e.transitionDuration}ms`),t=m(()=>typeof e.modelValue=="string"||typeof e.modelValue=="number"?e.modelValue:String(e.modelValue)),q=m(()=>({include:e.keepAliveInclude,exclude:e.keepAliveExclude,max:e.keepAliveMax})),h=m(()=>e.keepAliveInclude!==void 0||e.keepAliveExclude!==void 0);ee(()=>e.modelValue,(x,$)=>{const I=C(x)===!0?g(x):-1;s!==!0&&A(I===-1?0:I<g($)?-1:1),_.value!==I&&(_.value=I,o("beforeTransition",x,$),u(()=>{o("transition",x,$)},e.transitionDuration))});function v(){E(1)}function i(){E(-1)}function z(x){o("update:modelValue",x)}function C(x){return x!=null&&x!==""}function g(x){return a.findIndex($=>$.props.name===x&&$.props.disable!==""&&$.props.disable!==!0)}function f(){return a.filter(x=>x.props.disable!==""&&x.props.disable!==!0)}function A(x){const $=x!==0&&e.animated===!0&&_.value!==-1?"q-transition--"+(x===-1?w.value:l.value):null;c.value!==$&&(c.value=$)}function E(x,$=_.value){let I=$+x;for(;I!==-1&&I<a.length;){const X=a[I];if(X!==void 0&&X.props.disable!==""&&X.props.disable!==!0){A(x),s=!0,o("update:modelValue",X.props.name),setTimeout(()=>{s=!1});return}I+=x}e.infinite===!0&&a.length!==0&&$!==-1&&$!==a.length&&E(x,x===-1?a.length:-1)}function P(){const x=g(e.modelValue);return _.value!==x&&(_.value=x),!0}function S(){const x=C(e.modelValue)===!0&&P()&&a[_.value];return e.keepAlive===!0?[y(zt,q.value,[y(h.value===!0?n(t.value,()=>({...Ye,name:t.value})):Ye,{key:t.value,style:p.value},()=>x)])]:[y("div",{class:"q-panel scroll",style:p.value,key:t.value,role:"tabpanel"},[x])]}function V(){if(a.length!==0)return e.animated===!0?[y(Dt,{name:c.value},S)]:S()}function F(x){return a=Ut(de(x.default,[])).filter($=>$.props!==null&&$.props.slot===void 0&&C($.props.name)===!0),a.length}function B(){return a}return Object.assign(r,{next:v,previous:i,goTo:z}),{panelIndex:_,panelDirectives:b,updatePanelsList:F,updatePanelIndex:P,getPanelContent:V,getEnabledPanels:f,getPanels:B,isValidPanelName:C,keepAliveProps:q,needsUniqueKeepAliveWrapper:h,goToPanelByOffset:E,goToPanel:z,nextPanel:v,previousPanel:i}}const _a=te({name:"QCarouselSlide",props:{...pa,imgSrc:String},setup(e,{slots:o}){const r=m(()=>e.imgSrc?{backgroundImage:`url("${e.imgSrc}")`}:{});return()=>y("div",{class:"q-carousel__slide",style:r.value},de(o.default))}}),ya=te({name:"QCarouselControl",props:{position:{type:String,default:"bottom-right",validator:e=>["top-right","top-left","bottom-right","bottom-left","top","right","bottom","left"].includes(e)},offset:{type:Array,default:()=>[18,18],validator:e=>e.length===2}},setup(e,{slots:o}){const r=m(()=>`q-carousel__control absolute absolute-${e.position}`),n=m(()=>({margin:`${e.offset[1]}px ${e.offset[0]}px`}));return()=>y("div",{class:r.value,style:n.value},de(o.default))}});let ue=0;const ba={fullscreen:Boolean,noRouteFullscreenExit:Boolean},xa=["update:fullscreen","fullscreen"];function Sa(){const e=Z(),{props:o,emit:r,proxy:n}=e;let u,a,s;const c=N(!1);It(e)===!0&&ee(()=>n.$route.fullPath,()=>{o.noRouteFullscreenExit!==!0&&b()}),ee(()=>o.fullscreen,w=>{c.value!==w&&_()}),ee(c,w=>{r("update:fullscreen",w),r("fullscreen",w)});function _(){c.value===!0?b():k()}function k(){c.value!==!0&&(c.value=!0,s=n.$el.parentNode,s.replaceChild(a,n.$el),document.body.appendChild(n.$el),ue++,ue===1&&document.body.classList.add("q-body--fullscreen-mixin"),u={handler:b},Me.add(u))}function b(){c.value===!0&&(u!==void 0&&(Me.remove(u),u=void 0),s.replaceChild(n.$el,a),c.value=!1,ue=Math.max(0,ue-1),ue===0&&(document.body.classList.remove("q-body--fullscreen-mixin"),n.$el.scrollIntoView!==void 0&&setTimeout(()=>{n.$el.scrollIntoView()})))}return Nt(()=>{a=document.createElement("span")}),he(()=>{o.fullscreen===!0&&k()}),Fe(b),Object.assign(n,{toggleFullscreen:_,setFullscreen:k,exitFullscreen:b}),{inFullscreen:c,toggleFullscreen:_}}const qa=["top","right","bottom","left"],Ca=["regular","flat","outline","push","unelevated"],Fa=te({name:"QCarousel",props:{...et,...ma,...ba,transitionPrev:{type:String,default:"fade"},transitionNext:{type:String,default:"fade"},height:String,padding:Boolean,controlColor:String,controlTextColor:String,controlType:{type:String,validator:e=>Ca.includes(e),default:"flat"},autoplay:[Number,Boolean],arrows:Boolean,prevIcon:String,nextIcon:String,navigation:Boolean,navigationPosition:{type:String,validator:e=>qa.includes(e)},navigationIcon:String,navigationActiveIcon:String,thumbnails:Boolean},emits:[...xa,...ga],setup(e,{slots:o}){const{proxy:{$q:r}}=Z(),n=tt(e,r);let u=null,a;const{updatePanelsList:s,getPanelContent:c,panelDirectives:_,goToPanel:k,previousPanel:b,nextPanel:w,getEnabledPanels:l,panelIndex:p}=ha(),{inFullscreen:t}=Sa(),q=m(()=>t.value!==!0&&e.height!==void 0?{height:e.height}:{}),h=m(()=>e.vertical===!0?"vertical":"horizontal"),v=m(()=>e.navigationPosition||(e.vertical===!0?"right":"bottom")),i=m(()=>`q-carousel q-panel-parent q-carousel--with${e.padding===!0?"":"out"}-padding`+(t.value===!0?" fullscreen":"")+(n.value===!0?" q-carousel--dark q-dark":"")+(e.arrows===!0?` q-carousel--arrows-${h.value}`:"")+(e.navigation===!0?` q-carousel--navigation-${v.value}`:"")),z=m(()=>{const S=[e.prevIcon||r.iconSet.carousel[e.vertical===!0?"up":"left"],e.nextIcon||r.iconSet.carousel[e.vertical===!0?"down":"right"]];return e.vertical===!1&&r.lang.rtl===!0?S.reverse():S}),C=m(()=>e.navigationIcon||r.iconSet.carousel.navigationIcon),g=m(()=>e.navigationActiveIcon||C.value),f=m(()=>({color:e.controlColor,textColor:e.controlTextColor,round:!0,[e.controlType]:!0,dense:!0}));ee(()=>e.modelValue,()=>{e.autoplay&&A()}),ee(()=>e.autoplay,S=>{S?A():u!==null&&(clearTimeout(u),u=null)});function A(){const S=Bt(e.autoplay)===!0?Math.abs(e.autoplay):5e3;u!==null&&clearTimeout(u),u=setTimeout(()=>{u=null,S>=0?w():b()},S)}he(()=>{e.autoplay&&A()}),Fe(()=>{u!==null&&clearTimeout(u)});function E(S,V){return y("div",{class:`q-carousel__control q-carousel__navigation no-wrap absolute flex q-carousel__navigation--${S} q-carousel__navigation--${v.value}`+(e.controlColor!==void 0?` text-${e.controlColor}`:"")},[y("div",{class:"q-carousel__navigation-inner flex flex-center no-wrap"},l().map(V))])}function P(){const S=[];if(e.navigation===!0){const V=o["navigation-icon"]!==void 0?o["navigation-icon"]:B=>y(H,{key:"nav"+B.name,class:`q-carousel__navigation-icon q-carousel__navigation-icon--${B.active===!0?"":"in"}active`,...B.btnProps,onClick:B.onClick}),F=a-1;S.push(E("buttons",(B,x)=>{const $=B.props.name,I=p.value===x;return V({index:x,maxIndex:F,name:$,active:I,btnProps:{icon:I===!0?g.value:C.value,size:"sm",...f.value},onClick:()=>{k($)}})}))}else if(e.thumbnails===!0){const V=e.controlColor!==void 0?` text-${e.controlColor}`:"";S.push(E("thumbnails",F=>{const B=F.props;return y("img",{key:"tmb#"+B.name,class:`q-carousel__thumbnail q-carousel__thumbnail--${B.name===e.modelValue?"":"in"}active`+V,src:B.imgSrc||B["img-src"],onClick:()=>{k(B.name)}})}))}return e.arrows===!0&&p.value>=0&&((e.infinite===!0||p.value>0)&&S.push(y("div",{key:"prev",class:`q-carousel__control q-carousel__arrow q-carousel__prev-arrow q-carousel__prev-arrow--${h.value} absolute flex flex-center`},[y(H,{icon:z.value[0],...f.value,onClick:b})])),(e.infinite===!0||p.value<a-1)&&S.push(y("div",{key:"next",class:`q-carousel__control q-carousel__arrow q-carousel__next-arrow q-carousel__next-arrow--${h.value} absolute flex flex-center`},[y(H,{icon:z.value[1],...f.value,onClick:w})]))),Rt(o.control,S)}return()=>(a=s(o),y("div",{class:i.value,style:q.value},[Et("div",{class:"q-carousel__slides-container"},c(),"sl-cont",e.swipeable,()=>_.value)].concat(P())))}}),ka=_e({__name:"ProductImgCarusel",props:{images:{}},emits:["refresh-data"],setup(e,{emit:o}){const r=e,n=o,u=Pe(),a=we(),s=ke(),{isManager:c}=De(m(()=>s.user?.role)),_=N(0),k=N(!1);function b(){u.dialog({title:"Удаление картинки",message:"Вы уверенны что хотите удалить картинку?",cancel:!0,persistent:!0}).onOk(()=>{w()})}async function w(){try{const l=r.images[_.value];await a.deleteFile(l.id),n("refresh-data")}catch(l){console.error(l)}}return(l,p)=>(T(),j(Fa,{swipeable:"",animated:"",arrows:"",modelValue:_.value,"onUpdate:modelValue":p[2]||(p[2]=t=>_.value=t),fullscreen:k.value,"onUpdate:fullscreen":p[3]||(p[3]=t=>k.value=t),infinite:"",height:K(c)?"200px":"250px",class:"q-mb-sm"},{control:R(()=>[D(ya,{position:"bottom-right",offset:[18,18]},{default:R(()=>[K(c)?le("",!0):(T(),j(H,{key:0,push:"",round:"",dense:"",color:"white","text-color":"primary",icon:k.value?"fullscreen_exit":"fullscreen",onClick:p[0]||(p[0]=t=>k.value=!k.value)},null,8,["icon"])),K(c)?(T(),j(H,{key:1,round:"",dense:"","text-color":"red",icon:"delete",onClick:p[1]||(p[1]=t=>b())})):le("",!0)]),_:1})]),default:R(()=>[(T(!0),ce(ot,null,nt(l.images,(t,q)=>(T(),j(_a,{key:q,name:q,"img-src":t.file_path,class:"card-image"},null,8,["name","img-src"]))),128))]),_:1},8,["modelValue","fullscreen","height"]))}}),Ge=$e(ka,[["__scopeId","data-v-11af1822"]]),wa={class:"text-h6 q-mb-md"},Pa={class:"text-center upload-title"},$a={key:1},Aa={class:"text-h6 text-center q-mt-sm"},Da=_e({__name:"AddProductModal",props:{productData:{}},emits:["refresh-data","add-product"],setup(e,{emit:o}){const r=e,n=o,u=Pe(),a=we(),s=Lt(),{dialogRef:c}=Ae(),_=ke(),{isManager:k}=De(m(()=>_.user?.role)),b=it(),w=N(!1),l=N({id:null,name:"",price:null,category_id:null,unit_id:null,qty:null,description:"",images:"",origin_country:""}),p=new FormData;he(()=>{r.productData&&(l.value=r.productData)});async function t(){try{let C=null;l.value?.id?C=a.updateProduct(l.value):(h(),C=await a.createProduct(p)),C&&(l.value.id=C.id,u.notify({message:"Успешно сохранено",color:"primary"}),n("refresh-data"))}catch(C){console.error(C)}}function q(){n("add-product",l.value)}function h(){l?.value?.id&&p.append("id",l.value.id.toString()),l.value?.name&&p.append("name",l.value.name),l.value?.price&&p.append("price",l.value.price.toString()),l.value?.category_id&&p.append("category_id",l.value.category_id.toString()),l.value?.unit_id&&p.append("unit_id",l.value.unit_id.toString()),l.value?.qty&&p.append("qty",l.value.qty.toString()),l.value?.description&&p.append("description",l.value.description),l.value?.origin_country&&p.append("origin_country",l.value.origin_country)}function v(C){const g=new FileReader;g.readAsDataURL(C[0]),g.onload=()=>{},p.append("images",C[0]),l.value?.id&&i(C[0])}async function i(C){const g=new FormData;g.append("file",C);try{await a.uploadFile(l.value.id,g)&&(z(),u.notify({message:"Картинка успешно добавлена",color:"primary"}))}catch(f){console.error(f)}}async function z(){try{const C=await a.fetchProductsById(l.value.id);l.value=C}catch(C){console.error(C)}}return(C,g)=>(T(),j(Tt,{ref_key:"dialogRef",ref:c,modelValue:w.value,"onUpdate:modelValue":g[10]||(g[10]=f=>w.value=f),persistent:""},{default:R(()=>[D(lt,{class:"add-product"},{default:R(()=>[K(k)?(T(),j(We,{key:0,greedy:""},{default:R(()=>[D(ge,null,{default:R(()=>[M("div",wa,W(l.value.id?"Редактирование товара":"Добавление товара"),1),D(sa,{ref:"uploaderRef",color:"primary",flat:"",onAdded:v},{header:R(()=>[...g[11]||(g[11]=[])]),list:R(()=>[D(Ht),M("div",Pa,[D(at,{class:"q-mr-sm",name:"note_add",size:"24px"}),g[12]||(g[12]=M("span",null,"Загрузить картинку",-1))])]),_:1},512),M("div",null,[l.value?.images?.length?(T(),j(Ge,{key:0,onRefreshData:g[0]||(g[0]=f=>z()),images:l.value.images},null,8,["images"])):le("",!0)]),D(ie,{modelValue:l.value.name,"onUpdate:modelValue":g[1]||(g[1]=f=>l.value.name=f),class:"q-mb-xs",outlined:"",label:"Наименование товара"},null,8,["modelValue"]),D(ie,{modelValue:l.value.price,"onUpdate:modelValue":g[2]||(g[2]=f=>l.value.price=f),class:"q-mb-xs",outlined:"",label:"Стоимость товара"},null,8,["modelValue"]),D(ie,{modelValue:l.value.qty,"onUpdate:modelValue":g[3]||(g[3]=f=>l.value.qty=f),class:"q-mb-xs",outlined:"",label:"Количество"},null,8,["modelValue"]),D(ie,{modelValue:l.value.origin_country,"onUpdate:modelValue":g[4]||(g[4]=f=>l.value.origin_country=f),class:"q-mb-xs",outlined:"",label:"Страна происхождения"},null,8,["modelValue"]),D(Ke,{modelValue:l.value.category_id,"onUpdate:modelValue":g[5]||(g[5]=f=>l.value.category_id=f),options:K(s).categories,class:"q-mb-xs",outlined:"",label:"Тип тары","emit-value":"","map-options":"","option-label":"name","option-value":"id"},null,8,["modelValue","options"]),D(Ke,{modelValue:l.value.unit_id,"onUpdate:modelValue":g[6]||(g[6]=f=>l.value.unit_id=f),options:K(b).units,outlined:"",label:"Вес","emit-value":"","map-options":"","option-label":"name","option-value":"id"},null,8,["modelValue","options"]),D(ie,{class:"q-mt-sm",modelValue:l.value.description,"onUpdate:modelValue":g[7]||(g[7]=f=>l.value.description=f),filled:"",type:"textarea",rows:"2",label:"Описание"},null,8,["modelValue"])]),_:1}),D(qe,{align:"right"},{default:R(()=>[fe(D(H,{color:"red",label:"Отмена"},null,512),[[pe]]),fe(D(H,{color:"primary",label:"Подтвердить",onClick:g[8]||(g[8]=f=>t())},null,512),[[pe]])]),_:1})]),_:1})):(T(),j(We,{key:1},{default:R(()=>[D(ge,null,{default:R(()=>[M("div",null,[l.value?.images?.length?(T(),j(Ge,{key:0,images:l.value.images},null,8,["images"])):(T(),ce("div",$a,[D(rt,{class:"q-mt-sm",src:K(ut)("/card-shop.jpg")},null,8,["src"])]))]),M("div",Aa,W(l.value.name),1),M("div",null,"Стоимость товара: "+W(l.value.price),1),M("div",null,"Количество: "+W(l.value.qty),1),g[13]||(g[13]=M("div",null,"Вес: 11 ",-1)),M("div",null,"Страна происхождения: "+W(l.value.origin_country),1),M("div",null,"Описание: "+W(l.value.description),1)]),_:1}),D(qe,{align:"right"},{default:R(()=>[fe(D(H,{color:"red",label:"Отмена"},null,512),[[pe]]),fe(D(H,{color:"primary",label:"Добавить в карзину",onClick:g[9]||(g[9]=f=>q())},null,512),[[pe]])]),_:1})]),_:1}))]),_:1})]),_:1},8,["modelValue"]))}}),Ua=$e(Da,[["__scopeId","data-v-9df7d2ba"]]),za={class:"product-card row q-col-gutter-xs"},Ia=["onClick"],Na={class:"text-center card-title"},Ba={class:"text-center"},Ea={class:"text-bold"},Ra={key:0,class:"text-grey old-price"},Ta={class:"text-grey"},Va=_e({__name:"ProductList",setup(e){const o=Pe(),r=it(),n=we(),u=Vt(),a=ke(),{isManager:s}=De(m(()=>a.user?.role)),c=N(!1),_=N(!1),k=N();he(async()=>{try{await r.fetchUnits(),o.loading.show()}catch(h){console.error(h)}finally{o.loading.hide()}});function b(){n.pagination.offset=0,w()}async function w(){try{o.loading.show();const h={offset:n.pagination.offset,limit:n.pagination.limit},v=await n.fetchProducts(h);v&&(n.pagination.total=v.total,n.pagination.has_more=v.has_more,n?.products?.length?n.products.push(v.items):n.products=v.items)}catch(h){console.error(h)}finally{o.loading.hide()}}function l(h){try{if(o.loading.show(),u.basketData?.length){const v=u.basketData.find(i=>i.id===h.id);v?p(v,h):u.basketData.push(structuredClone(Qe(h)))}else u.basketData.push(structuredClone(Qe(h)))}catch(v){console.error(v)}finally{o.notify({message:`Товар ${h.name} добавлен в корзину`,color:"primary"}),o.loading.hide()}}function p(h,v){h.price&&(h.price+=v.price),h.weight&&(h.weight+=v.weight),h.oldPrice&&(h.oldPrice+=v.oldPrice)}const t=async(h,v)=>{if(!n.pagination.has_more){c.value=!0,v(!0);return}await w(),n.pagination.offset+=n.pagination.limit,v()};function q(h){k.value=h,_.value=!_.value}return(h,v)=>(T(),j(Mt,{onLoad:t,offset:250},{default:R(()=>[K(s)?(T(),j(H,{key:0,onClick:v[0]||(v[0]=i=>q()),class:"full-width q-mb-sm",color:"secondary",label:"Добавление товара"})):le("",!0),M("div",za,[(T(!0),ce(ot,null,nt(K(n).products,(i,z)=>(T(),ce("div",{class:"col-6",key:z},[D(lt,{class:"my-card radius-16 full-height",flat:"",bordered:""},{default:R(()=>[D(ge,{class:"q-pa-sm full-height"},{default:R(()=>[M("div",{onClick:C=>q(i)},[D(rt,{class:"cursor-pointer radius-8",src:i?.primary_image?i.primary_image:K(ut)("/card-shop.jpg")},null,8,["src"])],8,Ia),D(ge,{class:"q-pa-sm"},{default:R(()=>[M("div",Na,W(i.name),1),M("div",Ba,[M("span",Ea,W(i.price),1),v[3]||(v[3]=Le(" ₽ ",-1)),i?.oldPrice?(T(),ce("span",Ra,W(i.old_price)+" ₽",1)):le("",!0),Le(" / "+W(i.unit_symbol)+" ",1),M("div",Ta,W(i.origin_country),1)])]),_:2},1024),D(qe,{class:"justify-center"},{default:R(()=>[D(H,{dense:"","no-caps":"",class:"full-width",color:"secondary",icon:"add_shopping_cart",label:"В корзину",onClick:C=>l(i)},null,8,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]))),128))]),_.value?(T(),j(Ua,{key:1,modelValue:_.value,"onUpdate:modelValue":v[1]||(v[1]=i=>_.value=i),productData:k.value,onRefreshData:v[2]||(v[2]=i=>b()),onAddProduct:l},null,8,["modelValue","productData"])):le("",!0)]),_:1}))}}),Ma=$e(Va,[["__scopeId","data-v-dc3a1724"]]),Za=_e({__name:"DashboardPage",setup(e){return(o,r)=>(T(),j(jt,{class:"q-mx-xs"},{default:R(()=>[D(Ma,{class:"q-mb-lg"})]),_:1}))}});export{Za as default};
