import{n as g,aO as b,g as M,w as T,aP as h,o as P,q as H,aQ as x,at as B,an as q}from"./index-B8bsirLt.js";function D(o,u,r){let t;function a(){t!==void 0&&(b.remove(t),t=void 0)}return g(()=>{o.value===!0&&a()}),{removeFromHistory:a,addToHistory(){t={condition:()=>r.value===!0,handler:u},b.add(t)}}}const E={modelValue:{type:Boolean,default:null},"onUpdate:modelValue":[Function,Array]},F=["beforeShow","show","beforeHide","hide"];function I({showing:o,canShow:u,hideOnRouteChange:r,handleShow:t,handleHide:a,processOnMount:S}){const f=M(),{props:l,emit:n,proxy:c}=f;let i;function U(e){o.value===!0?d(e):m(e)}function m(e){if(l.disable===!0||e?.qAnchorHandled===!0||u!==void 0&&u(e)!==!0)return;const s=l["onUpdate:modelValue"]!==void 0;s===!0&&(n("update:modelValue",!0),i=e,H(()=>{i===e&&(i=void 0)})),(l.modelValue===null||s===!1)&&p(e)}function p(e){o.value!==!0&&(o.value=!0,n("beforeShow",e),t!==void 0?t(e):n("show",e))}function d(e){if(l.disable===!0)return;const s=l["onUpdate:modelValue"]!==void 0;s===!0&&(n("update:modelValue",!1),i=e,H(()=>{i===e&&(i=void 0)})),(l.modelValue===null||s===!1)&&v(e)}function v(e){o.value!==!1&&(o.value=!1,n("beforeHide",e),a!==void 0?a(e):n("hide",e))}function y(e){l.disable===!0&&e===!0?l["onUpdate:modelValue"]!==void 0&&n("update:modelValue",!1):e===!0!==o.value&&(e===!0?p:v)(i)}T(()=>l.modelValue,y),r!==void 0&&h(f)===!0&&T(()=>c.$route.fullPath,()=>{r.value===!0&&o.value===!0&&d()}),S===!0&&P(()=>{y(l.modelValue)});const V={show:m,hide:d,toggle:U};return Object.assign(c,V),V}function j(){let o;return{preventBodyScroll(u){u!==o&&(o!==void 0||u===!0)&&(o=u,x(u))}}}function k(){let o=null;const u=M();function r(){o!==null&&(clearTimeout(o),o=null)}return B(r),g(r),{removeTimeout:r,registerTimeout(t,a){r(),q(u)===!1&&(o=setTimeout(()=>{o=null,t()},a))}}}export{E as a,k as b,I as c,D as d,j as e,F as u};
