import{d as N,r as m,a2 as U,a3 as v,a4 as r,f as e,aa as C,Q as s,a9 as t,F as D,ac as F,a8 as p,a5 as f,ae as y,ab as Q,a6 as g,L as V}from"./index-BajYhe5X.js";import{u as P,Q as A,b as E,a as b}from"./use-quasar-DwvzMf_o.js";import{a as T,Q as j}from"./QSeparator-Bjbg7oo1.js";import{Q as k}from"./QCard-DGDbAFqO.js";import{Q as w}from"./QCardSection-CGotBi1d.js";import{Q as _}from"./QInput-qWGwLL5E.js";import{Q as z}from"./QSelect-BPcDzbwD.js";import{a as G,C as q,Q as H}from"./ClosePopup-jLFc0xrf.js";import{a as x}from"./useUtils-BPm5G4xQ.js";import{u as J}from"./categoriesStore-DXWA6JSw.js";import"./use-timeout-B-TQLt4P.js";const oe=N({__name:"CategoriesPage",setup(K){const d=P(),i=J(),u=m(!1),S=m({name:"",parent_id:null,description:""}),o=m({name:"",parent_id:null,description:""});function c(n){n?.id?o.value=n:o.value=S.value,u.value=!u.value}function B(n){console.log(n)}async function I(){try{if(d.loading.show(),!o.value)return;await(o.value.id?i.updateCategorie:i.createCategories)(o.value)&&(await i.fetchCategories(),d.notify({message:"Категория успешно добавлена",color:"primary"}))}catch(n){console.error(n)}finally{d.loading.hide()}}return(n,a)=>{const $=U("q-item-action");return r(),v("div",null,[e(s,{onClick:a[0]||(a[0]=l=>c()),class:"full-width q-mb-sm",color:"secondary",label:"Добавление категории"}),a[7]||(a[7]=C("h6",{class:"text-center q-mt-md q-mb-md"},"Категории",-1)),e(k,{class:"my-card q-ma-sm",flat:"",bordered:""},{default:t(()=>[(r(!0),v(D,null,F(p(i).categories,(l,L)=>(r(),f(T,{key:L},{default:t(()=>[e(A,null,{default:t(()=>[e(E,null,{default:t(()=>[e(b,null,{default:t(()=>[y(Q(l.name),1)]),_:2},1024),e(b,{caption:""},{default:t(()=>[y(Q(l.description),1)]),_:2},1024)]),_:2},1024),e($,null,{default:t(()=>[p(x)?(r(),f(s,{key:0,flat:"",round:"",color:"red",icon:"delete",onClick:M=>B(l)},null,8,["onClick"])):g("",!0),p(x)?(r(),f(s,{key:1,flat:"",round:"",color:"secondary",icon:"mode_edit",onClick:M=>c(l)},null,8,["onClick"])):g("",!0)]),_:2},1024)]),_:2},1024),e(j)]),_:2},1024))),128))]),_:1}),e(H,{modelValue:u.value,"onUpdate:modelValue":a[5]||(a[5]=l=>u.value=l)},{default:t(()=>[e(k,{style:{"min-width":"90svw"}},{default:t(()=>[e(w,null,{default:t(()=>[...a[6]||(a[6]=[C("div",{class:"text-h6"},"Добавить категорию",-1)])]),_:1}),e(w,{class:"q-pt-none"},{default:t(()=>[e(_,{modelValue:o.value.name,"onUpdate:modelValue":a[1]||(a[1]=l=>o.value.name=l),label:"Наиминование категории"},null,8,["modelValue"]),e(z,{modelValue:o.value.parent_id,"onUpdate:modelValue":a[2]||(a[2]=l=>o.value.parent_id=l),options:["1","2"],label:"Тип тары","emit-value":"","map-options":""},null,8,["modelValue"]),e(_,{class:"q-mt-sm",modelValue:o.value.description,"onUpdate:modelValue":a[3]||(a[3]=l=>o.value.description=l),filled:"",type:"textarea",rows:"2",label:"Описание"},null,8,["modelValue"])]),_:1}),e(G,{align:"right"},{default:t(()=>[V(e(s,{flat:"",label:"Отмена",color:"negative"},null,512),[[q]]),V(e(s,{flat:"",label:"Добавить",color:"primary",onClick:a[4]||(a[4]=l=>I())},null,512),[[q]])]),_:1})]),_:1})]),_:1},8,["modelValue"])])}}});export{oe as default};
