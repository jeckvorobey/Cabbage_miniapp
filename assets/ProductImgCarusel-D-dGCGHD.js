import{k as V,c,h as d,l as R,g as U,r as T,aH as W,w as p,aI as O,aJ as X,o as j,p as z,M as Y,O as Z,aK as ee,V as te,av as q,m as ne,d as oe,u as ae,af as S,ae as b,ai as F,aj as B,ad as le,am as re,F as ie,f as se,ag as H}from"./index-DXuJz2ny.js";import{u as ue,b as ce,c as de,d as ve}from"./orderStore-Drx91eGp.js";import{u as me}from"./use-quasar-DlCPfU25.js";import{u as fe}from"./usePermissionVisibility.hook-2PINbQqD.js";import{u as ge}from"./productsStore-BlLep8Fc.js";import{_ as he}from"./_plugin-vue_export-helper-DlAUqK2U.js";const _e=V({name:"QCarouselSlide",props:{...ue,imgSrc:String},setup(e,{slots:o}){const a=c(()=>e.imgSrc?{backgroundImage:`url("${e.imgSrc}")`}:{});return()=>d("div",{class:"q-carousel__slide",style:a.value},R(o.default))}}),ye=V({name:"QCarouselControl",props:{position:{type:String,default:"bottom-right",validator:e=>["top-right","top-left","bottom-right","bottom-left","top","right","bottom","left"].includes(e)},offset:{type:Array,default:()=>[18,18],validator:e=>e.length===2}},setup(e,{slots:o}){const a=c(()=>`q-carousel__control absolute absolute-${e.position}`),l=c(()=>({margin:`${e.offset[1]}px ${e.offset[0]}px`}));return()=>d("div",{class:a.value,style:l.value},R(o.default))}});let x=0;const Ce={fullscreen:Boolean,noRouteFullscreenExit:Boolean},be=["update:fullscreen","fullscreen"];function xe(){const e=U(),{props:o,emit:a,proxy:l}=e;let t,f,_;const r=T(!1);W(e)===!0&&p(()=>l.$route.fullPath,()=>{o.noRouteFullscreenExit!==!0&&v()}),p(()=>o.fullscreen,h=>{r.value!==h&&g()}),p(r,h=>{a("update:fullscreen",h),a("fullscreen",h)});function g(){r.value===!0?v():s()}function s(){r.value!==!0&&(r.value=!0,_=l.$el.parentNode,_.replaceChild(f,l.$el),document.body.appendChild(l.$el),x++,x===1&&document.body.classList.add("q-body--fullscreen-mixin"),t={handler:v},O.add(t))}function v(){r.value===!0&&(t!==void 0&&(O.remove(t),t=void 0),_.replaceChild(l.$el,f),r.value=!1,x=Math.max(0,x-1),x===0&&(document.body.classList.remove("q-body--fullscreen-mixin"),l.$el.scrollIntoView!==void 0&&setTimeout(()=>{l.$el.scrollIntoView()})))}return X(()=>{f=document.createElement("span")}),j(()=>{o.fullscreen===!0&&s()}),z(v),Object.assign(l,{toggleFullscreen:g,setFullscreen:s,exitFullscreen:v}),{inFullscreen:r,toggleFullscreen:g}}const pe=["top","right","bottom","left"],qe=["regular","flat","outline","push","unelevated"],Pe=V({name:"QCarousel",props:{...Y,...de,...Ce,transitionPrev:{type:String,default:"fade"},transitionNext:{type:String,default:"fade"},height:String,padding:Boolean,controlColor:String,controlTextColor:String,controlType:{type:String,validator:e=>qe.includes(e),default:"flat"},autoplay:[Number,Boolean],arrows:Boolean,prevIcon:String,nextIcon:String,navigation:Boolean,navigationPosition:{type:String,validator:e=>pe.includes(e)},navigationIcon:String,navigationActiveIcon:String,thumbnails:Boolean},emits:[...be,...ce],setup(e,{slots:o}){const{proxy:{$q:a}}=U(),l=Z(e,a);let t=null,f;const{updatePanelsList:_,getPanelContent:r,panelDirectives:g,goToPanel:s,previousPanel:v,nextPanel:h,getEnabledPanels:y,panelIndex:i}=ve(),{inFullscreen:m}=xe(),P=c(()=>m.value!==!0&&e.height!==void 0?{height:e.height}:{}),k=c(()=>e.vertical===!0?"vertical":"horizontal"),E=c(()=>e.navigationPosition||(e.vertical===!0?"right":"bottom")),J=c(()=>`q-carousel q-panel-parent q-carousel--with${e.padding===!0?"":"out"}-padding`+(m.value===!0?" fullscreen":"")+(l.value===!0?" q-carousel--dark q-dark":"")+(e.arrows===!0?` q-carousel--arrows-${k.value}`:"")+(e.navigation===!0?` q-carousel--navigation-${E.value}`:"")),N=c(()=>{const n=[e.prevIcon||a.iconSet.carousel[e.vertical===!0?"up":"left"],e.nextIcon||a.iconSet.carousel[e.vertical===!0?"down":"right"]];return e.vertical===!1&&a.lang.rtl===!0?n.reverse():n}),Q=c(()=>e.navigationIcon||a.iconSet.carousel.navigationIcon),K=c(()=>e.navigationActiveIcon||Q.value),$=c(()=>({color:e.controlColor,textColor:e.controlTextColor,round:!0,[e.controlType]:!0,dense:!0}));p(()=>e.modelValue,()=>{e.autoplay&&w()}),p(()=>e.autoplay,n=>{n?w():t!==null&&(clearTimeout(t),t=null)});function w(){const n=ee(e.autoplay)===!0?Math.abs(e.autoplay):5e3;t!==null&&clearTimeout(t),t=setTimeout(()=>{t=null,n>=0?h():v()},n)}j(()=>{e.autoplay&&w()}),z(()=>{t!==null&&clearTimeout(t)});function M(n,C){return d("div",{class:`q-carousel__control q-carousel__navigation no-wrap absolute flex q-carousel__navigation--${n} q-carousel__navigation--${E.value}`+(e.controlColor!==void 0?` text-${e.controlColor}`:"")},[d("div",{class:"q-carousel__navigation-inner flex flex-center no-wrap"},y().map(C))])}function G(){const n=[];if(e.navigation===!0){const C=o["navigation-icon"]!==void 0?o["navigation-icon"]:u=>d(q,{key:"nav"+u.name,class:`q-carousel__navigation-icon q-carousel__navigation-icon--${u.active===!0?"":"in"}active`,...u.btnProps,onClick:u.onClick}),I=f-1;n.push(M("buttons",(u,A)=>{const D=u.props.name,L=i.value===A;return C({index:A,maxIndex:I,name:D,active:L,btnProps:{icon:L===!0?K.value:Q.value,size:"sm",...$.value},onClick:()=>{s(D)}})}))}else if(e.thumbnails===!0){const C=e.controlColor!==void 0?` text-${e.controlColor}`:"";n.push(M("thumbnails",I=>{const u=I.props;return d("img",{key:"tmb#"+u.name,class:`q-carousel__thumbnail q-carousel__thumbnail--${u.name===e.modelValue?"":"in"}active`+C,src:u.imgSrc||u["img-src"],onClick:()=>{s(u.name)}})}))}return e.arrows===!0&&i.value>=0&&((e.infinite===!0||i.value>0)&&n.push(d("div",{key:"prev",class:`q-carousel__control q-carousel__arrow q-carousel__prev-arrow q-carousel__prev-arrow--${k.value} absolute flex flex-center`},[d(q,{icon:N.value[0],...$.value,onClick:v})])),(e.infinite===!0||i.value<f-1)&&n.push(d("div",{key:"next",class:`q-carousel__control q-carousel__arrow q-carousel__next-arrow q-carousel__next-arrow--${k.value} absolute flex flex-center`},[d(q,{icon:N.value[1],...$.value,onClick:h})]))),ne(o.control,n)}return()=>(f=_(o),d("div",{class:J.value,style:P.value},[te("div",{class:"q-carousel__slides-container"},r(),"sl-cont",e.swipeable,()=>g.value)].concat(G())))}}),Se=oe({__name:"ProductImgCarusel",props:{images:{}},emits:["refresh-data"],setup(e,{emit:o}){const a=e,l=o,t=me(),f=ge(),_=ae(),{isManager:r}=fe(c(()=>_.user)),g=T(0),s=T(!1);function v(){t.dialog({title:"Удаление картинки",message:"Вы уверенны что хотите удалить картинку?",cancel:!0,persistent:!0}).onOk(()=>{h()})}async function h(){try{const y=a.images[g.value];await f.deleteFile(y.id),l("refresh-data")}catch(y){console.error(y)}}return(y,i)=>(b(),S(Pe,{swipeable:"",animated:"",arrows:"",modelValue:g.value,"onUpdate:modelValue":i[2]||(i[2]=m=>g.value=m),fullscreen:s.value,"onUpdate:fullscreen":i[3]||(i[3]=m=>s.value=m),infinite:"",height:F(r)?"200px":"250px",class:"q-mb-sm"},{control:B(()=>[se(ye,{position:"bottom-right",offset:[18,18]},{default:B(()=>[F(r)?H("",!0):(b(),S(q,{key:0,push:"",round:"",dense:"",color:"white","text-color":"primary",icon:s.value?"fullscreen_exit":"fullscreen",onClick:i[0]||(i[0]=m=>s.value=!s.value)},null,8,["icon"])),F(r)?(b(),S(q,{key:1,round:"",dense:"","text-color":"red",icon:"delete",onClick:i[1]||(i[1]=m=>v())})):H("",!0)]),_:1})]),default:B(()=>[(b(!0),le(ie,null,re(y.images,(m,P)=>(b(),S(_e,{key:P,name:P,"img-src":m.file_path,class:"card-image"},null,8,["name","img-src"]))),128))]),_:1},8,["modelValue","fullscreen","height"]))}}),Te=he(Se,[["__scopeId","data-v-cba867e9"]]);export{Te as P};
