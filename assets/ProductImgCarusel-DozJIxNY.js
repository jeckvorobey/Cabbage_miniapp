import{k as K,a as Re,x as _e,aI as Pe,aJ as Le,g as H,aK as De,c as m,h as d,aL as Oe,r as A,I as ze,K as Z,C as X,M as $e,O as Be,w as M,p as ce,i as je,aM as Me,aN as Qe,aO as be,aP as Ve,a9 as We,aA as Q,X as Xe,aQ as Ke,A as He,B as le,D as re,q as Ye,E as ee,G as ye,J as Ge,P as Je,W as Ze,aR as et,l as ne,aS as tt,aT as at,aU as xe,aV as nt,o as Ue,aW as ot,V as lt,m as rt,d as it,u as ut,af as te,ae as G,ai as ie,aj as ue,ad as st,am as ct,F as dt,f as vt,ag as Se}from"./index-AFLQayUV.js";import{b as ft,h as Fe}from"./rtl-D3GObVCM.js";import{g as qe,s as Ce}from"./orderStore-DMfv6FUZ.js";import{c as mt}from"./selection-3-Tt7bJE.js";import{u as pt}from"./use-quasar-D5KfIT5q.js";import{u as gt}from"./usePermissionVisibility.hook-aiv0WUc9.js";import{u as ht}from"./productsStore-Cr4xzi-F.js";import{_ as _t}from"./_plugin-vue_export-helper-DlAUqK2U.js";const ra=K({name:"QUploaderAddTrigger",setup(){const e=Re(Pe,_e);return e===_e&&console.error("QUploaderAddTrigger needs to be child of QUploader"),e}}),bt={...Le,min:{type:Number,default:0},max:{type:Number,default:100},color:String,centerColor:String,trackColor:String,fontSize:String,rounded:Boolean,thickness:{type:Number,default:.2,validator:e=>e>=0&&e<=1},angle:{type:Number,default:0},showValue:Boolean,reverse:Boolean,instantFeedback:Boolean},se=50,Te=2*se,Ie=Te*Math.PI,yt=Math.round(Ie*1e3)/1e3,xt=K({name:"QCircularProgress",props:{...bt,value:{type:Number,default:0},animationSpeed:{type:[String,Number],default:600},indeterminate:Boolean},setup(e,{slots:n}){const{proxy:{$q:l}}=H(),o=De(e),i=m(()=>{const v=(l.lang.rtl===!0?-1:1)*e.angle;return{transform:e.reverse!==(l.lang.rtl===!0)?`scale3d(-1, 1, 1) rotate3d(0, 0, 1, ${-90-v}deg)`:`rotate3d(0, 0, 1, ${v-90}deg)`}}),a=m(()=>e.instantFeedback!==!0&&e.indeterminate!==!0?{transition:`stroke-dashoffset ${e.animationSpeed}ms ease 0s, stroke ${e.animationSpeed}ms ease`}:""),s=m(()=>Te/(1-e.thickness/2)),f=m(()=>`${s.value/2} ${s.value/2} ${s.value} ${s.value}`),h=m(()=>ft(e.value,e.min,e.max)),q=m(()=>e.max-e.min),p=m(()=>e.thickness/2*s.value),P=m(()=>{const v=(e.max-h.value)/q.value,t=e.rounded===!0&&h.value<e.max&&v<.25?p.value/2*(1-v/.25):0;return Ie*v+t});function b({thickness:v,offset:t,color:x,cls:z,rounded:S}){return d("circle",{class:"q-circular-progress__"+z+(x!==void 0?` text-${x}`:""),style:a.value,fill:"transparent",stroke:"currentColor","stroke-width":v,"stroke-dasharray":yt,"stroke-dashoffset":t,"stroke-linecap":S,cx:s.value,cy:s.value,r:se})}return()=>{const v=[];e.centerColor!==void 0&&e.centerColor!=="transparent"&&v.push(d("circle",{class:`q-circular-progress__center text-${e.centerColor}`,fill:"currentColor",r:se-p.value/2,cx:s.value,cy:s.value})),e.trackColor!==void 0&&e.trackColor!=="transparent"&&v.push(b({cls:"track",thickness:p.value,offset:0,color:e.trackColor})),v.push(b({cls:"circle",thickness:p.value,offset:P.value,color:e.color,rounded:e.rounded===!0?"round":void 0}));const t=[d("svg",{class:"q-circular-progress__svg",style:i.value,viewBox:f.value,"aria-hidden":"true"},v)];return e.showValue===!0&&t.push(d("div",{class:"q-circular-progress__text absolute-full row flex-center content-center",style:{fontSize:e.fontSize}},n.default!==void 0?n.default():[d("div",h.value)])),d("div",{class:`q-circular-progress q-circular-progress--${e.indeterminate===!0?"in":""}determinate`,style:o.value,role:"progressbar","aria-valuemin":e.min,"aria-valuemax":e.max,"aria-valuenow":e.indeterminate===!0?void 0:h.value},Oe(n.internal,t))}}});function W(e,n,l,o){const i=[];return e.forEach(a=>{o(a)===!0?i.push(a):n.push({failedPropValidation:l,file:a})}),i}function ae(e){e?.dataTransfer&&(e.dataTransfer.dropEffect="copy"),Z(e)}const St={multiple:Boolean,accept:String,capture:String,maxFileSize:[Number,String],maxTotalSize:[Number,String],maxFiles:[Number,String],filter:Function},Ft=["rejected"];function qt({editable:e,dnd:n,getFileInput:l,addFilesToQueue:o}){const{props:i,emit:a,proxy:s}=H(),f=A(null),h=m(()=>i.accept!==void 0?i.accept.split(",").map(u=>(u=u.trim(),u==="*"?"*/":(u.endsWith("/*")&&(u=u.slice(0,u.length-1)),u.toUpperCase()))):null),q=m(()=>parseInt(i.maxFiles,10)),p=m(()=>parseInt(i.maxTotalSize,10));function P(u){if(e.value)if(u!==Object(u)&&(u={target:null}),u.target?.matches('input[type="file"]')===!0)u.clientX===0&&u.clientY===0&&ze(u);else{const T=l();T!==u.target&&T?.click(u)}}function b(u){e.value&&u&&o(null,u)}function v(u,T,E,R){let y=Array.from(T||u.target.files);const k=[],U=()=>{k.length!==0&&a("rejected",k)};if(i.accept!==void 0&&h.value.indexOf("*/")===-1&&(y=W(y,k,"accept",F=>h.value.some(g=>F.type.toUpperCase().startsWith(g)||F.name.toUpperCase().endsWith(g))),y.length===0))return U();if(i.maxFileSize!==void 0){const F=parseInt(i.maxFileSize,10);if(y=W(y,k,"max-file-size",g=>g.size<=F),y.length===0)return U()}if(i.multiple!==!0&&y.length!==0&&(y=[y[0]]),y.forEach(F=>{F.__key=F.webkitRelativePath+F.lastModified+F.name+F.size}),R===!0){const F=E.map(g=>g.__key);y=W(y,k,"duplicate",g=>F.includes(g.__key)===!1)}if(y.length===0)return U();if(i.maxTotalSize!==void 0){let F=R===!0?E.reduce((g,I)=>g+I.size,0):0;if(y=W(y,k,"max-total-size",g=>(F+=g.size,F<=p.value)),y.length===0)return U()}if(typeof i.filter=="function"){const F=i.filter(y);y=W(y,k,"filter",g=>F.includes(g))}if(i.maxFiles!==void 0){let F=R===!0?E.length:0;if(y=W(y,k,"max-files",()=>(F++,F<=q.value)),y.length===0)return U()}if(U(),y.length!==0)return y}function t(u){ae(u),n.value!==!0&&(n.value=!0)}function x(u){Z(u),(u.relatedTarget!==null||X.is.safari!==!0?u.relatedTarget!==f.value:document.elementsFromPoint(u.clientX,u.clientY).includes(f.value)===!1)===!0&&(n.value=!1)}function z(u){ae(u);const T=u.dataTransfer.files;T.length!==0&&o(null,T),n.value=!1}function S(u){if(n.value===!0)return d("div",{ref:f,class:`q-${u}__dnd absolute-full`,onDragenter:ae,onDragover:ae,onDragleave:x,onDrop:z})}return Object.assign(s,{pickFiles:P,addFiles:b}),{pickFiles:P,addFiles:b,onDragover:t,onDragleave:x,processFiles:v,getDndNode:S,maxFilesNumber:q,maxTotalSizeNumber:p}}function ke(e){return(e*100).toFixed(2)+"%"}const Ct={...$e,...St,label:String,color:String,textColor:String,square:Boolean,flat:Boolean,bordered:Boolean,noThumbnails:Boolean,thumbnailFit:{type:String,default:"cover"},autoUpload:Boolean,hideUploadBtn:Boolean,disable:Boolean,readonly:Boolean},Ae=[...Ft,"start","finish","added","removed"];function kt(e,n){const l=H(),{props:o,slots:i,emit:a,proxy:s}=l,{$q:f}=s,h=Be(o,f);function q(r,w,N){if(r.__status=w,w==="idle"){r.__uploaded=0,r.__progress=0,r.__sizeLabel=Fe(r.size),r.__progressLabel="0.00%";return}if(w==="failed"){s.$forceUpdate();return}r.__uploaded=w==="uploaded"?r.size:N,r.__progress=w==="uploaded"?1:Math.min(.9999,r.__uploaded/r.size),r.__progressLabel=ke(r.__progress),s.$forceUpdate()}const p=m(()=>o.disable!==!0&&o.readonly!==!0),P=A(!1),b=A(null),v=A(null),t={files:A([]),queuedFiles:A([]),uploadedFiles:A([]),uploadedSize:A(0),updateFileStatus:q,isAlive:()=>Ve(l)===!1},{pickFiles:x,addFiles:z,onDragover:S,onDragleave:u,processFiles:T,getDndNode:E,maxFilesNumber:R,maxTotalSizeNumber:y}=qt({editable:p,dnd:P,getFileInput:fe,addFilesToQueue:me});Object.assign(t,e({props:o,slots:i,emit:a,helpers:t,exposeApi:r=>{Object.assign(t,r)}})),t.isBusy===void 0&&(t.isBusy=A(!1));const k=A(0),U=m(()=>k.value===0?0:t.uploadedSize.value/k.value),F=m(()=>ke(U.value)),g=m(()=>Fe(k.value)),I=m(()=>p.value===!0&&t.isUploading.value!==!0&&(o.multiple===!0||t.queuedFiles.value.length===0)&&(o.maxFiles===void 0||t.files.value.length<R.value)&&(o.maxTotalSize===void 0||k.value<y.value)),_=m(()=>p.value===!0&&t.isBusy.value!==!0&&t.isUploading.value!==!0&&t.queuedFiles.value.length!==0);Xe(Pe,ge);const B=m(()=>"q-uploader column no-wrap"+(h.value===!0?" q-uploader--dark q-dark":"")+(o.bordered===!0?" q-uploader--bordered":"")+(o.square===!0?" q-uploader--square no-border-radius":"")+(o.flat===!0?" q-uploader--flat no-shadow":"")+(o.disable===!0?" disabled q-uploader--disable":"")+(P.value===!0?" q-uploader--dnd":"")),c=m(()=>"q-uploader__header"+(o.color!==void 0?` bg-${o.color}`:"")+(o.textColor!==void 0?` text-${o.textColor}`:""));M(t.isUploading,(r,w)=>{w===!1&&r===!0?a("start"):w===!0&&r===!1&&a("finish")});function C(){o.disable===!1&&(t.abort(),t.uploadedSize.value=0,k.value=0,ve(),t.files.value=[],t.queuedFiles.value=[],t.uploadedFiles.value=[])}function $(){o.disable===!1&&de(["uploaded"],()=>{t.uploadedFiles.value=[]})}function D(){de(["idle","failed"],({size:r})=>{k.value-=r,t.queuedFiles.value=[]})}function de(r,w){if(o.disable===!0)return;const N={files:[],size:0},O=t.files.value.filter(L=>r.indexOf(L.__status)===-1?!0:(N.size+=L.size,N.files.push(L),L.__img!==void 0&&window.URL.revokeObjectURL(L.__img.src),!1));N.files.length!==0&&(t.files.value=O,w(N),a("removed",N.files))}function oe(r){o.disable||(r.__status==="uploaded"?t.uploadedFiles.value=t.uploadedFiles.value.filter(w=>w.__key!==r.__key):r.__status==="uploading"?r.__abort():k.value-=r.size,t.files.value=t.files.value.filter(w=>w.__key!==r.__key?!0:(w.__img!==void 0&&window.URL.revokeObjectURL(w.__img.src),!1)),t.queuedFiles.value=t.queuedFiles.value.filter(w=>w.__key!==r.__key),a("removed",[r]))}function ve(){t.files.value.forEach(r=>{r.__img!==void 0&&window.URL.revokeObjectURL(r.__img.src)})}function fe(){return v.value||b.value.getElementsByClassName("q-uploader__input")[0]}function me(r,w){const N=T(r,w,t.files.value,!0),O=fe();O!=null&&(O.value=""),N!==void 0&&(N.forEach(L=>{if(t.updateFileStatus(L,"idle"),k.value+=L.size,o.noThumbnails!==!0&&L.type.toUpperCase().startsWith("IMAGE")){const he=new Image;he.src=window.URL.createObjectURL(L),L.__img=he}}),t.files.value=t.files.value.concat(N),t.queuedFiles.value=t.queuedFiles.value.concat(N),a("added",N),o.autoUpload===!0&&t.upload())}function pe(){_.value===!0&&t.upload()}function Y(r,w,N){if(r===!0){const O={type:"a",key:w,icon:f.iconSet.uploader[w],flat:!0,dense:!0};let L;return w==="add"?(O.onClick=x,L=ge):O.onClick=N,d(Q,O,L)}}function ge(){return d("input",{ref:v,class:"q-uploader__input overflow-hidden absolute-full",tabindex:-1,type:"file",title:"",accept:o.accept,multiple:o.multiple===!0?"multiple":void 0,capture:o.capture,onMousedown:ze,onClick:x,onChange:me})}function Ee(){return i.header!==void 0?i.header(V):[d("div",{class:"q-uploader__header-content column"},[d("div",{class:"flex flex-center no-wrap q-gutter-xs"},[Y(t.queuedFiles.value.length!==0,"removeQueue",D),Y(t.uploadedFiles.value.length!==0,"removeUploaded",$),t.isUploading.value===!0?d(be,{class:"q-uploader__spinner"}):null,d("div",{class:"col column justify-center"},[o.label!==void 0?d("div",{class:"q-uploader__title"},[o.label]):null,d("div",{class:"q-uploader__subtitle"},[g.value+" / "+F.value])]),Y(I.value,"add"),Y(o.hideUploadBtn===!1&&_.value===!0,"upload",t.upload),Y(t.isUploading.value,"clear",t.abort)])])]}function Ne(){return i.list!==void 0?i.list(V):t.files.value.map(r=>d("div",{key:r.__key,class:"q-uploader__file relative-position"+(o.noThumbnails!==!0&&r.__img!==void 0?" q-uploader__file--img":"")+(r.__status==="failed"?" q-uploader__file--failed":r.__status==="uploaded"?" q-uploader__file--uploaded":""),style:o.noThumbnails!==!0&&r.__img!==void 0?{backgroundImage:'url("'+r.__img.src+'")',backgroundSize:o.thumbnailFit}:null},[d("div",{class:"q-uploader__file-header row flex-center no-wrap"},[r.__status==="failed"?d(We,{class:"q-uploader__file-status",name:f.iconSet.type.negative,color:"negative"}):null,d("div",{class:"q-uploader__file-header-content col"},[d("div",{class:"q-uploader__title"},[r.name]),d("div",{class:"q-uploader__subtitle row items-center no-wrap"},[r.__sizeLabel+" / "+r.__progressLabel])]),r.__status==="uploading"?d(xt,{value:r.__progress,min:0,max:1,indeterminate:r.__progress===0}):d(Q,{round:!0,dense:!0,flat:!0,icon:f.iconSet.uploader[r.__status==="uploaded"?"done":"clear"],onClick:()=>{oe(r)}})])]))}ce(()=>{t.isUploading.value===!0&&t.abort(),t.files.value.length!==0&&ve()});const V={};for(const r in t)je(t[r])===!0?Me(V,r,()=>t[r].value):V[r]=t[r];return Object.assign(V,{upload:pe,reset:C,removeUploadedFiles:$,removeQueuedFiles:D,removeFile:oe,pickFiles:x,addFiles:z}),Qe(V,{canAddFiles:()=>I.value,canUpload:()=>_.value,uploadSizeLabel:()=>g.value,uploadProgressLabel:()=>F.value}),n({...t,upload:pe,reset:C,removeUploadedFiles:$,removeQueuedFiles:D,removeFile:oe,pickFiles:x,addFiles:z,canAddFiles:I,canUpload:_,uploadSizeLabel:g,uploadProgressLabel:F}),()=>{const r=[d("div",{class:c.value},Ee()),d("div",{class:"q-uploader__list scroll"},Ne()),E("uploader")];t.isBusy.value===!0&&r.push(d("div",{class:"q-uploader__overlay absolute-full flex flex-center"},[d(be)]));const w={ref:b,class:B.value};return I.value===!0&&Object.assign(w,{onDragover:S,onDragleave:u}),d("div",w,r)}}const wt=()=>!0;function Pt(e){const n={};return e.forEach(l=>{n[l]=wt}),n}const zt=Pt(Ae),$t=({name:e,props:n,emits:l,injectPlugin:o})=>K({name:e,props:{...Ct,...n},emits:Ke(l)===!0?{...zt,...l}:[...Ae,...l],setup(i,{expose:a}){return kt(o,a)}});function j(e){return typeof e=="function"?e:()=>e}const Bt="QUploader",Ut={url:[Function,String],method:{type:[Function,String],default:"POST"},fieldName:{type:[Function,String],default:()=>e=>e.name},headers:[Function,Array],formFields:[Function,Array],withCredentials:[Function,Boolean],sendRaw:[Function,Boolean],batch:[Function,Boolean],factory:Function},Tt=["factoryFailed","uploaded","failed","uploading"];function It({props:e,emit:n,helpers:l}){const o=A([]),i=A([]),a=A(0),s=m(()=>({url:j(e.url),method:j(e.method),headers:j(e.headers),formFields:j(e.formFields),fieldName:j(e.fieldName),withCredentials:j(e.withCredentials),sendRaw:j(e.sendRaw),batch:j(e.batch)})),f=m(()=>a.value>0),h=m(()=>i.value.length!==0);let q;function p(){o.value.forEach(t=>{t.abort()}),i.value.length!==0&&(q=!0)}function P(){const t=l.queuedFiles.value.slice(0);l.queuedFiles.value=[],s.value.batch(t)?b(t):t.forEach(x=>{b([x])})}function b(t){if(a.value++,typeof e.factory!="function"){v(t,{});return}const x=e.factory(t);if(!x)n("factoryFailed",new Error("QUploader: factory() does not return properly"),t),a.value--;else if(typeof x.catch=="function"&&typeof x.then=="function"){i.value.push(x);const z=S=>{l.isAlive()===!0&&(i.value=i.value.filter(u=>u!==x),i.value.length===0&&(q=!1),l.queuedFiles.value=l.queuedFiles.value.concat(t),t.forEach(u=>{l.updateFileStatus(u,"failed")}),n("factoryFailed",S,t),a.value--)};x.then(S=>{q===!0?z(new Error("Aborted")):l.isAlive()===!0&&(i.value=i.value.filter(u=>u!==x),v(t,S))}).catch(z)}else v(t,x||{})}function v(t,x){const z=new FormData,S=new XMLHttpRequest,u=(_,B)=>x[_]!==void 0?j(x[_])(B):s.value[_](B),T=u("url",t);if(!T){console.error("q-uploader: invalid or no URL specified"),a.value--;return}const E=u("formFields",t);E!==void 0&&E.forEach(_=>{z.append(_.name,_.value)});let R=0,y=0,k=0,U=0,F;S.upload.addEventListener("progress",_=>{if(F===!0)return;const B=Math.min(U,_.loaded);l.uploadedSize.value+=B-k,k=B;let c=k-y;for(let C=R;c>0&&C<t.length;C++){const $=t[C];if(c>$.size)c-=$.size,R++,y+=$.size,l.updateFileStatus($,"uploading",$.size);else{l.updateFileStatus($,"uploading",c);return}}},!1),S.onreadystatechange=()=>{S.readyState<4||(S.status&&S.status<400?(l.uploadedFiles.value=l.uploadedFiles.value.concat(t),t.forEach(_=>{l.updateFileStatus(_,"uploaded")}),n("uploaded",{files:t,xhr:S})):(F=!0,l.uploadedSize.value-=k,l.queuedFiles.value=l.queuedFiles.value.concat(t),t.forEach(_=>{l.updateFileStatus(_,"failed")}),n("failed",{files:t,xhr:S})),a.value--,o.value=o.value.filter(_=>_!==S))},S.open(u("method",t),T),u("withCredentials",t)===!0&&(S.withCredentials=!0);const g=u("headers",t);g!==void 0&&g.forEach(_=>{S.setRequestHeader(_.name,_.value)});const I=u("sendRaw",t);t.forEach(_=>{l.updateFileStatus(_,"uploading",0),I!==!0&&z.append(u("fieldName",_),_,_.name),_.xhr=S,_.__abort=()=>{S.abort()},U+=_.size}),n("uploading",{files:t,xhr:S}),o.value.push(S),I===!0?S.send(new Blob(t)):S.send(z)}return{isUploading:f,isBusy:h,abort:p,upload:P}}const At={name:Bt,props:Ut,emits:Tt,injectPlugin:It},ia=$t(At);function Et(e){const n=[.06,6,50];return typeof e=="string"&&e.length&&e.split(":").forEach((l,o)=>{const i=parseFloat(l);i&&(n[o]=i)}),n}const Nt=He({name:"touch-swipe",beforeMount(e,{value:n,arg:l,modifiers:o}){if(o.mouse!==!0&&X.has.touch!==!0)return;const i=o.mouseCapture===!0?"Capture":"",a={handler:n,sensitivity:Et(l),direction:qe(o),noop:Ye,mouseStart(s){Ce(s,a)&&Ge(s)&&(ee(a,"temp",[[document,"mousemove","move",`notPassive${i}`],[document,"mouseup","end","notPassiveCapture"]]),a.start(s,!0))},touchStart(s){if(Ce(s,a)){const f=s.target;ee(a,"temp",[[f,"touchmove","move","notPassiveCapture"],[f,"touchcancel","end","notPassiveCapture"],[f,"touchend","end","notPassiveCapture"]]),a.start(s)}},start(s,f){X.is.firefox===!0&&re(e,!0);const h=ye(s);a.event={x:h.left,y:h.top,time:Date.now(),mouse:f===!0,dir:!1}},move(s){if(a.event===void 0)return;if(a.event.dir!==!1){Z(s);return}const f=Date.now()-a.event.time;if(f===0)return;const h=ye(s),q=h.left-a.event.x,p=Math.abs(q),P=h.top-a.event.y,b=Math.abs(P);if(a.event.mouse!==!0){if(p<a.sensitivity[1]&&b<a.sensitivity[1]){a.end(s);return}}else if(window.getSelection().toString()!==""){a.end(s);return}else if(p<a.sensitivity[2]&&b<a.sensitivity[2])return;const v=p/f,t=b/f;a.direction.vertical===!0&&p<b&&p<100&&t>a.sensitivity[0]&&(a.event.dir=P<0?"up":"down"),a.direction.horizontal===!0&&p>b&&b<100&&v>a.sensitivity[0]&&(a.event.dir=q<0?"left":"right"),a.direction.up===!0&&p<b&&P<0&&p<100&&t>a.sensitivity[0]&&(a.event.dir="up"),a.direction.down===!0&&p<b&&P>0&&p<100&&t>a.sensitivity[0]&&(a.event.dir="down"),a.direction.left===!0&&p>b&&q<0&&b<100&&v>a.sensitivity[0]&&(a.event.dir="left"),a.direction.right===!0&&p>b&&q>0&&b<100&&v>a.sensitivity[0]&&(a.event.dir="right"),a.event.dir!==!1?(Z(s),a.event.mouse===!0&&(document.body.classList.add("no-pointer-events--children"),document.body.classList.add("non-selectable"),mt(),a.styleCleanup=x=>{a.styleCleanup=void 0,document.body.classList.remove("non-selectable");const z=()=>{document.body.classList.remove("no-pointer-events--children")};x===!0?setTimeout(z,50):z()}),a.handler({evt:s,touch:a.event.mouse!==!0,mouse:a.event.mouse,direction:a.event.dir,duration:f,distance:{x:p,y:b}})):a.end(s)},end(s){a.event!==void 0&&(le(a,"temp"),X.is.firefox===!0&&re(e,!1),a.styleCleanup?.(!0),s!==void 0&&a.event.dir!==!1&&Z(s),a.event=void 0)}};if(e.__qtouchswipe=a,o.mouse===!0){const s=o.mouseCapture===!0||o.mousecapture===!0?"Capture":"";ee(a,"main",[[e,"mousedown","mouseStart",`passive${s}`]])}X.has.touch===!0&&ee(a,"main",[[e,"touchstart","touchStart",`passive${o.capture===!0?"Capture":""}`],[e,"touchmove","noop","notPassiveCapture"]])},updated(e,n){const l=e.__qtouchswipe;l!==void 0&&(n.oldValue!==n.value&&(typeof n.value!="function"&&l.end(),l.handler=n.value),l.direction=qe(n.modifiers))},beforeUnmount(e){const n=e.__qtouchswipe;n!==void 0&&(le(n,"main"),le(n,"temp"),X.is.firefox===!0&&re(e,!1),n.styleCleanup?.(),delete e.__qtouchswipe)}});function Rt(){let e=Object.create(null);return{getCache:(n,l)=>e[n]===void 0?e[n]=typeof l=="function"?l():l:e[n],setCache(n,l){e[n]=l},hasCache(n){return Object.hasOwnProperty.call(e,n)},clearCache(n){n!==void 0?delete e[n]:e=Object.create(null)}}}const Lt={name:{required:!0},disable:Boolean},we={setup(e,{slots:n}){return()=>d("div",{class:"q-panel scroll",role:"tabpanel"},ne(n.default))}},Dt={modelValue:{required:!0},animated:Boolean,infinite:Boolean,swipeable:Boolean,vertical:Boolean,transitionPrev:String,transitionNext:String,transitionDuration:{type:[String,Number],default:300},keepAlive:Boolean,keepAliveInclude:[String,Array,RegExp],keepAliveExclude:[String,Array,RegExp],keepAliveMax:Number},Ot=["update:modelValue","beforeTransition","transition"];function jt(){const{props:e,emit:n,proxy:l}=H(),{getCache:o}=Rt(),{registerTimeout:i}=Je();let a,s;const f=A(null),h={value:null};function q(c){const C=e.vertical===!0?"up":"left";U((l.$q.lang.rtl===!0?-1:1)*(c.direction===C?1:-1))}const p=m(()=>[[Nt,q,void 0,{horizontal:e.vertical!==!0,vertical:e.vertical,mouse:!0}]]),P=m(()=>e.transitionPrev||`slide-${e.vertical===!0?"down":"right"}`),b=m(()=>e.transitionNext||`slide-${e.vertical===!0?"up":"left"}`),v=m(()=>`--q-transition-duration: ${e.transitionDuration}ms`),t=m(()=>typeof e.modelValue=="string"||typeof e.modelValue=="number"?e.modelValue:String(e.modelValue)),x=m(()=>({include:e.keepAliveInclude,exclude:e.keepAliveExclude,max:e.keepAliveMax})),z=m(()=>e.keepAliveInclude!==void 0||e.keepAliveExclude!==void 0);M(()=>e.modelValue,(c,C)=>{const $=E(c)===!0?R(c):-1;s!==!0&&k($===-1?0:$<R(C)?-1:1),h.value!==$&&(h.value=$,n("beforeTransition",c,C),i(()=>{n("transition",c,C)},e.transitionDuration))});function S(){U(1)}function u(){U(-1)}function T(c){n("update:modelValue",c)}function E(c){return c!=null&&c!==""}function R(c){return a.findIndex(C=>C.props.name===c&&C.props.disable!==""&&C.props.disable!==!0)}function y(){return a.filter(c=>c.props.disable!==""&&c.props.disable!==!0)}function k(c){const C=c!==0&&e.animated===!0&&h.value!==-1?"q-transition--"+(c===-1?P.value:b.value):null;f.value!==C&&(f.value=C)}function U(c,C=h.value){let $=C+c;for(;$!==-1&&$<a.length;){const D=a[$];if(D!==void 0&&D.props.disable!==""&&D.props.disable!==!0){k(c),s=!0,n("update:modelValue",D.props.name),setTimeout(()=>{s=!1});return}$+=c}e.infinite===!0&&a.length!==0&&C!==-1&&C!==a.length&&U(c,c===-1?a.length:-1)}function F(){const c=R(e.modelValue);return h.value!==c&&(h.value=c),!0}function g(){const c=E(e.modelValue)===!0&&F()&&a[h.value];return e.keepAlive===!0?[d(tt,x.value,[d(z.value===!0?o(t.value,()=>({...we,name:t.value})):we,{key:t.value,style:v.value},()=>c)])]:[d("div",{class:"q-panel scroll",style:v.value,key:t.value,role:"tabpanel"},[c])]}function I(){if(a.length!==0)return e.animated===!0?[d(Ze,{name:f.value},g)]:g()}function _(c){return a=et(ne(c.default,[])).filter(C=>C.props!==null&&C.props.slot===void 0&&E(C.props.name)===!0),a.length}function B(){return a}return Object.assign(l,{next:S,previous:u,goTo:T}),{panelIndex:h,panelDirectives:p,updatePanelsList:_,updatePanelIndex:F,getPanelContent:I,getEnabledPanels:y,getPanels:B,isValidPanelName:E,keepAliveProps:x,needsUniqueKeepAliveWrapper:z,goToPanelByOffset:U,goToPanel:T,nextPanel:S,previousPanel:u}}const Mt=K({name:"QCarouselSlide",props:{...Lt,imgSrc:String},setup(e,{slots:n}){const l=m(()=>e.imgSrc?{backgroundImage:`url("${e.imgSrc}")`}:{});return()=>d("div",{class:"q-carousel__slide",style:l.value},ne(n.default))}}),Qt=K({name:"QCarouselControl",props:{position:{type:String,default:"bottom-right",validator:e=>["top-right","top-left","bottom-right","bottom-left","top","right","bottom","left"].includes(e)},offset:{type:Array,default:()=>[18,18],validator:e=>e.length===2}},setup(e,{slots:n}){const l=m(()=>`q-carousel__control absolute absolute-${e.position}`),o=m(()=>({margin:`${e.offset[1]}px ${e.offset[0]}px`}));return()=>d("div",{class:l.value,style:o.value},ne(n.default))}});let J=0;const Vt={fullscreen:Boolean,noRouteFullscreenExit:Boolean},Wt=["update:fullscreen","fullscreen"];function Xt(){const e=H(),{props:n,emit:l,proxy:o}=e;let i,a,s;const f=A(!1);at(e)===!0&&M(()=>o.$route.fullPath,()=>{n.noRouteFullscreenExit!==!0&&p()}),M(()=>n.fullscreen,P=>{f.value!==P&&h()}),M(f,P=>{l("update:fullscreen",P),l("fullscreen",P)});function h(){f.value===!0?p():q()}function q(){f.value!==!0&&(f.value=!0,s=o.$el.parentNode,s.replaceChild(a,o.$el),document.body.appendChild(o.$el),J++,J===1&&document.body.classList.add("q-body--fullscreen-mixin"),i={handler:p},xe.add(i))}function p(){f.value===!0&&(i!==void 0&&(xe.remove(i),i=void 0),s.replaceChild(o.$el,a),f.value=!1,J=Math.max(0,J-1),J===0&&(document.body.classList.remove("q-body--fullscreen-mixin"),o.$el.scrollIntoView!==void 0&&setTimeout(()=>{o.$el.scrollIntoView()})))}return nt(()=>{a=document.createElement("span")}),Ue(()=>{n.fullscreen===!0&&q()}),ce(p),Object.assign(o,{toggleFullscreen:h,setFullscreen:q,exitFullscreen:p}),{inFullscreen:f,toggleFullscreen:h}}const Kt=["top","right","bottom","left"],Ht=["regular","flat","outline","push","unelevated"],Yt=K({name:"QCarousel",props:{...$e,...Dt,...Vt,transitionPrev:{type:String,default:"fade"},transitionNext:{type:String,default:"fade"},height:String,padding:Boolean,controlColor:String,controlTextColor:String,controlType:{type:String,validator:e=>Ht.includes(e),default:"flat"},autoplay:[Number,Boolean],arrows:Boolean,prevIcon:String,nextIcon:String,navigation:Boolean,navigationPosition:{type:String,validator:e=>Kt.includes(e)},navigationIcon:String,navigationActiveIcon:String,thumbnails:Boolean},emits:[...Wt,...Ot],setup(e,{slots:n}){const{proxy:{$q:l}}=H(),o=Be(e,l);let i=null,a;const{updatePanelsList:s,getPanelContent:f,panelDirectives:h,goToPanel:q,previousPanel:p,nextPanel:P,getEnabledPanels:b,panelIndex:v}=jt(),{inFullscreen:t}=Xt(),x=m(()=>t.value!==!0&&e.height!==void 0?{height:e.height}:{}),z=m(()=>e.vertical===!0?"vertical":"horizontal"),S=m(()=>e.navigationPosition||(e.vertical===!0?"right":"bottom")),u=m(()=>`q-carousel q-panel-parent q-carousel--with${e.padding===!0?"":"out"}-padding`+(t.value===!0?" fullscreen":"")+(o.value===!0?" q-carousel--dark q-dark":"")+(e.arrows===!0?` q-carousel--arrows-${z.value}`:"")+(e.navigation===!0?` q-carousel--navigation-${S.value}`:"")),T=m(()=>{const g=[e.prevIcon||l.iconSet.carousel[e.vertical===!0?"up":"left"],e.nextIcon||l.iconSet.carousel[e.vertical===!0?"down":"right"]];return e.vertical===!1&&l.lang.rtl===!0?g.reverse():g}),E=m(()=>e.navigationIcon||l.iconSet.carousel.navigationIcon),R=m(()=>e.navigationActiveIcon||E.value),y=m(()=>({color:e.controlColor,textColor:e.controlTextColor,round:!0,[e.controlType]:!0,dense:!0}));M(()=>e.modelValue,()=>{e.autoplay&&k()}),M(()=>e.autoplay,g=>{g?k():i!==null&&(clearTimeout(i),i=null)});function k(){const g=ot(e.autoplay)===!0?Math.abs(e.autoplay):5e3;i!==null&&clearTimeout(i),i=setTimeout(()=>{i=null,g>=0?P():p()},g)}Ue(()=>{e.autoplay&&k()}),ce(()=>{i!==null&&clearTimeout(i)});function U(g,I){return d("div",{class:`q-carousel__control q-carousel__navigation no-wrap absolute flex q-carousel__navigation--${g} q-carousel__navigation--${S.value}`+(e.controlColor!==void 0?` text-${e.controlColor}`:"")},[d("div",{class:"q-carousel__navigation-inner flex flex-center no-wrap"},b().map(I))])}function F(){const g=[];if(e.navigation===!0){const I=n["navigation-icon"]!==void 0?n["navigation-icon"]:B=>d(Q,{key:"nav"+B.name,class:`q-carousel__navigation-icon q-carousel__navigation-icon--${B.active===!0?"":"in"}active`,...B.btnProps,onClick:B.onClick}),_=a-1;g.push(U("buttons",(B,c)=>{const C=B.props.name,$=v.value===c;return I({index:c,maxIndex:_,name:C,active:$,btnProps:{icon:$===!0?R.value:E.value,size:"sm",...y.value},onClick:()=>{q(C)}})}))}else if(e.thumbnails===!0){const I=e.controlColor!==void 0?` text-${e.controlColor}`:"";g.push(U("thumbnails",_=>{const B=_.props;return d("img",{key:"tmb#"+B.name,class:`q-carousel__thumbnail q-carousel__thumbnail--${B.name===e.modelValue?"":"in"}active`+I,src:B.imgSrc||B["img-src"],onClick:()=>{q(B.name)}})}))}return e.arrows===!0&&v.value>=0&&((e.infinite===!0||v.value>0)&&g.push(d("div",{key:"prev",class:`q-carousel__control q-carousel__arrow q-carousel__prev-arrow q-carousel__prev-arrow--${z.value} absolute flex flex-center`},[d(Q,{icon:T.value[0],...y.value,onClick:p})])),(e.infinite===!0||v.value<a-1)&&g.push(d("div",{key:"next",class:`q-carousel__control q-carousel__arrow q-carousel__next-arrow q-carousel__next-arrow--${z.value} absolute flex flex-center`},[d(Q,{icon:T.value[1],...y.value,onClick:P})]))),rt(n.control,g)}return()=>(a=s(n),d("div",{class:u.value,style:x.value},[lt("div",{class:"q-carousel__slides-container"},f(),"sl-cont",e.swipeable,()=>h.value)].concat(F())))}}),Gt=it({__name:"ProductImgCarusel",props:{images:{}},emits:["refresh-data"],setup(e,{emit:n}){const l=e,o=n,i=pt(),a=ht(),s=ut(),{isManager:f}=gt(m(()=>s.user)),h=A(0),q=A(!1);function p(){i.dialog({title:"Удаление картинки",message:"Вы уверенны что хотите удалить картинку?",cancel:!0,persistent:!0}).onOk(()=>{P()})}async function P(){try{const b=l.images[h.value];await a.deleteFile(b.id),o("refresh-data")}catch(b){console.error(b)}}return(b,v)=>(G(),te(Yt,{swipeable:"",animated:"",arrows:"",modelValue:h.value,"onUpdate:modelValue":v[2]||(v[2]=t=>h.value=t),fullscreen:q.value,"onUpdate:fullscreen":v[3]||(v[3]=t=>q.value=t),infinite:"",height:ie(f)?"200px":"250px",class:"q-mb-sm"},{control:ue(()=>[vt(Qt,{position:"bottom-right",offset:[18,18]},{default:ue(()=>[ie(f)?Se("",!0):(G(),te(Q,{key:0,push:"",round:"",dense:"",color:"white","text-color":"primary",icon:q.value?"fullscreen_exit":"fullscreen",onClick:v[0]||(v[0]=t=>q.value=!q.value)},null,8,["icon"])),ie(f)?(G(),te(Q,{key:1,round:"",dense:"","text-color":"red",icon:"delete",onClick:v[1]||(v[1]=t=>p())})):Se("",!0)]),_:1})]),default:ue(()=>[(G(!0),st(dt,null,ct(b.images,(t,x)=>(G(),te(Mt,{key:x,name:x,"img-src":t.file_path,class:"card-image"},null,8,["name","img-src"]))),128))]),_:1},8,["modelValue","fullscreen","height"]))}}),ua=_t(Gt,[["__scopeId","data-v-cba867e9"]]);export{ua as P,ia as Q,ra as a,Pt as g};
