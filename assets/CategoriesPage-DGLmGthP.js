import{d as L,r as m,ag as U,ah as C,ai as s,f as e,ao as g,Q as r,an as o,F as h,aq as D,am as p,aj as c,at as y,ap as f,ak as Q,ab as F,as as V,aM as _,av as b,aN as P,Y as k,aL as j}from"./index-BHoUKiZc.js";import{u as A,Q as E,b as T,a as q}from"./use-quasar-DVwwMuPz.js";import{Q as Y}from"./QList-DXC5ncql.js";import{Q as z}from"./QSelect-BhXNaX-S.js";import{C as w}from"./ClosePopup-xUBZL2Ha.js";import{a as x}from"./useUtils-DibkGWpU.js";import{u as G}from"./categoriesStore--TP-RUZY.js";import"./QMenu-BPDKfujU.js";const H={class:"text-h6"},le=L({__name:"CategoriesPage",setup(J){const u=A(),i=G(),d=m(!1),S=m({name:"",parent_id:null,description:""}),t=m({id:null,name:"",parent_id:null,description:""});function v(n){n?.id?t.value=n:t.value=S.value,d.value=!d.value}function B(n){console.log(n)}async function I(){try{if(u.loading.show(),!t.value)return;await(t.value.id?i.updateCategorie:i.createCategories)(t.value)&&(await i.fetchCategories(),u.notify({message:"Категория успешно добавлена",color:"primary"}))}catch(n){console.error(n)}finally{u.loading.hide()}}return(n,a)=>{const M=U("q-item-action");return s(),C("div",null,[e(r,{onClick:a[0]||(a[0]=l=>v()),class:"full-width q-mb-sm",color:"secondary",label:"Добавление категории"}),a[6]||(a[6]=g("h6",{class:"text-center q-mt-md q-mb-md"},"Категории",-1)),e(V,{class:"my-card q-ma-sm",flat:"",bordered:""},{default:o(()=>[(s(!0),C(h,null,D(p(i).categories,(l,N)=>(s(),c(Y,{key:N},{default:o(()=>[e(E,null,{default:o(()=>[e(T,null,{default:o(()=>[e(q,null,{default:o(()=>[y(f(l.name),1)]),_:2},1024),e(q,{caption:""},{default:o(()=>[y(f(l.description),1)]),_:2},1024)]),_:2},1024),e(M,null,{default:o(()=>[p(x)?(s(),c(r,{key:0,flat:"",round:"",color:"red",icon:"delete",onClick:$=>B(l)},null,8,["onClick"])):Q("",!0),p(x)?(s(),c(r,{key:1,flat:"",round:"",color:"secondary",icon:"mode_edit",onClick:$=>v(l)},null,8,["onClick"])):Q("",!0)]),_:2},1024)]),_:2},1024),e(F)]),_:2},1024))),128))]),_:1}),e(j,{modelValue:d.value,"onUpdate:modelValue":a[5]||(a[5]=l=>d.value=l)},{default:o(()=>[e(V,{style:{"min-width":"90svw"}},{default:o(()=>[e(_,null,{default:o(()=>[g("div",H,f(t.value.id?"Редактировать категорию":"Добавить категорию"),1)]),_:1}),e(_,{class:"q-pt-none"},{default:o(()=>[e(b,{modelValue:t.value.name,"onUpdate:modelValue":a[1]||(a[1]=l=>t.value.name=l),class:"q-mb-xs",outlined:"",label:"Наиминование категории"},null,8,["modelValue"]),e(z,{modelValue:t.value.parent_id,"onUpdate:modelValue":a[2]||(a[2]=l=>t.value.parent_id=l),options:["1","2"],outlined:"",label:"Тип тары","emit-value":"","map-options":""},null,8,["modelValue"]),e(b,{class:"q-mt-sm",modelValue:t.value.description,"onUpdate:modelValue":a[3]||(a[3]=l=>t.value.description=l),filled:"",type:"textarea",rows:"2",label:"Описание"},null,8,["modelValue"])]),_:1}),e(P,{align:"right"},{default:o(()=>[k(e(r,{flat:"",label:"Отмена",color:"negative"},null,512),[[w]]),k(e(r,{flat:"",label:"Подтвердить",color:"primary",onClick:a[4]||(a[4]=l=>I())},null,512),[[w]])]),_:1})]),_:1})]),_:1},8,["modelValue"])])}}});export{le as default};
