import{k as pe,g as he,a as gt,v as Ce,x as Nl,$ as Ql,c as v,h as g,l as St,aE as nl,aF as ol,aG as ul,aH as il,r as B,L as qe,N as ye,G as Hl,P as yt,S as bt,w as de,n as We,i as jl,aI as Kl,aJ as Wl,aK as Ut,aL as Xl,ad as Me,Q as se,_ as Yl,aM as Gl,aN as rl,aO as _t,aP as sl,aQ as cl,Z as dl,at as Zl,p as Jl,q as xe,aR as ea,aS as fl,ax as ta,ay as la,z as aa,aT as na,aU as Nt,aV as oa,aW as Qe,av as ua,K as ft,aX as ia,aY as ra,au as sa,aZ as vl,C as ml,a_ as ca,a$ as Qt,o as ot,b0 as da,d as ut,u as wt,aj as ie,ai as te,am as ge,an as Y,ah as nt,aq as gl,F as pl,f as L,ak as Te,b1 as Ht,ao as ue,ap as ce,aD as He,b2 as jt,Y as Je,b3 as fa,b4 as Kt,aB as Wt,al as va,ab as ma}from"./index-B91JE9Op.js";import{b as ga,i as Xt,r as pt,n as Yt,a as pa,d as ha,e as Sa,f as ya,u as xt,Q as hl,h as ba}from"./orderStore-C9kSrZ9G.js";import{b as lt,a as at,Q as Sl,u as Ct,g as yl,c as _a}from"./useUtils-TNG96ZYi.js";import{Q as wa,a as xa}from"./QMenu-gwpdf0e1.js";import{u as bl,Q as Gt}from"./unitsStore-DeCqI7fW.js";import{C as et}from"./ClosePopup-B-StfrJh.js";import{u as qt}from"./usePermissionVisibility.hook-BLsC0QhK.js";import{_ as kt}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{u as Ca}from"./categoriesStore-DQN-qrhm.js";import"./selection-Cf7x3ZwH.js";const qa=pe({name:"QPage",props:{padding:Boolean,styleFn:Function},setup(e,{slots:r}){const{proxy:{$q:n}}=he(),a=gt(Nl,Ce);if(a===Ce)return console.error("QPage needs to be a deep child of QLayout"),Ce;if(gt(Ql,Ce)===Ce)return console.error("QPage needs to be child of QPageContainer"),Ce;const u=v(()=>{const p=(a.header.space===!0?a.header.size:0)+(a.footer.space===!0?a.footer.size:0);if(typeof e.styleFn=="function"){const w=a.isContainer.value===!0?a.containerHeight.value:n.screen.height;return e.styleFn(p,w)}return{minHeight:a.isContainer.value===!0?a.containerHeight.value-p+"px":n.screen.height===0?p!==0?`calc(100vh - ${p}px)`:"100vh":n.screen.height-p+"px"}}),k=v(()=>`q-page${e.padding===!0?" q-layout-padding":""}`);return()=>g("main",{class:k.value,style:u.value},St(r.default))}}),ka=pe({name:"QUploaderAddTrigger",setup(){const e=gt(nl,Ce);return e===Ce&&console.error("QUploaderAddTrigger needs to be child of QUploader"),e}}),Fa={...ol,min:{type:Number,default:0},max:{type:Number,default:100},color:String,centerColor:String,trackColor:String,fontSize:String,rounded:Boolean,thickness:{type:Number,default:.2,validator:e=>e>=0&&e<=1},angle:{type:Number,default:0},showValue:Boolean,reverse:Boolean,instantFeedback:Boolean},ht=50,_l=2*ht,wl=_l*Math.PI,Va=Math.round(wl*1e3)/1e3,za=pe({name:"QCircularProgress",props:{...Fa,value:{type:Number,default:0},animationSpeed:{type:[String,Number],default:600},indeterminate:Boolean},setup(e,{slots:r}){const{proxy:{$q:n}}=he(),a=ul(e),c=v(()=>{const f=(n.lang.rtl===!0?-1:1)*e.angle;return{transform:e.reverse!==(n.lang.rtl===!0)?`scale3d(-1, 1, 1) rotate3d(0, 0, 1, ${-90-f}deg)`:`rotate3d(0, 0, 1, ${f-90}deg)`}}),u=v(()=>e.instantFeedback!==!0&&e.indeterminate!==!0?{transition:`stroke-dashoffset ${e.animationSpeed}ms ease 0s, stroke ${e.animationSpeed}ms ease`}:""),k=v(()=>_l/(1-e.thickness/2)),p=v(()=>`${k.value/2} ${k.value/2} ${k.value} ${k.value}`),w=v(()=>ga(e.value,e.min,e.max)),F=v(()=>e.max-e.min),m=v(()=>e.thickness/2*k.value),q=v(()=>{const f=(e.max-w.value)/F.value,l=e.rounded===!0&&w.value<e.max&&f<.25?m.value/2*(1-f/.25):0;return wl*f+l});function i({thickness:f,offset:l,color:C,cls:d,rounded:x}){return g("circle",{class:"q-circular-progress__"+d+(C!==void 0?` text-${C}`:""),style:u.value,fill:"transparent",stroke:"currentColor","stroke-width":f,"stroke-dasharray":Va,"stroke-dashoffset":l,"stroke-linecap":x,cx:k.value,cy:k.value,r:ht})}return()=>{const f=[];e.centerColor!==void 0&&e.centerColor!=="transparent"&&f.push(g("circle",{class:`q-circular-progress__center text-${e.centerColor}`,fill:"currentColor",r:ht-m.value/2,cx:k.value,cy:k.value})),e.trackColor!==void 0&&e.trackColor!=="transparent"&&f.push(i({cls:"track",thickness:m.value,offset:0,color:e.trackColor})),f.push(i({cls:"circle",thickness:m.value,offset:q.value,color:e.color,rounded:e.rounded===!0?"round":void 0}));const l=[g("svg",{class:"q-circular-progress__svg",style:c.value,viewBox:p.value,"aria-hidden":"true"},f)];return e.showValue===!0&&l.push(g("div",{class:"q-circular-progress__text absolute-full row flex-center content-center",style:{fontSize:e.fontSize}},r.default!==void 0?r.default():[g("div",w.value)])),g("div",{class:`q-circular-progress q-circular-progress--${e.indeterminate===!0?"in":""}determinate`,style:a.value,role:"progressbar","aria-valuemin":e.min,"aria-valuemax":e.max,"aria-valuenow":e.indeterminate===!0?void 0:w.value},il(r.internal,l))}}});function De(e,r,n,a){const c=[];return e.forEach(u=>{a(u)===!0?c.push(u):r.push({failedPropValidation:n,file:u})}),c}function tt(e){e?.dataTransfer&&(e.dataTransfer.dropEffect="copy"),ye(e)}const Ia={multiple:Boolean,accept:String,capture:String,maxFileSize:[Number,String],maxTotalSize:[Number,String],maxFiles:[Number,String],filter:Function},Aa=["rejected"];function Pa({editable:e,dnd:r,getFileInput:n,addFilesToQueue:a}){const{props:c,emit:u,proxy:k}=he(),p=B(null),w=v(()=>c.accept!==void 0?c.accept.split(",").map(y=>(y=y.trim(),y==="*"?"*/":(y.endsWith("/*")&&(y=y.slice(0,y.length-1)),y.toUpperCase()))):null),F=v(()=>parseInt(c.maxFiles,10)),m=v(()=>parseInt(c.maxTotalSize,10));function q(y){if(e.value)if(y!==Object(y)&&(y={target:null}),y.target?.matches('input[type="file"]')===!0)y.clientX===0&&y.clientY===0&&qe(y);else{const D=n();D!==y.target&&D?.click(y)}}function i(y){e.value&&y&&a(null,y)}function f(y,D,V,z){let h=Array.from(D||y.target.files);const M=[],G=()=>{M.length!==0&&u("rejected",M)};if(c.accept!==void 0&&w.value.indexOf("*/")===-1&&(h=De(h,M,"accept",T=>w.value.some(A=>T.type.toUpperCase().startsWith(A)||T.name.toUpperCase().endsWith(A))),h.length===0))return G();if(c.maxFileSize!==void 0){const T=parseInt(c.maxFileSize,10);if(h=De(h,M,"max-file-size",A=>A.size<=T),h.length===0)return G()}if(c.multiple!==!0&&h.length!==0&&(h=[h[0]]),h.forEach(T=>{T.__key=T.webkitRelativePath+T.lastModified+T.name+T.size}),z===!0){const T=V.map(A=>A.__key);h=De(h,M,"duplicate",A=>T.includes(A.__key)===!1)}if(h.length===0)return G();if(c.maxTotalSize!==void 0){let T=z===!0?V.reduce((A,ee)=>A+ee.size,0):0;if(h=De(h,M,"max-total-size",A=>(T+=A.size,T<=m.value)),h.length===0)return G()}if(typeof c.filter=="function"){const T=c.filter(h);h=De(h,M,"filter",A=>T.includes(A))}if(c.maxFiles!==void 0){let T=z===!0?V.length:0;if(h=De(h,M,"max-files",()=>(T++,T<=F.value)),h.length===0)return G()}if(G(),h.length!==0)return h}function l(y){tt(y),r.value!==!0&&(r.value=!0)}function C(y){ye(y),(y.relatedTarget!==null||Hl.is.safari!==!0?y.relatedTarget!==p.value:document.elementsFromPoint(y.clientX,y.clientY).includes(p.value)===!1)===!0&&(r.value=!1)}function d(y){tt(y);const D=y.dataTransfer.files;D.length!==0&&a(null,D),r.value=!1}function x(y){if(r.value===!0)return g("div",{ref:p,class:`q-${y}__dnd absolute-full`,onDragenter:tt,onDragover:tt,onDragleave:C,onDrop:d})}return Object.assign(k,{pickFiles:q,addFiles:i}),{pickFiles:q,addFiles:i,onDragover:l,onDragleave:C,processFiles:f,getDndNode:x,maxFilesNumber:F,maxTotalSizeNumber:m}}function Zt(e){return(e*100).toFixed(2)+"%"}const Ba={...yt,...Ia,label:String,color:String,textColor:String,square:Boolean,flat:Boolean,bordered:Boolean,noThumbnails:Boolean,thumbnailFit:{type:String,default:"cover"},autoUpload:Boolean,hideUploadBtn:Boolean,disable:Boolean,readonly:Boolean},xl=[...Aa,"start","finish","added","removed"];function $a(e,r){const n=he(),{props:a,slots:c,emit:u,proxy:k}=n,{$q:p}=k,w=bt(a,p);function F(s,P,W){if(s.__status=P,P==="idle"){s.__uploaded=0,s.__progress=0,s.__sizeLabel=Xt(s.size),s.__progressLabel="0.00%";return}if(P==="failed"){k.$forceUpdate();return}s.__uploaded=P==="uploaded"?s.size:W,s.__progress=P==="uploaded"?1:Math.min(.9999,s.__uploaded/s.size),s.__progressLabel=Zt(s.__progress),k.$forceUpdate()}const m=v(()=>a.disable!==!0&&a.readonly!==!0),q=B(!1),i=B(null),f=B(null),l={files:B([]),queuedFiles:B([]),uploadedFiles:B([]),uploadedSize:B(0),updateFileStatus:F,isAlive:()=>Xl(n)===!1},{pickFiles:C,addFiles:d,onDragover:x,onDragleave:y,processFiles:D,getDndNode:V,maxFilesNumber:z,maxTotalSizeNumber:h}=Pa({editable:m,dnd:q,getFileInput:o,addFilesToQueue:S});Object.assign(l,e({props:a,slots:c,emit:u,helpers:l,exposeApi:s=>{Object.assign(l,s)}})),l.isBusy===void 0&&(l.isBusy=B(!1));const M=B(0),G=v(()=>M.value===0?0:l.uploadedSize.value/M.value),T=v(()=>Zt(G.value)),A=v(()=>Xt(M.value)),ee=v(()=>m.value===!0&&l.isUploading.value!==!0&&(a.multiple===!0||l.queuedFiles.value.length===0)&&(a.maxFiles===void 0||l.files.value.length<z.value)&&(a.maxTotalSize===void 0||M.value<h.value)),I=v(()=>m.value===!0&&l.isBusy.value!==!0&&l.isUploading.value!==!0&&l.queuedFiles.value.length!==0);Yl(nl,Z);const Q=v(()=>"q-uploader column no-wrap"+(w.value===!0?" q-uploader--dark q-dark":"")+(a.bordered===!0?" q-uploader--bordered":"")+(a.square===!0?" q-uploader--square no-border-radius":"")+(a.flat===!0?" q-uploader--flat no-shadow":"")+(a.disable===!0?" disabled q-uploader--disable":"")+(q.value===!0?" q-uploader--dnd":"")),ne=v(()=>"q-uploader__header"+(a.color!==void 0?` bg-${a.color}`:"")+(a.textColor!==void 0?` text-${a.textColor}`:""));de(l.isUploading,(s,P)=>{P===!1&&s===!0?u("start"):P===!0&&s===!1&&u("finish")});function ae(){a.disable===!1&&(l.abort(),l.uploadedSize.value=0,M.value=0,we(),l.files.value=[],l.queuedFiles.value=[],l.uploadedFiles.value=[])}function K(){a.disable===!1&&_e(["uploaded"],()=>{l.uploadedFiles.value=[]})}function be(){_e(["idle","failed"],({size:s})=>{M.value-=s,l.queuedFiles.value=[]})}function _e(s,P){if(a.disable===!0)return;const W={files:[],size:0},oe=l.files.value.filter(X=>s.indexOf(X.__status)===-1?!0:(W.size+=X.size,W.files.push(X),X.__img!==void 0&&window.URL.revokeObjectURL(X.__img.src),!1));W.files.length!==0&&(l.files.value=oe,P(W),u("removed",W.files))}function ve(s){a.disable||(s.__status==="uploaded"?l.uploadedFiles.value=l.uploadedFiles.value.filter(P=>P.__key!==s.__key):s.__status==="uploading"?s.__abort():M.value-=s.size,l.files.value=l.files.value.filter(P=>P.__key!==s.__key?!0:(P.__img!==void 0&&window.URL.revokeObjectURL(P.__img.src),!1)),l.queuedFiles.value=l.queuedFiles.value.filter(P=>P.__key!==s.__key),u("removed",[s]))}function we(){l.files.value.forEach(s=>{s.__img!==void 0&&window.URL.revokeObjectURL(s.__img.src)})}function o(){return f.value||i.value.getElementsByClassName("q-uploader__input")[0]}function S(s,P){const W=D(s,P,l.files.value,!0),oe=o();oe!=null&&(oe.value=""),W!==void 0&&(W.forEach(X=>{if(l.updateFileStatus(X,"idle"),M.value+=X.size,a.noThumbnails!==!0&&X.type.toUpperCase().startsWith("IMAGE")){const ke=new Image;ke.src=window.URL.createObjectURL(X),X.__img=ke}}),l.files.value=l.files.value.concat(W),l.queuedFiles.value=l.queuedFiles.value.concat(W),u("added",W),a.autoUpload===!0&&l.upload())}function $(){I.value===!0&&l.upload()}function U(s,P,W){if(s===!0){const oe={type:"a",key:P,icon:p.iconSet.uploader[P],flat:!0,dense:!0};let X;return P==="add"?(oe.onClick=C,X=Z):oe.onClick=W,g(se,oe,X)}}function Z(){return g("input",{ref:f,class:"q-uploader__input overflow-hidden absolute-full",tabindex:-1,type:"file",title:"",accept:a.accept,multiple:a.multiple===!0?"multiple":void 0,capture:a.capture,onMousedown:qe,onClick:C,onChange:S})}function E(){return c.header!==void 0?c.header(H):[g("div",{class:"q-uploader__header-content column"},[g("div",{class:"flex flex-center no-wrap q-gutter-xs"},[U(l.queuedFiles.value.length!==0,"removeQueue",be),U(l.uploadedFiles.value.length!==0,"removeUploaded",K),l.isUploading.value===!0?g(Ut,{class:"q-uploader__spinner"}):null,g("div",{class:"col column justify-center"},[a.label!==void 0?g("div",{class:"q-uploader__title"},[a.label]):null,g("div",{class:"q-uploader__subtitle"},[A.value+" / "+T.value])]),U(ee.value,"add"),U(a.hideUploadBtn===!1&&I.value===!0,"upload",l.upload),U(l.isUploading.value,"clear",l.abort)])])]}function R(){return c.list!==void 0?c.list(H):l.files.value.map(s=>g("div",{key:s.__key,class:"q-uploader__file relative-position"+(a.noThumbnails!==!0&&s.__img!==void 0?" q-uploader__file--img":"")+(s.__status==="failed"?" q-uploader__file--failed":s.__status==="uploaded"?" q-uploader__file--uploaded":""),style:a.noThumbnails!==!0&&s.__img!==void 0?{backgroundImage:'url("'+s.__img.src+'")',backgroundSize:a.thumbnailFit}:null},[g("div",{class:"q-uploader__file-header row flex-center no-wrap"},[s.__status==="failed"?g(Me,{class:"q-uploader__file-status",name:p.iconSet.type.negative,color:"negative"}):null,g("div",{class:"q-uploader__file-header-content col"},[g("div",{class:"q-uploader__title"},[s.name]),g("div",{class:"q-uploader__subtitle row items-center no-wrap"},[s.__sizeLabel+" / "+s.__progressLabel])]),s.__status==="uploading"?g(za,{value:s.__progress,min:0,max:1,indeterminate:s.__progress===0}):g(se,{round:!0,dense:!0,flat:!0,icon:p.iconSet.uploader[s.__status==="uploaded"?"done":"clear"],onClick:()=>{ve(s)}})])]))}We(()=>{l.isUploading.value===!0&&l.abort(),l.files.value.length!==0&&we()});const H={};for(const s in l)jl(l[s])===!0?Kl(H,s,()=>l[s].value):H[s]=l[s];return Object.assign(H,{upload:$,reset:ae,removeUploadedFiles:K,removeQueuedFiles:be,removeFile:ve,pickFiles:C,addFiles:d}),Wl(H,{canAddFiles:()=>ee.value,canUpload:()=>I.value,uploadSizeLabel:()=>A.value,uploadProgressLabel:()=>T.value}),r({...l,upload:$,reset:ae,removeUploadedFiles:K,removeQueuedFiles:be,removeFile:ve,pickFiles:C,addFiles:d,canAddFiles:ee,canUpload:I,uploadSizeLabel:A,uploadProgressLabel:T}),()=>{const s=[g("div",{class:ne.value},E()),g("div",{class:"q-uploader__list scroll"},R()),V("uploader")];l.isBusy.value===!0&&s.push(g("div",{class:"q-uploader__overlay absolute-full flex flex-center"},[g(Ut)]));const P={ref:i,class:Q.value};return ee.value===!0&&Object.assign(P,{onDragover:x,onDragleave:y}),g("div",P,s)}}const Ra=()=>!0;function Cl(e){const r={};return e.forEach(n=>{r[n]=Ra}),r}const Oa=Cl(xl),Da=({name:e,props:r,emits:n,injectPlugin:a})=>pe({name:e,props:{...Ba,...r},emits:Gl(n)===!0?{...Oa,...n}:[...xl,...n],setup(c,{expose:u}){return $a(a,u)}});function Se(e){return typeof e=="function"?e:()=>e}const Ma="QUploader",Ta={url:[Function,String],method:{type:[Function,String],default:"POST"},fieldName:{type:[Function,String],default:()=>e=>e.name},headers:[Function,Array],formFields:[Function,Array],withCredentials:[Function,Boolean],sendRaw:[Function,Boolean],batch:[Function,Boolean],factory:Function},Ea=["factoryFailed","uploaded","failed","uploading"];function La({props:e,emit:r,helpers:n}){const a=B([]),c=B([]),u=B(0),k=v(()=>({url:Se(e.url),method:Se(e.method),headers:Se(e.headers),formFields:Se(e.formFields),fieldName:Se(e.fieldName),withCredentials:Se(e.withCredentials),sendRaw:Se(e.sendRaw),batch:Se(e.batch)})),p=v(()=>u.value>0),w=v(()=>c.value.length!==0);let F;function m(){a.value.forEach(l=>{l.abort()}),c.value.length!==0&&(F=!0)}function q(){const l=n.queuedFiles.value.slice(0);n.queuedFiles.value=[],k.value.batch(l)?i(l):l.forEach(C=>{i([C])})}function i(l){if(u.value++,typeof e.factory!="function"){f(l,{});return}const C=e.factory(l);if(!C)r("factoryFailed",new Error("QUploader: factory() does not return properly"),l),u.value--;else if(typeof C.catch=="function"&&typeof C.then=="function"){c.value.push(C);const d=x=>{n.isAlive()===!0&&(c.value=c.value.filter(y=>y!==C),c.value.length===0&&(F=!1),n.queuedFiles.value=n.queuedFiles.value.concat(l),l.forEach(y=>{n.updateFileStatus(y,"failed")}),r("factoryFailed",x,l),u.value--)};C.then(x=>{F===!0?d(new Error("Aborted")):n.isAlive()===!0&&(c.value=c.value.filter(y=>y!==C),f(l,x))}).catch(d)}else f(l,C||{})}function f(l,C){const d=new FormData,x=new XMLHttpRequest,y=(I,Q)=>C[I]!==void 0?Se(C[I])(Q):k.value[I](Q),D=y("url",l);if(!D){console.error("q-uploader: invalid or no URL specified"),u.value--;return}const V=y("formFields",l);V!==void 0&&V.forEach(I=>{d.append(I.name,I.value)});let z=0,h=0,M=0,G=0,T;x.upload.addEventListener("progress",I=>{if(T===!0)return;const Q=Math.min(G,I.loaded);n.uploadedSize.value+=Q-M,M=Q;let ne=M-h;for(let ae=z;ne>0&&ae<l.length;ae++){const K=l[ae];if(ne>K.size)ne-=K.size,z++,h+=K.size,n.updateFileStatus(K,"uploading",K.size);else{n.updateFileStatus(K,"uploading",ne);return}}},!1),x.onreadystatechange=()=>{x.readyState<4||(x.status&&x.status<400?(n.uploadedFiles.value=n.uploadedFiles.value.concat(l),l.forEach(I=>{n.updateFileStatus(I,"uploaded")}),r("uploaded",{files:l,xhr:x})):(T=!0,n.uploadedSize.value-=M,n.queuedFiles.value=n.queuedFiles.value.concat(l),l.forEach(I=>{n.updateFileStatus(I,"failed")}),r("failed",{files:l,xhr:x})),u.value--,a.value=a.value.filter(I=>I!==x))},x.open(y("method",l),D),y("withCredentials",l)===!0&&(x.withCredentials=!0);const A=y("headers",l);A!==void 0&&A.forEach(I=>{x.setRequestHeader(I.name,I.value)});const ee=y("sendRaw",l);l.forEach(I=>{n.updateFileStatus(I,"uploading",0),ee!==!0&&d.append(y("fieldName",I),I,I.name),I.xhr=x,I.__abort=()=>{x.abort()},G+=I.size}),r("uploading",{files:l,xhr:x}),a.value.push(x),ee===!0?x.send(new Blob(l)):x.send(d)}return{isUploading:p,isBusy:w,abort:m,upload:q}}const Ua={name:Ma,props:Ta,emits:Ea,injectPlugin:La},Na=Da(Ua),Qa=pe({name:"QField",inheritAttrs:!1,props:{..._t,tag:{type:String,default:"label"}},emits:rl,setup(){return sl(cl({tagProp:!0}))}}),Ha={xs:8,sm:10,md:14,lg:20,xl:24},ja=pe({name:"QChip",props:{...yt,...ol,dense:Boolean,icon:String,iconRight:String,iconRemove:String,iconSelected:String,label:[String,Number],color:String,textColor:String,modelValue:{type:Boolean,default:!0},selected:{type:Boolean,default:null},square:Boolean,outline:Boolean,clickable:Boolean,removable:Boolean,removeAriaLabel:String,tabindex:[String,Number],disable:Boolean,ripple:{type:[Boolean,Object],default:!0}},emits:["update:modelValue","update:selected","remove","click"],setup(e,{slots:r,emit:n}){const{proxy:{$q:a}}=he(),c=bt(e,a),u=ul(e,Ha),k=v(()=>e.selected===!0||e.icon!==void 0),p=v(()=>e.selected===!0?e.iconSelected||a.iconSet.chip.selected:e.icon),w=v(()=>e.iconRemove||a.iconSet.chip.remove),F=v(()=>e.disable===!1&&(e.clickable===!0||e.selected!==null)),m=v(()=>{const d=e.outline===!0&&e.color||e.textColor;return"q-chip row inline no-wrap items-center"+(e.outline===!1&&e.color!==void 0?` bg-${e.color}`:"")+(d?` text-${d} q-chip--colored`:"")+(e.disable===!0?" disabled":"")+(e.dense===!0?" q-chip--dense":"")+(e.outline===!0?" q-chip--outline":"")+(e.selected===!0?" q-chip--selected":"")+(F.value===!0?" q-chip--clickable cursor-pointer non-selectable q-hoverable":"")+(e.square===!0?" q-chip--square":"")+(c.value===!0?" q-chip--dark q-dark":"")}),q=v(()=>{const d=e.disable===!0?{tabindex:-1,"aria-disabled":"true"}:{tabindex:e.tabindex||0},x={...d,role:"button","aria-hidden":"false","aria-label":e.removeAriaLabel||a.lang.label.remove};return{chip:d,remove:x}});function i(d){d.keyCode===13&&f(d)}function f(d){e.disable||(n("update:selected",!e.selected),n("click",d))}function l(d){(d.keyCode===void 0||d.keyCode===13)&&(ye(d),e.disable===!1&&(n("update:modelValue",!1),n("remove")))}function C(){const d=[];F.value===!0&&d.push(g("div",{class:"q-focus-helper"})),k.value===!0&&d.push(g(Me,{class:"q-chip__icon q-chip__icon--left",name:p.value}));const x=e.label!==void 0?[g("div",{class:"ellipsis"},[e.label])]:void 0;return d.push(g("div",{class:"q-chip__content col row no-wrap items-center q-anchor--skip"},il(r.default,x))),e.iconRight&&d.push(g(Me,{class:"q-chip__icon q-chip__icon--right",name:e.iconRight})),e.removable===!0&&d.push(g(Me,{class:"q-chip__icon q-chip__icon--remove cursor-pointer",name:w.value,...q.value.remove,onClick:l,onKeyup:l})),d}return()=>{if(e.modelValue===!1)return;const d={class:m.value,style:u.value};return F.value===!0&&Object.assign(d,q.value.chip,{onClick:f,onKeyup:i}),dl("div",d,C(),"ripple",e.ripple!==!1&&e.disable!==!0,()=>[[Zl,e.ripple]])}}}),fe=1e3,Ka=["start","center","end","start-force","center-force","end-force"],ql=Array.prototype.filter,Wa=window.getComputedStyle(document.body).overflowAnchor===void 0?Jl:function(e,r){e!==null&&(e._qOverflowAnimationFrame!==void 0&&cancelAnimationFrame(e._qOverflowAnimationFrame),e._qOverflowAnimationFrame=requestAnimationFrame(()=>{if(e===null)return;e._qOverflowAnimationFrame=void 0;const n=e.children||[];ql.call(n,c=>c.dataset&&c.dataset.qVsAnchor!==void 0).forEach(c=>{delete c.dataset.qVsAnchor});const a=n[r];a?.dataset&&(a.dataset.qVsAnchor="")}))};function Ee(e,r){return e+r}function vt(e,r,n,a,c,u,k,p){const w=e===window?document.scrollingElement||document.documentElement:e,F=c===!0?"offsetWidth":"offsetHeight",m={scrollStart:0,scrollViewSize:-k-p,scrollMaxSize:0,offsetStart:-k,offsetEnd:-p};if(c===!0?(e===window?(m.scrollStart=window.pageXOffset||window.scrollX||document.body.scrollLeft||0,m.scrollViewSize+=document.documentElement.clientWidth):(m.scrollStart=w.scrollLeft,m.scrollViewSize+=w.clientWidth),m.scrollMaxSize=w.scrollWidth,u===!0&&(m.scrollStart=(pt===!0?m.scrollMaxSize-m.scrollViewSize:0)-m.scrollStart)):(e===window?(m.scrollStart=window.pageYOffset||window.scrollY||document.body.scrollTop||0,m.scrollViewSize+=document.documentElement.clientHeight):(m.scrollStart=w.scrollTop,m.scrollViewSize+=w.clientHeight),m.scrollMaxSize=w.scrollHeight),n!==null)for(let q=n.previousElementSibling;q!==null;q=q.previousElementSibling)q.classList.contains("q-virtual-scroll--skip")===!1&&(m.offsetStart+=q[F]);if(a!==null)for(let q=a.nextElementSibling;q!==null;q=q.nextElementSibling)q.classList.contains("q-virtual-scroll--skip")===!1&&(m.offsetEnd+=q[F]);if(r!==e){const q=w.getBoundingClientRect(),i=r.getBoundingClientRect();c===!0?(m.offsetStart+=i.left-q.left,m.offsetEnd-=i.width):(m.offsetStart+=i.top-q.top,m.offsetEnd-=i.height),e!==window&&(m.offsetStart+=m.scrollStart),m.offsetEnd+=m.scrollMaxSize-m.offsetStart}return m}function Jt(e,r,n,a){r==="end"&&(r=(e===window?document.body:e)[n===!0?"scrollWidth":"scrollHeight"]),e===window?n===!0?(a===!0&&(r=(pt===!0?document.body.scrollWidth-document.documentElement.clientWidth:0)-r),window.scrollTo(r,window.pageYOffset||window.scrollY||document.body.scrollTop||0)):window.scrollTo(window.pageXOffset||window.scrollX||document.body.scrollLeft||0,r):n===!0?(a===!0&&(r=(pt===!0?e.scrollWidth-e.offsetWidth:0)-r),e.scrollLeft=r):e.scrollTop=r}function je(e,r,n,a){if(n>=a)return 0;const c=r.length,u=Math.floor(n/fe),k=Math.floor((a-1)/fe)+1;let p=e.slice(u,k).reduce(Ee,0);return n%fe!==0&&(p-=r.slice(u*fe,n).reduce(Ee,0)),a%fe!==0&&a!==c&&(p-=r.slice(a,k*fe).reduce(Ee,0)),p}const Xa={virtualScrollSliceSize:{type:[Number,String],default:10},virtualScrollSliceRatioBefore:{type:[Number,String],default:1},virtualScrollSliceRatioAfter:{type:[Number,String],default:1},virtualScrollItemSize:{type:[Number,String],default:24},virtualScrollStickySizeStart:{type:[Number,String],default:0},virtualScrollStickySizeEnd:{type:[Number,String],default:0},tableColspan:[Number,String]},el={virtualScrollHorizontal:Boolean,onVirtualScroll:Function,...Xa};function Ya({virtualScrollLength:e,getVirtualScrollTarget:r,getVirtualScrollEl:n,virtualScrollItemSizeComputed:a}){const c=he(),{props:u,emit:k,proxy:p}=c,{$q:w}=p;let F,m,q,i=[],f;const l=B(0),C=B(0),d=B({}),x=B(null),y=B(null),D=B(null),V=B({from:0,to:0}),z=v(()=>u.tableColspan!==void 0?u.tableColspan:100);a===void 0&&(a=v(()=>u.virtualScrollItemSize));const h=v(()=>a.value+";"+u.virtualScrollHorizontal),M=v(()=>h.value+";"+u.virtualScrollSliceRatioBefore+";"+u.virtualScrollSliceRatioAfter);de(M,()=>{K()}),de(h,G);function G(){ae(m,!0)}function T(o){ae(o===void 0?m:o)}function A(o,S){const $=r();if($==null||$.nodeType===8)return;const U=vt($,n(),x.value,y.value,u.virtualScrollHorizontal,w.lang.rtl,u.virtualScrollStickySizeStart,u.virtualScrollStickySizeEnd);q!==U.scrollViewSize&&K(U.scrollViewSize),I($,U,Math.min(e.value-1,Math.max(0,parseInt(o,10)||0)),0,Ka.indexOf(S)!==-1?S:m!==-1&&o>m?"end":"start")}function ee(){const o=r();if(o==null||o.nodeType===8)return;const S=vt(o,n(),x.value,y.value,u.virtualScrollHorizontal,w.lang.rtl,u.virtualScrollStickySizeStart,u.virtualScrollStickySizeEnd),$=e.value-1,U=S.scrollMaxSize-S.offsetStart-S.offsetEnd-C.value;if(F===S.scrollStart)return;if(S.scrollMaxSize<=0){I(o,S,0,0);return}q!==S.scrollViewSize&&K(S.scrollViewSize),Q(V.value.from);const Z=Math.floor(S.scrollMaxSize-Math.max(S.scrollViewSize,S.offsetEnd)-Math.min(f[$],S.scrollViewSize/2));if(Z>0&&Math.ceil(S.scrollStart)>=Z){I(o,S,$,S.scrollMaxSize-S.offsetEnd-i.reduce(Ee,0));return}let E=0,R=S.scrollStart-S.offsetStart,H=R;if(R<=U&&R+S.scrollViewSize>=l.value)R-=l.value,E=V.value.from,H=R;else for(let s=0;R>=i[s]&&E<$;s++)R-=i[s],E+=fe;for(;R>0&&E<$;)R-=f[E],R>-S.scrollViewSize?(E++,H=R):H=f[E]+R;I(o,S,E,H)}function I(o,S,$,U,Z){const E=typeof Z=="string"&&Z.indexOf("-force")!==-1,R=E===!0?Z.replace("-force",""):Z,H=R!==void 0?R:"start";let s=Math.max(0,$-d.value[H]),P=s+d.value.total;P>e.value&&(P=e.value,s=Math.max(0,P-d.value.total)),F=S.scrollStart;const W=s!==V.value.from||P!==V.value.to;if(W===!1&&R===void 0){_e($);return}const{activeElement:oe}=document,X=D.value;W===!0&&X!==null&&X!==oe&&X.contains(oe)===!0&&(X.addEventListener("focusout",ne),setTimeout(()=>{X?.removeEventListener("focusout",ne)})),Wa(X,$-s);const ke=R!==void 0?f.slice(s,$).reduce(Ee,0):0;if(W===!0){const Fe=P>=V.value.from&&s<=V.value.to?V.value.to:P;V.value={from:s,to:Fe},l.value=je(i,f,0,s),C.value=je(i,f,P,e.value),requestAnimationFrame(()=>{V.value.to!==P&&F===S.scrollStart&&(V.value={from:V.value.from,to:P},C.value=je(i,f,P,e.value))})}requestAnimationFrame(()=>{if(F!==S.scrollStart)return;W===!0&&Q(s);const Fe=f.slice(s,$).reduce(Ee,0),Ve=Fe+S.offsetStart+l.value,Xe=Ve+f[$];let Le=Ve+U;if(R!==void 0){const it=Fe-ke,Ue=S.scrollStart+it;Le=E!==!0&&Ue<Ve&&Xe<Ue+S.scrollViewSize?Ue:R==="end"?Xe-S.scrollViewSize:Ve-(R==="start"?0:Math.round((S.scrollViewSize-f[$])/2))}F=Le,Jt(o,Le,u.virtualScrollHorizontal,w.lang.rtl),_e($)})}function Q(o){const S=D.value;if(S){const $=ql.call(S.children,s=>s.classList&&s.classList.contains("q-virtual-scroll--skip")===!1),U=$.length,Z=u.virtualScrollHorizontal===!0?s=>s.getBoundingClientRect().width:s=>s.offsetHeight;let E=o,R,H;for(let s=0;s<U;){for(R=Z($[s]),s++;s<U&&$[s].classList.contains("q-virtual-scroll--with-prev")===!0;)R+=Z($[s]),s++;H=R-f[E],H!==0&&(f[E]+=H,i[Math.floor(E/fe)]+=H),E++}}}function ne(){D.value?.focus()}function ae(o,S){const $=1*a.value;(S===!0||Array.isArray(f)===!1)&&(f=[]);const U=f.length;f.length=e.value;for(let E=e.value-1;E>=U;E--)f[E]=$;const Z=Math.floor((e.value-1)/fe);i=[];for(let E=0;E<=Z;E++){let R=0;const H=Math.min((E+1)*fe,e.value);for(let s=E*fe;s<H;s++)R+=f[s];i.push(R)}m=-1,F=void 0,l.value=je(i,f,0,V.value.from),C.value=je(i,f,V.value.to,e.value),o>=0?(Q(V.value.from),xe(()=>{A(o)})):ve()}function K(o){if(o===void 0&&typeof window<"u"){const R=r();R!=null&&R.nodeType!==8&&(o=vt(R,n(),x.value,y.value,u.virtualScrollHorizontal,w.lang.rtl,u.virtualScrollStickySizeStart,u.virtualScrollStickySizeEnd).scrollViewSize)}q=o;const S=parseFloat(u.virtualScrollSliceRatioBefore)||0,$=parseFloat(u.virtualScrollSliceRatioAfter)||0,U=1+S+$,Z=o===void 0||o<=0?1:Math.ceil(o/a.value),E=Math.max(1,Z,Math.ceil((u.virtualScrollSliceSize>0?u.virtualScrollSliceSize:10)/U));d.value={total:Math.ceil(E*U),start:Math.ceil(E*S),center:Math.ceil(E*(.5+S)),end:Math.ceil(E*(1+S)),view:Z}}function be(o,S){const $=u.virtualScrollHorizontal===!0?"width":"height",U={["--q-virtual-scroll-item-"+$]:a.value+"px"};return[o==="tbody"?g(o,{class:"q-virtual-scroll__padding",key:"before",ref:x},[g("tr",[g("td",{style:{[$]:`${l.value}px`,...U},colspan:z.value})])]):g(o,{class:"q-virtual-scroll__padding",key:"before",ref:x,style:{[$]:`${l.value}px`,...U}}),g(o,{class:"q-virtual-scroll__content",key:"content",ref:D,tabindex:-1},S.flat()),o==="tbody"?g(o,{class:"q-virtual-scroll__padding",key:"after",ref:y},[g("tr",[g("td",{style:{[$]:`${C.value}px`,...U},colspan:z.value})])]):g(o,{class:"q-virtual-scroll__padding",key:"after",ref:y,style:{[$]:`${C.value}px`,...U}})]}function _e(o){m!==o&&(u.onVirtualScroll!==void 0&&k("virtualScroll",{index:o,from:V.value.from,to:V.value.to-1,direction:o<m?"decrease":"increase",ref:p}),m=o)}K();const ve=ea(ee,w.platform.is.ios===!0?120:35);fl(()=>{K()});let we=!1;return ta(()=>{we=!0}),la(()=>{if(we!==!0)return;const o=r();F!==void 0&&o!==void 0&&o!==null&&o.nodeType!==8?Jt(o,F,u.virtualScrollHorizontal,w.lang.rtl):A(m)}),We(()=>{ve.cancel()}),Object.assign(p,{scrollTo:A,reset:G,refresh:T}),{virtualScrollSliceRange:V,virtualScrollSliceSizeComputed:d,setVirtualScrollSize:K,onVirtualScrollEvt:ve,localResetVirtualScroll:ae,padVirtualScroll:be,scrollTo:A,reset:G,refresh:T}}const tl=e=>["add","add-unique","toggle"].includes(e),Ga=".*+?^${}()|[]\\",Za=Object.keys(_t);function mt(e,r){if(typeof e=="function")return e;const n=e!==void 0?e:r;return a=>a!==null&&typeof a=="object"&&n in a?a[n]:a}const ll=pe({name:"QSelect",inheritAttrs:!1,props:{...el,...aa,..._t,modelValue:{required:!0},multiple:Boolean,displayValue:[String,Number],displayValueHtml:Boolean,dropdownIcon:String,options:{type:Array,default:()=>[]},optionValue:[Function,String],optionLabel:[Function,String],optionDisable:[Function,String],hideSelected:Boolean,hideDropdownIcon:Boolean,fillInput:Boolean,maxValues:[Number,String],optionsDense:Boolean,optionsDark:{type:Boolean,default:null},optionsSelectedClass:String,optionsHtml:Boolean,optionsCover:Boolean,menuShrink:Boolean,menuAnchor:String,menuSelf:String,menuOffset:Array,popupContentClass:String,popupContentStyle:[String,Array,Object],popupNoRouteDismiss:Boolean,useInput:Boolean,useChips:Boolean,newValueMode:{type:String,validator:tl},mapOptions:Boolean,emitValue:Boolean,disableTabSelection:Boolean,inputDebounce:{type:[Number,String],default:500},inputClass:[Array,String,Object],inputStyle:[Array,String,Object],tabindex:{type:[String,Number],default:0},autocomplete:String,transitionShow:{},transitionHide:{},transitionDuration:{},behavior:{type:String,validator:e=>["default","menu","dialog"].includes(e),default:"default"},virtualScrollItemSize:el.virtualScrollItemSize.type,onNewValue:Function,onFilter:Function},emits:[...rl,"add","remove","inputValue","keyup","keypress","keydown","popupShow","popupHide","filterAbort"],setup(e,{slots:r,emit:n}){const{proxy:a}=he(),{$q:c}=a,u=B(!1),k=B(!1),p=B(-1),w=B(""),F=B(!1),m=B(!1);let q=null,i=null,f,l,C,d=null,x,y,D,V;const z=B(null),h=B(null),M=B(null),G=B(null),T=B(null),A=na(e),ee=oa(Dt),I=v(()=>Array.isArray(e.options)?e.options.length:0),Q=v(()=>e.virtualScrollItemSize===void 0?e.optionsDense===!0?24:48:e.virtualScrollItemSize),{virtualScrollSliceRange:ne,virtualScrollSliceSizeComputed:ae,localResetVirtualScroll:K,padVirtualScroll:be,onVirtualScrollEvt:_e,scrollTo:ve,setVirtualScrollSize:we}=Ya({virtualScrollLength:I,getVirtualScrollTarget:Il,getVirtualScrollEl:Rt,virtualScrollItemSizeComputed:Q}),o=cl(),S=v(()=>{const t=e.mapOptions===!0&&e.multiple!==!0,b=e.modelValue!==void 0&&(e.modelValue!==null||t===!0)?e.multiple===!0&&Array.isArray(e.modelValue)?e.modelValue:[e.modelValue]:[];if(e.mapOptions===!0&&Array.isArray(e.options)===!0){const _=e.mapOptions===!0&&f!==void 0?f:[],O=b.map(j=>zl(j,_));return e.modelValue===null&&t===!0?O.filter(j=>j!==null):O}return b}),$=v(()=>{const t={};return Za.forEach(b=>{const _=e[b];_!==void 0&&(t[b]=_)}),t}),U=v(()=>e.optionsDark===null?o.isDark.value:e.optionsDark),Z=v(()=>Nt(S.value)),E=v(()=>{let t="q-field__input q-placeholder col";return e.hideSelected===!0||S.value.length===0?[t,e.inputClass]:(t+=" q-field__input--padding",e.inputClass===void 0?t:[t,e.inputClass])}),R=v(()=>(e.virtualScrollHorizontal===!0?"q-virtual-scroll--horizontal":"")+(e.popupContentClass?" "+e.popupContentClass:"")),H=v(()=>I.value===0),s=v(()=>S.value.map(t=>re.value(t)).join(", ")),P=v(()=>e.displayValue!==void 0?e.displayValue:s.value),W=v(()=>e.optionsHtml===!0?()=>!0:t=>t?.html===!0),oe=v(()=>e.displayValueHtml===!0||e.displayValue===void 0&&(e.optionsHtml===!0||S.value.some(W.value))),X=v(()=>o.focused.value===!0?e.tabindex:-1),ke=v(()=>{const t={tabindex:e.tabindex,role:"combobox","aria-label":e.label,"aria-readonly":e.readonly===!0?"true":"false","aria-autocomplete":e.useInput===!0?"list":"none","aria-expanded":u.value===!0?"true":"false","aria-controls":`${o.targetUid.value}_lb`};return p.value>=0&&(t["aria-activedescendant"]=`${o.targetUid.value}_${p.value}`),t}),Fe=v(()=>({id:`${o.targetUid.value}_lb`,role:"listbox","aria-multiselectable":e.multiple===!0?"true":"false"})),Ve=v(()=>S.value.map((t,b)=>({index:b,opt:t,html:W.value(t),selected:!0,removeAtIndex:Vl,toggleOption:ze,tabindex:X.value}))),Xe=v(()=>{if(I.value===0)return[];const{from:t,to:b}=ne.value;return e.options.slice(t,b).map((_,O)=>{const j=Ae.value(_)===!0,N=st(_)===!0,le=t+O,J={clickable:!0,active:N,activeClass:Ue.value,manualFocus:!0,focused:!1,disable:j,tabindex:-1,dense:e.optionsDense,dark:U.value,role:"option","aria-selected":N===!0?"true":"false",id:`${o.targetUid.value}_${le}`,onClick:()=>{ze(_)}};return j!==!0&&(p.value===le&&(J.focused=!0),c.platform.is.desktop===!0&&(J.onMousemove=()=>{u.value===!0&&Pe(le)})),{index:le,opt:_,html:W.value(_),label:re.value(_),selected:J.active,focused:J.focused,toggleOption:ze,setOptionIndex:Pe,itemProps:J}})}),Le=v(()=>e.dropdownIcon!==void 0?e.dropdownIcon:c.iconSet.arrow.dropdown),it=v(()=>e.optionsCover===!1&&e.outlined!==!0&&e.standout!==!0&&e.borderless!==!0&&e.rounded!==!0),Ue=v(()=>e.optionsSelectedClass!==void 0?e.optionsSelectedClass:e.color!==void 0?`text-${e.color}`:""),me=v(()=>mt(e.optionValue,"value")),re=v(()=>mt(e.optionLabel,"label")),Ae=v(()=>mt(e.optionDisable,"disable")),Ye=v(()=>S.value.map(me.value)),Fl=v(()=>{const t={onInput:Dt,onChange:ee,onKeydown:$t,onKeyup:Pt,onKeypress:Bt,onFocus:It,onClick(b){l===!0&&qe(b)}};return t.onCompositionstart=t.onCompositionupdate=t.onCompositionend=ee,t});de(S,t=>{f=t,e.useInput===!0&&e.fillInput===!0&&e.multiple!==!0&&o.innerLoading.value!==!0&&(k.value!==!0&&u.value!==!0||Z.value!==!0)&&(C!==!0&&Oe(),(k.value===!0||u.value===!0)&&Be(""))},{immediate:!0}),de(()=>e.fillInput,Oe),de(u,ct),de(I,Ul);function Vt(t){return e.emitValue===!0?me.value(t):t}function rt(t){if(t!==-1&&t<S.value.length)if(e.multiple===!0){const b=e.modelValue.slice();n("remove",{index:t,value:b.splice(t,1)[0]}),n("update:modelValue",b)}else n("update:modelValue",null)}function Vl(t){rt(t),o.focus()}function zt(t,b){const _=Vt(t);if(e.multiple!==!0){e.fillInput===!0&&Ne(re.value(t),!0,!0),n("update:modelValue",_);return}if(S.value.length===0){n("add",{index:0,value:_}),n("update:modelValue",e.multiple===!0?[_]:_);return}if(b===!0&&st(t)===!0||e.maxValues!==void 0&&e.modelValue.length>=e.maxValues)return;const O=e.modelValue.slice();n("add",{index:O.length,value:_}),O.push(_),n("update:modelValue",O)}function ze(t,b){if(o.editable.value!==!0||t===void 0||Ae.value(t)===!0)return;const _=me.value(t);if(e.multiple!==!0){b!==!0&&(Ne(e.fillInput===!0?re.value(t):"",!0,!0),Ie()),h.value?.focus(),(S.value.length===0||Qe(me.value(S.value[0]),_)!==!0)&&n("update:modelValue",e.emitValue===!0?_:t);return}if((l!==!0||F.value===!0)&&o.focus(),It(),S.value.length===0){const N=e.emitValue===!0?_:t;n("add",{index:0,value:N}),n("update:modelValue",e.multiple===!0?[N]:N);return}const O=e.modelValue.slice(),j=Ye.value.findIndex(N=>Qe(N,_));if(j!==-1)n("remove",{index:j,value:O.splice(j,1)[0]});else{if(e.maxValues!==void 0&&O.length>=e.maxValues)return;const N=e.emitValue===!0?_:t;n("add",{index:O.length,value:N}),O.push(N)}n("update:modelValue",O)}function Pe(t){if(c.platform.is.desktop!==!0)return;const b=t!==-1&&t<I.value?t:-1;p.value!==b&&(p.value=b)}function Ge(t=1,b){if(u.value===!0){let _=p.value;do _=Yt(_+t,-1,I.value-1);while(_!==-1&&_!==p.value&&Ae.value(e.options[_])===!0);p.value!==_&&(Pe(_),ve(_),b!==!0&&e.useInput===!0&&e.fillInput===!0&&Ze(_>=0?re.value(e.options[_]):x,!0))}}function zl(t,b){const _=O=>Qe(me.value(O),t);return e.options.find(_)||b.find(_)||t}function st(t){const b=me.value(t);return Ye.value.find(_=>Qe(_,b))!==void 0}function It(t){e.useInput===!0&&h.value!==null&&(t===void 0||h.value===t.target&&t.target.value===s.value)&&h.value.select()}function At(t){sa(t,27)===!0&&u.value===!0&&(qe(t),Ie(),Oe()),n("keyup",t)}function Pt(t){const{value:b}=t.target;if(t.keyCode!==void 0){At(t);return}if(t.target.value="",q!==null&&(clearTimeout(q),q=null),i!==null&&(clearTimeout(i),i=null),Oe(),typeof b=="string"&&b.length!==0){const _=b.toLocaleLowerCase(),O=N=>{const le=e.options.find(J=>String(N.value(J)).toLocaleLowerCase()===_);return le===void 0?!1:(S.value.indexOf(le)===-1?ze(le):Ie(),!0)},j=N=>{O(me)!==!0&&N!==!0&&O(re)!==!0&&Be(b,!0,()=>j(!0))};j()}else o.clearValue(t)}function Bt(t){n("keypress",t)}function $t(t){if(n("keydown",t),ua(t)===!0)return;const b=w.value.length!==0&&(e.newValueMode!==void 0||e.onNewValue!==void 0),_=t.shiftKey!==!0&&e.disableTabSelection!==!0&&e.multiple!==!0&&(p.value!==-1||b===!0);if(t.keyCode===27){ft(t);return}if(t.keyCode===9&&_===!1){$e();return}if(t.target===void 0||t.target.id!==o.targetUid.value||o.editable.value!==!0)return;if(t.keyCode===40&&o.innerLoading.value!==!0&&u.value===!1){ye(t),Re();return}if(t.keyCode===8&&(e.useChips===!0||e.clearable===!0)&&e.hideSelected!==!0&&w.value.length===0){e.multiple===!0&&Array.isArray(e.modelValue)===!0?rt(e.modelValue.length-1):e.multiple!==!0&&e.modelValue!==null&&n("update:modelValue",null);return}(t.keyCode===35||t.keyCode===36)&&(typeof w.value!="string"||w.value.length===0)&&(ye(t),p.value=-1,Ge(t.keyCode===36?1:-1,e.multiple)),(t.keyCode===33||t.keyCode===34)&&ae.value!==void 0&&(ye(t),p.value=Math.max(-1,Math.min(I.value,p.value+(t.keyCode===33?-1:1)*ae.value.view)),Ge(t.keyCode===33?1:-1,e.multiple)),(t.keyCode===38||t.keyCode===40)&&(ye(t),Ge(t.keyCode===38?-1:1,e.multiple));const O=I.value;if((D===void 0||V<Date.now())&&(D=""),O>0&&e.useInput!==!0&&t.key!==void 0&&t.key.length===1&&t.altKey===!1&&t.ctrlKey===!1&&t.metaKey===!1&&(t.keyCode!==32||D.length!==0)){u.value!==!0&&Re(t);const j=t.key.toLocaleLowerCase(),N=D.length===1&&D[0]===j;V=Date.now()+1500,N===!1&&(ye(t),D+=j);const le=new RegExp("^"+D.split("").map(dt=>Ga.indexOf(dt)!==-1?"\\"+dt:dt).join(".*"),"i");let J=p.value;if(N===!0||J<0||le.test(re.value(e.options[J]))!==!0)do J=Yt(J+1,-1,O-1);while(J!==p.value&&(Ae.value(e.options[J])===!0||le.test(re.value(e.options[J]))!==!0));p.value!==J&&xe(()=>{Pe(J),ve(J),J>=0&&e.useInput===!0&&e.fillInput===!0&&Ze(re.value(e.options[J]),!0)});return}if(!(t.keyCode!==13&&(t.keyCode!==32||e.useInput===!0||D!=="")&&(t.keyCode!==9||_===!1))){if(t.keyCode!==9&&ye(t),p.value!==-1&&p.value<O){ze(e.options[p.value]);return}if(b===!0){const j=(N,le)=>{if(le){if(tl(le)!==!0)return}else le=e.newValueMode;if(Ne("",e.multiple!==!0,!0),N==null)return;(le==="toggle"?ze:zt)(N,le==="add-unique"),e.multiple!==!0&&(h.value?.focus(),Ie())};if(e.onNewValue!==void 0?n("newValue",w.value,j):j(w.value),e.multiple!==!0)return}u.value===!0?$e():o.innerLoading.value!==!0&&Re()}}function Rt(){return l===!0?T.value:M.value!==null&&M.value.contentEl!==null?M.value.contentEl:void 0}function Il(){return Rt()}function Al(){return e.hideSelected===!0?[]:r["selected-item"]!==void 0?Ve.value.map(t=>r["selected-item"](t)).slice():r.selected!==void 0?[].concat(r.selected()):e.useChips===!0?Ve.value.map((t,b)=>g(ja,{key:"option-"+b,removable:o.editable.value===!0&&Ae.value(t.opt)!==!0,dense:!0,textColor:e.color,tabindex:X.value,onRemove(){t.removeAtIndex(b)}},()=>g("span",{class:"ellipsis",[t.html===!0?"innerHTML":"textContent"]:re.value(t.opt)}))):[g("span",{class:"ellipsis",[oe.value===!0?"innerHTML":"textContent"]:P.value})]}function Ot(){if(H.value===!0)return r["no-option"]!==void 0?r["no-option"]({inputValue:w.value}):void 0;const t=r.option!==void 0?r.option:_=>g(Sl,{key:_.index,..._.itemProps},()=>g(lt,()=>g(at,()=>g("span",{[_.html===!0?"innerHTML":"textContent"]:_.label}))));let b=be("div",Xe.value.map(t));return r["before-options"]!==void 0&&(b=r["before-options"]().concat(b)),ml(r["after-options"],b)}function Pl(t,b){const _=b===!0?{...ke.value,...o.splitAttrs.attributes.value}:void 0,O={ref:b===!0?h:void 0,key:"i_t",class:E.value,style:e.inputStyle,value:w.value!==void 0?w.value:"",type:"search",..._,id:b===!0?o.targetUid.value:void 0,maxlength:e.maxlength,autocomplete:e.autocomplete,"data-autofocus":t===!0||e.autofocus===!0||void 0,disabled:e.disable===!0,readonly:e.readonly===!0,...Fl.value};return t!==!0&&l===!0&&(Array.isArray(O.class)===!0?O.class=[...O.class,"no-pointer-events"]:O.class+=" no-pointer-events"),g("input",O)}function Dt(t){q!==null&&(clearTimeout(q),q=null),i!==null&&(clearTimeout(i),i=null),!(t&&t.target&&t.target.qComposing===!0)&&(Ze(t.target.value||""),C=!0,x=w.value,o.focused.value!==!0&&(l!==!0||F.value===!0)&&o.focus(),e.onFilter!==void 0&&(q=setTimeout(()=>{q=null,Be(w.value)},e.inputDebounce)))}function Ze(t,b){w.value!==t&&(w.value=t,b===!0||e.inputDebounce===0||e.inputDebounce==="0"?n("inputValue",t):i=setTimeout(()=>{i=null,n("inputValue",t)},e.inputDebounce))}function Ne(t,b,_){C=_!==!0,e.useInput===!0&&(Ze(t,!0),(b===!0||_!==!0)&&(x=t),b!==!0&&Be(t))}function Be(t,b,_){if(e.onFilter===void 0||b!==!0&&o.focused.value!==!0)return;o.innerLoading.value===!0?n("filterAbort"):(o.innerLoading.value=!0,m.value=!0),t!==""&&e.multiple!==!0&&S.value.length!==0&&C!==!0&&t===re.value(S.value[0])&&(t="");const O=setTimeout(()=>{u.value===!0&&(u.value=!1)},10);d!==null&&clearTimeout(d),d=O,n("filter",t,(j,N)=>{(b===!0||o.focused.value===!0)&&d===O&&(clearTimeout(d),typeof j=="function"&&j(),m.value=!1,xe(()=>{o.innerLoading.value=!1,o.editable.value===!0&&(b===!0?u.value===!0&&Ie():u.value===!0?ct(!0):u.value=!0),typeof N=="function"&&xe(()=>{N(a)}),typeof _=="function"&&xe(()=>{_(a)})}))},()=>{o.focused.value===!0&&d===O&&(clearTimeout(d),o.innerLoading.value=!1,m.value=!1),u.value===!0&&(u.value=!1)})}function Bl(){return g(wa,{ref:M,class:R.value,style:e.popupContentStyle,modelValue:u.value,fit:e.menuShrink!==!0,cover:e.optionsCover===!0&&H.value!==!0&&e.useInput!==!0,anchor:e.menuAnchor,self:e.menuSelf,offset:e.menuOffset,dark:U.value,noParentEvent:!0,noRefocus:!0,noFocus:!0,noRouteDismiss:e.popupNoRouteDismiss,square:it.value,transitionShow:e.transitionShow,transitionHide:e.transitionHide,transitionDuration:e.transitionDuration,separateClosePopup:!0,...Fe.value,onScrollPassive:_e,onBeforeShow:Tt,onBeforeHide:$l,onShow:Rl},Ot)}function $l(t){Et(t),$e()}function Rl(){we()}function Ol(t){qe(t),h.value?.focus(),F.value=!0,window.scrollTo(window.pageXOffset||window.scrollX||document.body.scrollLeft||0,0)}function Dl(t){qe(t),xe(()=>{F.value=!1})}function Ml(){const t=[g(Qa,{class:`col-auto ${o.fieldClass.value}`,...$.value,for:o.targetUid.value,dark:U.value,square:!0,loading:m.value,itemAligned:!1,filled:!0,stackLabel:w.value.length!==0,...o.splitAttrs.listeners.value,onFocus:Ol,onBlur:Dl},{...r,rawControl:()=>o.getControl(!0),before:void 0,after:void 0})];return u.value===!0&&t.push(g("div",{ref:T,class:R.value+" scroll",style:e.popupContentStyle,...Fe.value,onClick:ft,onScrollPassive:_e},Ot())),g(vl,{ref:G,modelValue:k.value,position:e.useInput===!0?"top":void 0,transitionShow:y,transitionHide:e.transitionHide,transitionDuration:e.transitionDuration,noRouteDismiss:e.popupNoRouteDismiss,onBeforeShow:Tt,onBeforeHide:Tl,onHide:El,onShow:Ll},()=>g("div",{class:"q-select__dialog"+(U.value===!0?" q-select__dialog--dark q-dark":"")+(F.value===!0?" q-select__dialog--focused":"")},t))}function Tl(t){Et(t),G.value!==null&&G.value.__updateRefocusTarget(o.rootRef.value.querySelector(".q-field__native > [tabindex]:last-child")),o.focused.value=!1}function El(t){Ie(),o.focused.value===!1&&n("blur",t),Oe()}function Ll(){const t=document.activeElement;(t===null||t.id!==o.targetUid.value)&&h.value!==null&&h.value!==t&&h.value.focus(),we()}function $e(){k.value!==!0&&(p.value=-1,u.value===!0&&(u.value=!1),o.focused.value===!1&&(d!==null&&(clearTimeout(d),d=null),o.innerLoading.value===!0&&(n("filterAbort"),o.innerLoading.value=!1,m.value=!1)))}function Re(t){o.editable.value===!0&&(l===!0?(o.onControlFocusin(t),k.value=!0,xe(()=>{o.focus()})):o.focus(),e.onFilter!==void 0?Be(w.value):(H.value!==!0||r["no-option"]!==void 0)&&(u.value=!0))}function Ie(){k.value=!1,$e()}function Oe(){e.useInput===!0&&Ne(e.multiple!==!0&&e.fillInput===!0&&S.value.length!==0&&re.value(S.value[0])||"",!0,!0)}function ct(t){let b=-1;if(t===!0){if(S.value.length!==0){const _=me.value(S.value[0]);b=e.options.findIndex(O=>Qe(me.value(O),_))}K(b)}Pe(b)}function Ul(t,b){u.value===!0&&o.innerLoading.value===!1&&(K(-1,!0),xe(()=>{u.value===!0&&o.innerLoading.value===!1&&(t>b?K():ct(!0))}))}function Mt(){k.value===!1&&M.value!==null&&M.value.updatePosition()}function Tt(t){t!==void 0&&qe(t),n("popupShow",t),o.hasPopupOpen=!0,o.onControlFocusin(t)}function Et(t){t!==void 0&&qe(t),n("popupHide",t),o.hasPopupOpen=!1,o.onControlFocusout(t)}function Lt(){l=c.platform.is.mobile!==!0&&e.behavior!=="dialog"?!1:e.behavior!=="menu"&&(e.useInput===!0?r["no-option"]!==void 0||e.onFilter!==void 0||H.value===!1:!0),y=c.platform.is.ios===!0&&l===!0&&e.useInput===!0?"fade":e.transitionShow}return ia(Lt),ra(Mt),Lt(),We(()=>{q!==null&&clearTimeout(q),i!==null&&clearTimeout(i)}),Object.assign(a,{showPopup:Re,hidePopup:Ie,removeAtIndex:rt,add:zt,toggleOption:ze,getOptionIndex:()=>p.value,setOptionIndex:Pe,moveOptionSelection:Ge,filter:Be,updateMenuPosition:Mt,updateInputValue:Ne,isOptionSelected:st,getEmittingOptionValue:Vt,isOptionDisabled:(...t)=>Ae.value.apply(null,t)===!0,getOptionValue:(...t)=>me.value.apply(null,t),getOptionLabel:(...t)=>re.value.apply(null,t)}),Object.assign(o,{innerValue:S,fieldClass:v(()=>`q-select q-field--auto-height q-select--with${e.useInput!==!0?"out":""}-input q-select--with${e.useChips!==!0?"out":""}-chips q-select--${e.multiple===!0?"multiple":"single"}`),inputRef:z,targetRef:h,hasValue:Z,showPopup:Re,floatingLabel:v(()=>e.hideSelected!==!0&&Z.value===!0||typeof w.value=="number"||w.value.length!==0||Nt(e.displayValue)),getControlChild:()=>{if(o.editable.value!==!1&&(k.value===!0||H.value!==!0||r["no-option"]!==void 0))return l===!0?Ml():Bl();o.hasPopupOpen===!0&&(o.hasPopupOpen=!1)},controlEvents:{onFocusin(t){o.onControlFocusin(t)},onFocusout(t){o.onControlFocusout(t,()=>{Oe(),$e()})},onClick(t){if(ft(t),l!==!0&&u.value===!0){$e(),h.value?.focus();return}Re(t)}},getControl:t=>{const b=Al(),_=t===!0||k.value!==!0||l!==!0;if(e.useInput===!0)b.push(Pl(t,_));else if(o.editable.value===!0){const j=_===!0?ke.value:void 0;b.push(g("input",{ref:_===!0?h:void 0,key:"d_t",class:"q-select__focus-target",id:_===!0?o.targetUid.value:void 0,value:P.value,readonly:!0,"data-autofocus":t===!0||e.autofocus===!0||void 0,...j,onKeydown:$t,onKeyup:At,onKeypress:Bt})),_===!0&&typeof e.autocomplete=="string"&&e.autocomplete.length!==0&&b.push(g("input",{class:"q-select__autocomplete-input",autocomplete:e.autocomplete,tabindex:-1,onKeyup:Pt}))}if(A.value!==void 0&&e.disable!==!0&&Ye.value.length!==0){const j=Ye.value.map(N=>g("option",{value:N,selected:!0}));b.push(g("select",{class:"hidden",name:A.value,multiple:e.multiple},j))}const O=e.useInput===!0||_!==!0?void 0:o.splitAttrs.attributes.value;return g("div",{class:"q-field__native row items-center",...O,...o.splitAttrs.listeners.value},b)},getInnerAppend:()=>e.loading!==!0&&m.value!==!0&&e.hideDropdownIcon!==!0?[g(Me,{class:"q-select__dropdown-icon"+(u.value===!0?" rotate-180":""),name:Le.value})]:null}),sl(o)}});function Ft(){const{emit:e,proxy:r}=he(),n=B(null);function a(){n.value.show()}function c(){n.value.hide()}function u(p){e("ok",p),c()}function k(){e("hide")}return Object.assign(r,{show:a,hide:c}),{dialogRef:n,onDialogHide:k,onDialogOK:u,onDialogCancel:c}}const kl=["ok","hide"];Ft.emits=kl;Ft.emitsObject=Cl(kl);const Ja=pe({name:"QCarouselSlide",props:{...pa,imgSrc:String},setup(e,{slots:r}){const n=v(()=>e.imgSrc?{backgroundImage:`url("${e.imgSrc}")`}:{});return()=>g("div",{class:"q-carousel__slide",style:n.value},St(r.default))}}),en=pe({name:"QCarouselControl",props:{position:{type:String,default:"bottom-right",validator:e=>["top-right","top-left","bottom-right","bottom-left","top","right","bottom","left"].includes(e)},offset:{type:Array,default:()=>[18,18],validator:e=>e.length===2}},setup(e,{slots:r}){const n=v(()=>`q-carousel__control absolute absolute-${e.position}`),a=v(()=>({margin:`${e.offset[1]}px ${e.offset[0]}px`}));return()=>g("div",{class:n.value,style:a.value},St(r.default))}});let Ke=0;const tn={fullscreen:Boolean,noRouteFullscreenExit:Boolean},ln=["update:fullscreen","fullscreen"];function an(){const e=he(),{props:r,emit:n,proxy:a}=e;let c,u,k;const p=B(!1);ca(e)===!0&&de(()=>a.$route.fullPath,()=>{r.noRouteFullscreenExit!==!0&&m()}),de(()=>r.fullscreen,q=>{p.value!==q&&w()}),de(p,q=>{n("update:fullscreen",q),n("fullscreen",q)});function w(){p.value===!0?m():F()}function F(){p.value!==!0&&(p.value=!0,k=a.$el.parentNode,k.replaceChild(u,a.$el),document.body.appendChild(a.$el),Ke++,Ke===1&&document.body.classList.add("q-body--fullscreen-mixin"),c={handler:m},Qt.add(c))}function m(){p.value===!0&&(c!==void 0&&(Qt.remove(c),c=void 0),k.replaceChild(a.$el,u),p.value=!1,Ke=Math.max(0,Ke-1),Ke===0&&(document.body.classList.remove("q-body--fullscreen-mixin"),a.$el.scrollIntoView!==void 0&&setTimeout(()=>{a.$el.scrollIntoView()})))}return fl(()=>{u=document.createElement("span")}),ot(()=>{r.fullscreen===!0&&F()}),We(m),Object.assign(a,{toggleFullscreen:w,setFullscreen:F,exitFullscreen:m}),{inFullscreen:p,toggleFullscreen:w}}const nn=["top","right","bottom","left"],on=["regular","flat","outline","push","unelevated"],un=pe({name:"QCarousel",props:{...yt,...Sa,...tn,transitionPrev:{type:String,default:"fade"},transitionNext:{type:String,default:"fade"},height:String,padding:Boolean,controlColor:String,controlTextColor:String,controlType:{type:String,validator:e=>on.includes(e),default:"flat"},autoplay:[Number,Boolean],arrows:Boolean,prevIcon:String,nextIcon:String,navigation:Boolean,navigationPosition:{type:String,validator:e=>nn.includes(e)},navigationIcon:String,navigationActiveIcon:String,thumbnails:Boolean},emits:[...ln,...ha],setup(e,{slots:r}){const{proxy:{$q:n}}=he(),a=bt(e,n);let c=null,u;const{updatePanelsList:k,getPanelContent:p,panelDirectives:w,goToPanel:F,previousPanel:m,nextPanel:q,getEnabledPanels:i,panelIndex:f}=ya(),{inFullscreen:l}=an(),C=v(()=>l.value!==!0&&e.height!==void 0?{height:e.height}:{}),d=v(()=>e.vertical===!0?"vertical":"horizontal"),x=v(()=>e.navigationPosition||(e.vertical===!0?"right":"bottom")),y=v(()=>`q-carousel q-panel-parent q-carousel--with${e.padding===!0?"":"out"}-padding`+(l.value===!0?" fullscreen":"")+(a.value===!0?" q-carousel--dark q-dark":"")+(e.arrows===!0?` q-carousel--arrows-${d.value}`:"")+(e.navigation===!0?` q-carousel--navigation-${x.value}`:"")),D=v(()=>{const A=[e.prevIcon||n.iconSet.carousel[e.vertical===!0?"up":"left"],e.nextIcon||n.iconSet.carousel[e.vertical===!0?"down":"right"]];return e.vertical===!1&&n.lang.rtl===!0?A.reverse():A}),V=v(()=>e.navigationIcon||n.iconSet.carousel.navigationIcon),z=v(()=>e.navigationActiveIcon||V.value),h=v(()=>({color:e.controlColor,textColor:e.controlTextColor,round:!0,[e.controlType]:!0,dense:!0}));de(()=>e.modelValue,()=>{e.autoplay&&M()}),de(()=>e.autoplay,A=>{A?M():c!==null&&(clearTimeout(c),c=null)});function M(){const A=da(e.autoplay)===!0?Math.abs(e.autoplay):5e3;c!==null&&clearTimeout(c),c=setTimeout(()=>{c=null,A>=0?q():m()},A)}ot(()=>{e.autoplay&&M()}),We(()=>{c!==null&&clearTimeout(c)});function G(A,ee){return g("div",{class:`q-carousel__control q-carousel__navigation no-wrap absolute flex q-carousel__navigation--${A} q-carousel__navigation--${x.value}`+(e.controlColor!==void 0?` text-${e.controlColor}`:"")},[g("div",{class:"q-carousel__navigation-inner flex flex-center no-wrap"},i().map(ee))])}function T(){const A=[];if(e.navigation===!0){const ee=r["navigation-icon"]!==void 0?r["navigation-icon"]:Q=>g(se,{key:"nav"+Q.name,class:`q-carousel__navigation-icon q-carousel__navigation-icon--${Q.active===!0?"":"in"}active`,...Q.btnProps,onClick:Q.onClick}),I=u-1;A.push(G("buttons",(Q,ne)=>{const ae=Q.props.name,K=f.value===ne;return ee({index:ne,maxIndex:I,name:ae,active:K,btnProps:{icon:K===!0?z.value:V.value,size:"sm",...h.value},onClick:()=>{F(ae)}})}))}else if(e.thumbnails===!0){const ee=e.controlColor!==void 0?` text-${e.controlColor}`:"";A.push(G("thumbnails",I=>{const Q=I.props;return g("img",{key:"tmb#"+Q.name,class:`q-carousel__thumbnail q-carousel__thumbnail--${Q.name===e.modelValue?"":"in"}active`+ee,src:Q.imgSrc||Q["img-src"],onClick:()=>{F(Q.name)}})}))}return e.arrows===!0&&f.value>=0&&((e.infinite===!0||f.value>0)&&A.push(g("div",{key:"prev",class:`q-carousel__control q-carousel__arrow q-carousel__prev-arrow q-carousel__prev-arrow--${d.value} absolute flex flex-center`},[g(se,{icon:D.value[0],...h.value,onClick:m})])),(e.infinite===!0||f.value<u-1)&&A.push(g("div",{key:"next",class:`q-carousel__control q-carousel__arrow q-carousel__next-arrow q-carousel__next-arrow--${d.value} absolute flex flex-center`},[g(se,{icon:D.value[1],...h.value,onClick:q})]))),ml(r.control,A)}return()=>(u=k(r),g("div",{class:y.value,style:C.value},[dl("div",{class:"q-carousel__slides-container"},p(),"sl-cont",e.swipeable,()=>w.value)].concat(T())))}}),rn=ut({__name:"ProductImgCarusel",props:{images:{}},emits:["refresh-data"],setup(e,{emit:r}){const n=e,a=r,c=Ct(),u=xt(),k=wt(),{isManager:p}=qt(v(()=>k.user?.role)),w=B(0),F=B(!1);function m(){c.dialog({title:" ",message:"     ?",cancel:!0,persistent:!0}).onOk(()=>{q()})}async function q(){try{const i=n.images[w.value];await u.deleteFile(i.id),a("refresh-data")}catch(i){console.error(i)}}return(i,f)=>(te(),ie(un,{swipeable:"",animated:"",arrows:"",modelValue:w.value,"onUpdate:modelValue":f[2]||(f[2]=l=>w.value=l),fullscreen:F.value,"onUpdate:fullscreen":f[3]||(f[3]=l=>F.value=l),infinite:"",height:ge(p)?"200px":"250px",class:"q-mb-sm"},{control:Y(()=>[L(en,{position:"bottom-right",offset:[18,18]},{default:Y(()=>[ge(p)?Te("",!0):(te(),ie(se,{key:0,push:"",round:"",dense:"",color:"white","text-color":"primary",icon:F.value?"fullscreen_exit":"fullscreen",onClick:f[0]||(f[0]=l=>F.value=!F.value)},null,8,["icon"])),ge(p)?(te(),ie(se,{key:1,round:"",dense:"","text-color":"red",icon:"delete",onClick:f[1]||(f[1]=l=>m())})):Te("",!0)]),_:1})]),default:Y(()=>[(te(!0),nt(pl,null,gl(i.images,(l,C)=>(te(),ie(Ja,{key:C,name:C,"img-src":l.file_path,class:"card-image"},null,8,["name","img-src"]))),128))]),_:1},8,["modelValue","fullscreen","height"]))}}),al=kt(rn,[["__scopeId","data-v-11af1822"]]),sn={class:"text-h6 q-mb-md"},cn={class:"text-center upload-title"},dn={key:1},fn={class:"text-h6 text-center q-mt-sm"},vn={class:"text-bold"},mn=ut({__name:"AddProductModal",props:{productData:{}},emits:["refresh-data","add-product"],setup(e,{emit:r}){const n=e,a=r,c=Ct(),u=xt(),k=Ca(),{dialogRef:p}=Ft(),w=wt(),{isManager:F}=qt(v(()=>w.user?.role)),m=bl(),q=B(!1),i=B({id:null,name:"",price:null,category_id:null,unit_id:null,qty:null,description:"",images:"",origin_country:"",unit:null}),f=new FormData;ot(()=>{n.productData&&(i.value=n.productData)});async function l(){try{let V=null;i.value?.id?V=u.updateProduct(i.value):(d(),V=await u.createProduct(f)),V&&(i.value.id=V.id,c.notify({message:" ",color:"primary"}),a("refresh-data"))}catch(V){console.error(V)}}function C(){a("add-product",i.value)}function d(){i?.value?.id&&f.append("id",i.value.id.toString()),i.value?.name&&f.append("name",i.value.name),i.value?.price&&f.append("price",i.value.price.toString()),i.value?.category_id&&f.append("category_id",i.value.category_id.toString()),i.value?.unit_id&&f.append("unit_id",i.value.unit_id.toString()),i.value?.qty&&f.append("qty",i.value.qty.toString()),i.value?.description&&f.append("description",i.value.description),i.value?.origin_country&&f.append("origin_country",i.value.origin_country)}function x(V){const z=new FileReader;z.readAsDataURL(V[0]),z.onload=()=>{},f.append("images",V[0]),i.value?.id&&y(V[0])}async function y(V){const z=new FormData;z.append("file",V),z.append("is_primary","true");try{await u.uploadFile(i.value.id,z)&&(D(),c.notify({message:"  ",color:"primary"}))}catch(h){console.error(h)}}async function D(){try{const V=await u.fetchProductsById(i.value.id);i.value=V}catch(V){console.error(V)}}return(V,z)=>(te(),ie(vl,{ref_key:"dialogRef",ref:p,modelValue:q.value,"onUpdate:modelValue":z[10]||(z[10]=h=>q.value=h),persistent:""},{default:Y(()=>[L(fa,{class:"add-product"},{default:Y(()=>[ge(F)?(te(),ie(Gt,{key:0,greedy:""},{default:Y(()=>[L(Ht,null,{default:Y(()=>[ue("div",sn,ce(i.value.id?" ":" "),1),L(Na,{ref:"uploaderRef",color:"primary",flat:"",onAdded:x},{header:Y(()=>[...z[11]||(z[11]=[])]),list:Y(()=>[L(ka),ue("div",cn,[L(Me,{class:"q-mr-sm",name:"note_add",size:"24px"}),z[12]||(z[12]=ue("span",null," ",-1))])]),_:1},512),ue("div",null,[i.value?.images?.length?(te(),ie(al,{key:0,onRefreshData:z[0]||(z[0]=h=>D()),images:i.value.images},null,8,["images"])):Te("",!0)]),L(He,{modelValue:i.value.name,"onUpdate:modelValue":z[1]||(z[1]=h=>i.value.name=h),class:"q-mb-xs",outlined:"",label:" "},null,8,["modelValue"]),L(He,{modelValue:i.value.price,"onUpdate:modelValue":z[2]||(z[2]=h=>i.value.price=h),class:"q-mb-xs",outlined:"",label:" "},null,8,["modelValue"]),L(He,{modelValue:i.value.qty,"onUpdate:modelValue":z[3]||(z[3]=h=>i.value.qty=h),class:"q-mb-xs",outlined:"",label:""},null,8,["modelValue"]),L(He,{modelValue:i.value.origin_country,"onUpdate:modelValue":z[4]||(z[4]=h=>i.value.origin_country=h),class:"q-mb-xs",outlined:"",label:" "},null,8,["modelValue"]),L(ll,{modelValue:i.value.category_id,"onUpdate:modelValue":z[5]||(z[5]=h=>i.value.category_id=h),options:ge(k).categories,class:"q-mb-xs",outlined:"",label:"","emit-value":"","map-options":"","option-label":"name","option-value":"id"},null,8,["modelValue","options"]),L(ll,{modelValue:i.value.unit_id,"onUpdate:modelValue":z[6]||(z[6]=h=>i.value.unit_id=h),options:ge(m).units,outlined:"",label:" ","emit-value":"","map-options":"","option-label":"name","option-value":"id"},null,8,["modelValue","options"]),L(He,{class:"q-mt-sm",modelValue:i.value.description,"onUpdate:modelValue":z[7]||(z[7]=h=>i.value.description=h),outlined:"",type:"textarea",rows:"2",label:""},null,8,["modelValue"])]),_:1}),L(jt,{align:"right"},{default:Y(()=>[Je(L(se,{color:"red",label:""},null,512),[[et]]),Je(L(se,{color:"primary",label:"",onClick:z[8]||(z[8]=h=>l())},null,512),[[et]])]),_:1})]),_:1})):(te(),ie(Gt,{key:1},{default:Y(()=>[L(Ht,null,{default:Y(()=>[ue("div",null,[i.value?.images?.length?(te(),ie(al,{key:0,images:i.value.images},null,8,["images"])):(te(),nt("div",dn,[L(hl,{class:"q-mt-sm",src:ge(yl)("/card-shop.jpg")},null,8,["src"])]))]),ue("div",fn,ce(i.value.name),1),ue("div",vn," : "+ce(i.value.price),1),ue("div",null,": 11 "+ce(i.value?.unit?.name||"")+".",1),ue("div",null," : "+ce(i.value.origin_country),1),ue("div",null,": "+ce(i.value.description),1)]),_:1}),L(jt,{align:"right"},{default:Y(()=>[Je(L(se,{color:"red",label:""},null,512),[[et]]),Je(L(se,{color:"primary",label:"  ",onClick:z[9]||(z[9]=h=>C())},null,512),[[et]])]),_:1})]),_:1}))]),_:1})]),_:1},8,["modelValue"]))}}),gn=kt(mn,[["__scopeId","data-v-74dadd3f"]]),pn={class:"product-card"},hn={key:0,class:"text-grey old-price"},Sn={class:"row items-end"},yn=ut({__name:"ProductList",setup(e){const r=Ct(),n=bl(),a=xt(),c=ba(),u=wt(),{isManager:k}=qt(v(()=>u.user?.role)),p=B(!1),w=B(!1),F=B();ot(async()=>{try{await n.fetchUnits(),r.loading.show()}catch(C){console.error(C)}finally{r.loading.hide()}});function m(){a.pagination.offset=0,q()}async function q(){try{r.loading.show();const C={offset:a.pagination.offset,limit:a.pagination.limit},d=await a.fetchProducts(C);d&&(a.pagination.total=d.total,a.pagination.has_more=d.has_more,a?.products?.length?a.products.push(d.items):a.products=d.items)}catch(C){console.error(C)}finally{r.loading.hide()}}function i(C){try{r.loading.show(),c.basketData?.length?c.basketData.push(structuredClone(Kt(C))):c.basketData.push(structuredClone(Kt(C)))}catch(d){console.error(d)}finally{r.notify({message:` ${C.name}   `,color:"primary"}),r.loading.hide()}}const f=async(C,d)=>{if(!a.pagination.has_more){p.value=!0,d(!0);return}await q(),a.pagination.offset+=a.pagination.limit,d()};function l(C){F.value=C,w.value=!w.value}return(C,d)=>(te(),ie(xa,{onLoad:f,offset:250},{default:Y(()=>[ge(k)?(te(),ie(se,{key:0,onClick:d[0]||(d[0]=x=>l()),class:"full-width q-mb-sm",color:"secondary",label:" "})):Te("",!0),ue("div",pn,[(te(!0),nt(pl,null,gl(ge(a).products,(x,y)=>(te(),ie(_a,{key:y},{default:Y(()=>[L(Sl,null,{default:Y(()=>[L(lt,{top:"",avatar:"",onClick:D=>l(x)},{default:Y(()=>[L(hl,{class:"cursor-pointer radius-8",src:x[0]?.primary_image?x[0].primary_image:ge(yl)("/card-shop.jpg"),height:"80px",width:"80px",fit:"cover"},null,8,["src"])]),_:2},1032,["onClick"]),L(lt,{class:"column justify-between",onClick:D=>l(x)},{default:Y(()=>[L(at,{caption:"",class:"text-size-16"},{default:Y(()=>[Wt(ce(x.name),1)]),_:2},1024),L(at,null,{default:Y(()=>[x?.old_price?(te(),nt("div",hn,ce(x.old_price)+" ",1)):Te("",!0),ue("div",{class:va(x?.old_price?"text-red":"")},ce(x.price)+" / "+ce(x.unit_name),3)]),_:2},1024)]),_:2},1032,["onClick"]),L(lt,{side:"",top:"",class:"column justify-between"},{default:Y(()=>[d[3]||(d[3]=ue("div",null,null,-1)),ue("div",Sn,[L(at,{class:"q-mr-xs",caption:""},{default:Y(()=>[Wt(ce(x.price)+" / "+ce(x.unit_name),1)]),_:2},1024),L(se,{dense:"",round:"",color:"green",icon:"shopping_cart",onClick:D=>i(x)},null,8,["onClick"])])]),_:2},1024)]),_:2},1024),L(ma,{spaced:"",inset:""})]),_:2},1024))),128))]),w.value?(te(),ie(gn,{key:1,modelValue:w.value,"onUpdate:modelValue":d[1]||(d[1]=x=>w.value=x),productData:F.value,onRefreshData:d[2]||(d[2]=x=>m()),onAddProduct:i},null,8,["modelValue","productData"])):Te("",!0)]),_:1}))}}),bn=kt(yn,[["__scopeId","data-v-93feb0a8"]]),An=ut({__name:"DashboardPage",setup(e){return(r,n)=>(te(),ie(qa,{class:"q-mx-xs"},{default:Y(()=>[L(bn,{class:"q-mb-lg"})]),_:1}))}});export{An as default};
