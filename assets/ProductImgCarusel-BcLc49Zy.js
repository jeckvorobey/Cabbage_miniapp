import{b as T,f as v,h as d,p as R,n as U,r as F,be as J,B as p,bf as O,aF as K,m as j,G as z,O as W,P as Y,bg as ee,aB as te,Q as q,j as ne,X as oe,Z as P,_ as C,a6 as I,$ as B,a3 as ae,a5 as le,a4 as re,a1 as ie,ad as A}from"./index-Bv3_Lu3E.js";import{a as se,b as ue,c as ce,d as de}from"./useCart-DNdNwHNK.js";import{u as ve}from"./use-quasar-DrJJw9aC.js";import{u as me}from"./usePermissionVisibility.hook-DPJ-ziNm.js";import{u as fe}from"./productsStore-BY0WqY7P.js";import{_ as ge}from"./_plugin-vue_export-helper-DlAUqK2U.js";const he=T({name:"QCarouselSlide",props:{...se,imgSrc:String},setup(e,{slots:o}){const a=v(()=>e.imgSrc?{backgroundImage:`url("${e.imgSrc}")`}:{});return()=>d("div",{class:"q-carousel__slide",style:a.value},R(o.default))}}),_e=T({name:"QCarouselControl",props:{position:{type:String,default:"bottom-right",validator:e=>["top-right","top-left","bottom-right","bottom-left","top","right","bottom","left"].includes(e)},offset:{type:Array,default:()=>[18,18],validator:e=>e.length===2}},setup(e,{slots:o}){const a=v(()=>`q-carousel__control absolute absolute-${e.position}`),l=v(()=>({margin:`${e.offset[1]}px ${e.offset[0]}px`}));return()=>d("div",{class:a.value,style:l.value},R(o.default))}});let x=0;const ye={fullscreen:Boolean,noRouteFullscreenExit:Boolean},be=["update:fullscreen","fullscreen"];function Ce(){const e=U(),{props:o,emit:a,proxy:l}=e;let t,g,h;const r=F(!1);J(e)===!0&&p(()=>l.$route.fullPath,()=>{o.noRouteFullscreenExit!==!0&&m()}),p(()=>o.fullscreen,i=>{r.value!==i&&c()}),p(r,i=>{a("update:fullscreen",i),a("fullscreen",i)});function c(){r.value===!0?m():_()}function _(){r.value!==!0&&(r.value=!0,h=l.$el.parentNode,h.replaceChild(g,l.$el),document.body.appendChild(l.$el),x++,x===1&&document.body.classList.add("q-body--fullscreen-mixin"),t={handler:m},O.add(t))}function m(){r.value===!0&&(t!==void 0&&(O.remove(t),t=void 0),h.replaceChild(l.$el,g),r.value=!1,x=Math.max(0,x-1),x===0&&(document.body.classList.remove("q-body--fullscreen-mixin"),l.$el.scrollIntoView!==void 0&&setTimeout(()=>{l.$el.scrollIntoView()})))}return K(()=>{g=document.createElement("span")}),j(()=>{o.fullscreen===!0&&_()}),z(m),Object.assign(l,{toggleFullscreen:c,setFullscreen:_,exitFullscreen:m}),{inFullscreen:r,toggleFullscreen:c}}const xe=["top","right","bottom","left"],pe=["regular","flat","outline","push","unelevated"],qe=T({name:"QCarousel",props:{...W,...ce,...ye,transitionPrev:{type:String,default:"fade"},transitionNext:{type:String,default:"fade"},height:String,padding:Boolean,controlColor:String,controlTextColor:String,controlType:{type:String,validator:e=>pe.includes(e),default:"flat"},autoplay:[Number,Boolean],arrows:Boolean,prevIcon:String,nextIcon:String,navigation:Boolean,navigationPosition:{type:String,validator:e=>xe.includes(e)},navigationIcon:String,navigationActiveIcon:String,thumbnails:Boolean},emits:[...be,...ue],setup(e,{slots:o}){const{proxy:{$q:a}}=U(),l=Y(e,a);let t=null,g;const{updatePanelsList:h,getPanelContent:r,panelDirectives:c,goToPanel:_,previousPanel:m,nextPanel:i,getEnabledPanels:f,panelIndex:s}=de(),{inFullscreen:y}=Ce(),H=v(()=>y.value!==!0&&e.height!==void 0?{height:e.height}:{}),$=v(()=>e.vertical===!0?"vertical":"horizontal"),V=v(()=>e.navigationPosition||(e.vertical===!0?"right":"bottom")),G=v(()=>`q-carousel q-panel-parent q-carousel--with${e.padding===!0?"":"out"}-padding`+(y.value===!0?" fullscreen":"")+(l.value===!0?" q-carousel--dark q-dark":"")+(e.arrows===!0?` q-carousel--arrows-${$.value}`:"")+(e.navigation===!0?` q-carousel--navigation-${V.value}`:"")),Q=v(()=>{const n=[e.prevIcon||a.iconSet.carousel[e.vertical===!0?"up":"left"],e.nextIcon||a.iconSet.carousel[e.vertical===!0?"down":"right"]];return e.vertical===!1&&a.lang.rtl===!0?n.reverse():n}),E=v(()=>e.navigationIcon||a.iconSet.carousel.navigationIcon),X=v(()=>e.navigationActiveIcon||E.value),S=v(()=>({color:e.controlColor,textColor:e.controlTextColor,round:!0,[e.controlType]:!0,dense:!0}));p(()=>e.modelValue,()=>{e.autoplay&&k()}),p(()=>e.autoplay,n=>{n?k():t!==null&&(clearTimeout(t),t=null)});function k(){const n=ee(e.autoplay)===!0?Math.abs(e.autoplay):5e3;t!==null&&clearTimeout(t),t=setTimeout(()=>{t=null,n>=0?i():m()},n)}j(()=>{e.autoplay&&k()}),z(()=>{t!==null&&clearTimeout(t)});function N(n,b){return d("div",{class:`q-carousel__control q-carousel__navigation no-wrap absolute flex q-carousel__navigation--${n} q-carousel__navigation--${V.value}`+(e.controlColor!==void 0?` text-${e.controlColor}`:"")},[d("div",{class:"q-carousel__navigation-inner flex flex-center no-wrap"},f().map(b))])}function Z(){const n=[];if(e.navigation===!0){const b=o["navigation-icon"]!==void 0?o["navigation-icon"]:u=>d(q,{key:"nav"+u.name,class:`q-carousel__navigation-icon q-carousel__navigation-icon--${u.active===!0?"":"in"}active`,...u.btnProps,onClick:u.onClick}),w=g-1;n.push(N("buttons",(u,M)=>{const D=u.props.name,L=s.value===M;return b({index:M,maxIndex:w,name:D,active:L,btnProps:{icon:L===!0?X.value:E.value,size:"sm",...S.value},onClick:()=>{_(D)}})}))}else if(e.thumbnails===!0){const b=e.controlColor!==void 0?` text-${e.controlColor}`:"";n.push(N("thumbnails",w=>{const u=w.props;return d("img",{key:"tmb#"+u.name,class:`q-carousel__thumbnail q-carousel__thumbnail--${u.name===e.modelValue?"":"in"}active`+b,src:u.imgSrc||u["img-src"],onClick:()=>{_(u.name)}})}))}return e.arrows===!0&&s.value>=0&&((e.infinite===!0||s.value>0)&&n.push(d("div",{key:"prev",class:`q-carousel__control q-carousel__arrow q-carousel__prev-arrow q-carousel__prev-arrow--${$.value} absolute flex flex-center`},[d(q,{icon:Q.value[0],...S.value,onClick:m})])),(e.infinite===!0||s.value<g-1)&&n.push(d("div",{key:"next",class:`q-carousel__control q-carousel__arrow q-carousel__next-arrow q-carousel__next-arrow--${$.value} absolute flex flex-center`},[d(q,{icon:Q.value[1],...S.value,onClick:i})]))),ne(o.control,n)}return()=>(g=h(o),d("div",{class:G.value,style:H.value},[te("div",{class:"q-carousel__slides-container"},r(),"sl-cont",e.swipeable,()=>c.value)].concat(Z())))}}),Pe=oe({__name:"ProductImgCarusel",props:{images:{}},emits:["refresh-data"],setup(e,{emit:o}){const a=e,l=o,t=ve(),g=fe(),{isManager:h}=me(),r=F(0),c=F(!1);function _(){t.dialog({cancel:!0,message:"Вы уверенны что хотите удалить картинку?",persistent:!0,title:"Удаление картинки"}).onOk(()=>{m()})}async function m(){try{const i=a.images[r.value];await g.deleteFile(i.id),l("refresh-data")}catch(i){console.error(i)}}return(i,f)=>(C(),P(qe,{modelValue:r.value,"onUpdate:modelValue":f[2]||(f[2]=s=>r.value=s),fullscreen:c.value,"onUpdate:fullscreen":f[3]||(f[3]=s=>c.value=s),swipeable:"",animated:"",arrows:"",infinite:"",height:I(h)?"200px":"250px",class:"q-mb-sm"},{control:B(()=>[ie(_e,{position:"bottom-right",offset:[18,18]},{default:B(()=>[I(h)?A("",!0):(C(),P(q,{key:0,push:"",round:"",dense:"",color:"white","text-color":"primary",icon:c.value?"fullscreen_exit":"fullscreen",onClick:f[0]||(f[0]=s=>c.value=!c.value)},null,8,["icon"])),I(h)?(C(),P(q,{key:1,round:"",dense:"","text-color":"red",icon:"delete",onClick:f[1]||(f[1]=s=>_())})):A("",!0)]),_:1})]),default:B(()=>[(C(!0),ae(re,null,le(i.images,(s,y)=>(C(),P(he,{key:y,name:y,"img-src":s.file_path,class:"card-image"},null,8,["name","img-src"]))),128))]),_:1},8,["modelValue","fullscreen","height"]))}}),Fe=ge(Pe,[["__scopeId","data-v-7a80f032"]]);export{Fe as P};
