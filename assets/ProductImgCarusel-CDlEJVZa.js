import{b as T,e as v,k as d,m as U,i as R,r as B,be as Z,w as p,bf as A,aG as J,h as z,g as G,F as K,G as W,bg as ee,aC as te,S as q,U as ne,V as oe,a4 as P,M as C,Z as I,$ as F,L as ae,Y as le,X as re,_ as ie,a5 as O}from"./index-hzzl6ab0.js";import{a as se,b as ue,c as ce,d as de}from"./orderStore-VXOC0Ved.js";import{u as ve}from"./use-quasar-DuobLYDZ.js";import{u as me}from"./usePermissionVisibility.hook-BGFb_-zA.js";import{u as fe}from"./productsStore-BLA3t4Di.js";import{_ as ge}from"./_plugin-vue_export-helper-DlAUqK2U.js";const he=T({name:"QCarouselSlide",props:{...se,imgSrc:String},setup(e,{slots:o}){const a=v(()=>e.imgSrc?{backgroundImage:`url("${e.imgSrc}")`}:{});return()=>d("div",{class:"q-carousel__slide",style:a.value},U(o.default))}}),_e=T({name:"QCarouselControl",props:{position:{type:String,default:"bottom-right",validator:e=>["top-right","top-left","bottom-right","bottom-left","top","right","bottom","left"].includes(e)},offset:{type:Array,default:()=>[18,18],validator:e=>e.length===2}},setup(e,{slots:o}){const a=v(()=>`q-carousel__control absolute absolute-${e.position}`),l=v(()=>({margin:`${e.offset[1]}px ${e.offset[0]}px`}));return()=>d("div",{class:a.value,style:l.value},U(o.default))}});let x=0;const ye={fullscreen:Boolean,noRouteFullscreenExit:Boolean},be=["update:fullscreen","fullscreen"];function Ce(){const e=R(),{props:o,emit:a,proxy:l}=e;let t,g,h;const r=B(!1);Z(e)===!0&&p(()=>l.$route.fullPath,()=>{o.noRouteFullscreenExit!==!0&&m()}),p(()=>o.fullscreen,i=>{r.value!==i&&c()}),p(r,i=>{a("update:fullscreen",i),a("fullscreen",i)});function c(){r.value===!0?m():_()}function _(){r.value!==!0&&(r.value=!0,h=l.$el.parentNode,h.replaceChild(g,l.$el),document.body.appendChild(l.$el),x++,x===1&&document.body.classList.add("q-body--fullscreen-mixin"),t={handler:m},A.add(t))}function m(){r.value===!0&&(t!==void 0&&(A.remove(t),t=void 0),h.replaceChild(l.$el,g),r.value=!1,x=Math.max(0,x-1),x===0&&(document.body.classList.remove("q-body--fullscreen-mixin"),l.$el.scrollIntoView!==void 0&&setTimeout(()=>{l.$el.scrollIntoView()})))}return J(()=>{g=document.createElement("span")}),z(()=>{o.fullscreen===!0&&_()}),G(m),Object.assign(l,{toggleFullscreen:c,setFullscreen:_,exitFullscreen:m}),{inFullscreen:r,toggleFullscreen:c}}const xe=["top","right","bottom","left"],pe=["regular","flat","outline","push","unelevated"],qe=T({name:"QCarousel",props:{...K,...ce,...ye,transitionPrev:{type:String,default:"fade"},transitionNext:{type:String,default:"fade"},height:String,padding:Boolean,controlColor:String,controlTextColor:String,controlType:{type:String,validator:e=>pe.includes(e),default:"flat"},autoplay:[Number,Boolean],arrows:Boolean,prevIcon:String,nextIcon:String,navigation:Boolean,navigationPosition:{type:String,validator:e=>xe.includes(e)},navigationIcon:String,navigationActiveIcon:String,thumbnails:Boolean},emits:[...be,...ue],setup(e,{slots:o}){const{proxy:{$q:a}}=R(),l=W(e,a);let t=null,g;const{updatePanelsList:h,getPanelContent:r,panelDirectives:c,goToPanel:_,previousPanel:m,nextPanel:i,getEnabledPanels:f,panelIndex:s}=de(),{inFullscreen:y}=Ce(),H=v(()=>y.value!==!0&&e.height!==void 0?{height:e.height}:{}),S=v(()=>e.vertical===!0?"vertical":"horizontal"),V=v(()=>e.navigationPosition||(e.vertical===!0?"right":"bottom")),j=v(()=>`q-carousel q-panel-parent q-carousel--with${e.padding===!0?"":"out"}-padding`+(y.value===!0?" fullscreen":"")+(l.value===!0?" q-carousel--dark q-dark":"")+(e.arrows===!0?` q-carousel--arrows-${S.value}`:"")+(e.navigation===!0?` q-carousel--navigation-${V.value}`:"")),E=v(()=>{const n=[e.prevIcon||a.iconSet.carousel[e.vertical===!0?"up":"left"],e.nextIcon||a.iconSet.carousel[e.vertical===!0?"down":"right"]];return e.vertical===!1&&a.lang.rtl===!0?n.reverse():n}),N=v(()=>e.navigationIcon||a.iconSet.carousel.navigationIcon),X=v(()=>e.navigationActiveIcon||N.value),$=v(()=>({color:e.controlColor,textColor:e.controlTextColor,round:!0,[e.controlType]:!0,dense:!0}));p(()=>e.modelValue,()=>{e.autoplay&&k()}),p(()=>e.autoplay,n=>{n?k():t!==null&&(clearTimeout(t),t=null)});function k(){const n=ee(e.autoplay)===!0?Math.abs(e.autoplay):5e3;t!==null&&clearTimeout(t),t=setTimeout(()=>{t=null,n>=0?i():m()},n)}z(()=>{e.autoplay&&k()}),G(()=>{t!==null&&clearTimeout(t)});function Q(n,b){return d("div",{class:`q-carousel__control q-carousel__navigation no-wrap absolute flex q-carousel__navigation--${n} q-carousel__navigation--${V.value}`+(e.controlColor!==void 0?` text-${e.controlColor}`:"")},[d("div",{class:"q-carousel__navigation-inner flex flex-center no-wrap"},f().map(b))])}function Y(){const n=[];if(e.navigation===!0){const b=o["navigation-icon"]!==void 0?o["navigation-icon"]:u=>d(q,{key:"nav"+u.name,class:`q-carousel__navigation-icon q-carousel__navigation-icon--${u.active===!0?"":"in"}active`,...u.btnProps,onClick:u.onClick}),w=g-1;n.push(Q("buttons",(u,M)=>{const L=u.props.name,D=s.value===M;return b({index:M,maxIndex:w,name:L,active:D,btnProps:{icon:D===!0?X.value:N.value,size:"sm",...$.value},onClick:()=>{_(L)}})}))}else if(e.thumbnails===!0){const b=e.controlColor!==void 0?` text-${e.controlColor}`:"";n.push(Q("thumbnails",w=>{const u=w.props;return d("img",{key:"tmb#"+u.name,class:`q-carousel__thumbnail q-carousel__thumbnail--${u.name===e.modelValue?"":"in"}active`+b,src:u.imgSrc||u["img-src"],onClick:()=>{_(u.name)}})}))}return e.arrows===!0&&s.value>=0&&((e.infinite===!0||s.value>0)&&n.push(d("div",{key:"prev",class:`q-carousel__control q-carousel__arrow q-carousel__prev-arrow q-carousel__prev-arrow--${S.value} absolute flex flex-center`},[d(q,{icon:E.value[0],...$.value,onClick:m})])),(e.infinite===!0||s.value<g-1)&&n.push(d("div",{key:"next",class:`q-carousel__control q-carousel__arrow q-carousel__next-arrow q-carousel__next-arrow--${S.value} absolute flex flex-center`},[d(q,{icon:E.value[1],...$.value,onClick:i})]))),ne(o.control,n)}return()=>(g=h(o),d("div",{class:j.value,style:H.value},[te("div",{class:"q-carousel__slides-container"},r(),"sl-cont",e.swipeable,()=>c.value)].concat(Y())))}}),Pe=oe({__name:"ProductImgCarusel",props:{images:{}},emits:["refresh-data"],setup(e,{emit:o}){const a=e,l=o,t=ve(),g=fe(),{isManager:h}=me(),r=B(0),c=B(!1);function _(){t.dialog({title:"Удаление картинки",message:"Вы уверенны что хотите удалить картинку?",cancel:!0,persistent:!0}).onOk(()=>{m()})}async function m(){try{const i=a.images[r.value];await g.deleteFile(i.id),l("refresh-data")}catch(i){console.error(i)}}return(i,f)=>(C(),P(qe,{swipeable:"",animated:"",arrows:"",modelValue:r.value,"onUpdate:modelValue":f[2]||(f[2]=s=>r.value=s),fullscreen:c.value,"onUpdate:fullscreen":f[3]||(f[3]=s=>c.value=s),infinite:"",height:I(h)?"200px":"250px",class:"q-mb-sm"},{control:F(()=>[ie(_e,{position:"bottom-right",offset:[18,18]},{default:F(()=>[I(h)?O("",!0):(C(),P(q,{key:0,push:"",round:"",dense:"",color:"white","text-color":"primary",icon:c.value?"fullscreen_exit":"fullscreen",onClick:f[0]||(f[0]=s=>c.value=!c.value)},null,8,["icon"])),I(h)?(C(),P(q,{key:1,round:"",dense:"","text-color":"red",icon:"delete",onClick:f[1]||(f[1]=s=>_())})):O("",!0)]),_:1})]),default:F(()=>[(C(!0),ae(re,null,le(i.images,(s,y)=>(C(),P(he,{key:y,name:y,"img-src":s.file_path,class:"card-image"},null,8,["name","img-src"]))),128))]),_:1},8,["modelValue","fullscreen","height"]))}}),Be=ge(Pe,[["__scopeId","data-v-0fe84505"]]);export{Be as P};
