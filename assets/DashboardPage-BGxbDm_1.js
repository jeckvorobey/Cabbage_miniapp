import{k as Se,g as ge,a as bt,v as Ce,x as Yl,$ as Jl,c as p,h as S,l as Ye,aw as cl,ax as dl,ay as vl,az as fl,r as $,L as qe,N as ve,G as Re,P as wt,S as Ct,w as ce,n as Je,i as Zl,aA as Gl,aB as ea,aC as jt,aD as ta,ad as Ee,Q as de,_ as la,aE as aa,aF as ml,aG as qt,aH as gl,aI as pl,Z as hl,aJ as na,p as yl,q as we,aK as oa,aL as Sl,aM as ua,aN as ia,z as ra,aO as sa,aP as Kt,aQ as ca,aR as Qe,aS as da,K as gt,aT as va,aU as fa,aV as ma,aW as bl,C as _l,D as ga,E as pt,H as ht,I as lt,J as Wt,M as pa,U as ha,a6 as ya,aX as Sa,aY as ba,aZ as _a,a_ as Xt,o as rt,a$ as xa,d as st,u as kt,aj as se,ai as ae,am as ye,an as le,ah as Xe,aq as xl,F as wl,f as K,ak as Me,b0 as ut,ao as oe,ap as fe,av as je,b1 as _t,Y as at,as as Cl,b2 as Yt,at as Jt}from"./index-B4X6iqrB.js";import{b as wa,h as Zt,n as Gt,g as el,s as tl,u as Ft,Q as ql,a as Ca}from"./orderStore-D9gjd9XH.js";import{Q as qa,a as ka}from"./QMenu-rq5stYsT.js";import{b as Fa,a as Va,Q as Pa,u as Vt,g as kl}from"./useUtils-9iTs3GFu.js";import{u as Fl,Q as ll}from"./unitsStore-D9YDcRcj.js";import{C as nt}from"./ClosePopup-CvFjevZL.js";import{u as Pt}from"./usePermissionVisibility.hook-CQ0ilMPD.js";import{c as za}from"./selection-BY_cgGej.js";import{_ as zt}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{u as Aa}from"./categoriesStore-KPUYMMLH.js";const Ia=Se({name:"QPage",props:{padding:Boolean,styleFn:Function},setup(e,{slots:n}){const{proxy:{$q:u}}=ge(),o=bt(Yl,Ce);if(o===Ce)return console.error("QPage needs to be a deep child of QLayout"),Ce;if(bt(Jl,Ce)===Ce)return console.error("QPage needs to be child of QPageContainer"),Ce;const l=p(()=>{const f=(o.header.space===!0?o.header.size:0)+(o.footer.space===!0?o.footer.size:0);if(typeof e.styleFn=="function"){const y=o.isContainer.value===!0?o.containerHeight.value:u.screen.height;return e.styleFn(f,y)}return{minHeight:o.isContainer.value===!0?o.containerHeight.value-f+"px":u.screen.height===0?f!==0?`calc(100vh - ${f}px)`:"100vh":u.screen.height-f+"px"}}),h=p(()=>`q-page${e.padding===!0?" q-layout-padding":""}`);return()=>S("main",{class:h.value,style:l.value},Ye(n.default))}}),Ba=Se({name:"QUploaderAddTrigger",setup(){const e=bt(cl,Ce);return e===Ce&&console.error("QUploaderAddTrigger needs to be child of QUploader"),e}}),$a={...dl,min:{type:Number,default:0},max:{type:Number,default:100},color:String,centerColor:String,trackColor:String,fontSize:String,rounded:Boolean,thickness:{type:Number,default:.2,validator:e=>e>=0&&e<=1},angle:{type:Number,default:0},showValue:Boolean,reverse:Boolean,instantFeedback:Boolean},xt=50,Vl=2*xt,Pl=Vl*Math.PI,Da=Math.round(Pl*1e3)/1e3,Oa=Se({name:"QCircularProgress",props:{...$a,value:{type:Number,default:0},animationSpeed:{type:[String,Number],default:600},indeterminate:Boolean},setup(e,{slots:n}){const{proxy:{$q:u}}=ge(),o=vl(e),c=p(()=>{const g=(u.lang.rtl===!0?-1:1)*e.angle;return{transform:e.reverse!==(u.lang.rtl===!0)?`scale3d(-1, 1, 1) rotate3d(0, 0, 1, ${-90-g}deg)`:`rotate3d(0, 0, 1, ${g-90}deg)`}}),l=p(()=>e.instantFeedback!==!0&&e.indeterminate!==!0?{transition:`stroke-dashoffset ${e.animationSpeed}ms ease 0s, stroke ${e.animationSpeed}ms ease`}:""),h=p(()=>Vl/(1-e.thickness/2)),f=p(()=>`${h.value/2} ${h.value/2} ${h.value} ${h.value}`),y=p(()=>wa(e.value,e.min,e.max)),k=p(()=>e.max-e.min),d=p(()=>e.thickness/2*h.value),q=p(()=>{const g=(e.max-y.value)/k.value,a=e.rounded===!0&&y.value<e.max&&g<.25?d.value/2*(1-g/.25):0;return Pl*g+a});function i({thickness:g,offset:a,color:V,cls:v,rounded:b}){return S("circle",{class:"q-circular-progress__"+v+(V!==void 0?` text-${V}`:""),style:l.value,fill:"transparent",stroke:"currentColor","stroke-width":g,"stroke-dasharray":Da,"stroke-dashoffset":a,"stroke-linecap":b,cx:h.value,cy:h.value,r:xt})}return()=>{const g=[];e.centerColor!==void 0&&e.centerColor!=="transparent"&&g.push(S("circle",{class:`q-circular-progress__center text-${e.centerColor}`,fill:"currentColor",r:xt-d.value/2,cx:h.value,cy:h.value})),e.trackColor!==void 0&&e.trackColor!=="transparent"&&g.push(i({cls:"track",thickness:d.value,offset:0,color:e.trackColor})),g.push(i({cls:"circle",thickness:d.value,offset:q.value,color:e.color,rounded:e.rounded===!0?"round":void 0}));const a=[S("svg",{class:"q-circular-progress__svg",style:c.value,viewBox:f.value,"aria-hidden":"true"},g)];return e.showValue===!0&&a.push(S("div",{class:"q-circular-progress__text absolute-full row flex-center content-center",style:{fontSize:e.fontSize}},n.default!==void 0?n.default():[S("div",y.value)])),S("div",{class:`q-circular-progress q-circular-progress--${e.indeterminate===!0?"in":""}determinate`,style:o.value,role:"progressbar","aria-valuemin":e.min,"aria-valuemax":e.max,"aria-valuenow":e.indeterminate===!0?void 0:y.value},fl(n.internal,a))}}});function Te(e,n,u,o){const c=[];return e.forEach(l=>{o(l)===!0?c.push(l):n.push({failedPropValidation:u,file:l})}),c}function ot(e){e?.dataTransfer&&(e.dataTransfer.dropEffect="copy"),ve(e)}const Ta={multiple:Boolean,accept:String,capture:String,maxFileSize:[Number,String],maxTotalSize:[Number,String],maxFiles:[Number,String],filter:Function},Ra=["rejected"];function Ea({editable:e,dnd:n,getFileInput:u,addFilesToQueue:o}){const{props:c,emit:l,proxy:h}=ge(),f=$(null),y=p(()=>c.accept!==void 0?c.accept.split(",").map(m=>(m=m.trim(),m==="*"?"*/":(m.endsWith("/*")&&(m=m.slice(0,m.length-1)),m.toUpperCase()))):null),k=p(()=>parseInt(c.maxFiles,10)),d=p(()=>parseInt(c.maxTotalSize,10));function q(m){if(e.value)if(m!==Object(m)&&(m={target:null}),m.target?.matches('input[type="file"]')===!0)m.clientX===0&&m.clientY===0&&qe(m);else{const O=u();O!==m.target&&O?.click(m)}}function i(m){e.value&&m&&o(null,m)}function g(m,O,F,P){let _=Array.from(O||m.target.files);const T=[],Q=()=>{T.length!==0&&l("rejected",T)};if(c.accept!==void 0&&y.value.indexOf("*/")===-1&&(_=Te(_,T,"accept",R=>y.value.some(I=>R.type.toUpperCase().startsWith(I)||R.name.toUpperCase().endsWith(I))),_.length===0))return Q();if(c.maxFileSize!==void 0){const R=parseInt(c.maxFileSize,10);if(_=Te(_,T,"max-file-size",I=>I.size<=R),_.length===0)return Q()}if(c.multiple!==!0&&_.length!==0&&(_=[_[0]]),_.forEach(R=>{R.__key=R.webkitRelativePath+R.lastModified+R.name+R.size}),P===!0){const R=F.map(I=>I.__key);_=Te(_,T,"duplicate",I=>R.includes(I.__key)===!1)}if(_.length===0)return Q();if(c.maxTotalSize!==void 0){let R=P===!0?F.reduce((I,G)=>I+G.size,0):0;if(_=Te(_,T,"max-total-size",I=>(R+=I.size,R<=d.value)),_.length===0)return Q()}if(typeof c.filter=="function"){const R=c.filter(_);_=Te(_,T,"filter",I=>R.includes(I))}if(c.maxFiles!==void 0){let R=P===!0?F.length:0;if(_=Te(_,T,"max-files",()=>(R++,R<=k.value)),_.length===0)return Q()}if(Q(),_.length!==0)return _}function a(m){ot(m),n.value!==!0&&(n.value=!0)}function V(m){ve(m),(m.relatedTarget!==null||Re.is.safari!==!0?m.relatedTarget!==f.value:document.elementsFromPoint(m.clientX,m.clientY).includes(f.value)===!1)===!0&&(n.value=!1)}function v(m){ot(m);const O=m.dataTransfer.files;O.length!==0&&o(null,O),n.value=!1}function b(m){if(n.value===!0)return S("div",{ref:f,class:`q-${m}__dnd absolute-full`,onDragenter:ot,onDragover:ot,onDragleave:V,onDrop:v})}return Object.assign(h,{pickFiles:q,addFiles:i}),{pickFiles:q,addFiles:i,onDragover:a,onDragleave:V,processFiles:g,getDndNode:b,maxFilesNumber:k,maxTotalSizeNumber:d}}function al(e){return(e*100).toFixed(2)+"%"}const Ma={...wt,...Ta,label:String,color:String,textColor:String,square:Boolean,flat:Boolean,bordered:Boolean,noThumbnails:Boolean,thumbnailFit:{type:String,default:"cover"},autoUpload:Boolean,hideUploadBtn:Boolean,disable:Boolean,readonly:Boolean},zl=[...Ra,"start","finish","added","removed"];function La(e,n){const u=ge(),{props:o,slots:c,emit:l,proxy:h}=u,{$q:f}=h,y=Ct(o,f);function k(s,B,J){if(s.__status=B,B==="idle"){s.__uploaded=0,s.__progress=0,s.__sizeLabel=Zt(s.size),s.__progressLabel="0.00%";return}if(B==="failed"){h.$forceUpdate();return}s.__uploaded=B==="uploaded"?s.size:J,s.__progress=B==="uploaded"?1:Math.min(.9999,s.__uploaded/s.size),s.__progressLabel=al(s.__progress),h.$forceUpdate()}const d=p(()=>o.disable!==!0&&o.readonly!==!0),q=$(!1),i=$(null),g=$(null),a={files:$([]),queuedFiles:$([]),uploadedFiles:$([]),uploadedSize:$(0),updateFileStatus:k,isAlive:()=>ta(u)===!1},{pickFiles:V,addFiles:v,onDragover:b,onDragleave:m,processFiles:O,getDndNode:F,maxFilesNumber:P,maxTotalSizeNumber:_}=Ea({editable:d,dnd:q,getFileInput:r,addFilesToQueue:x});Object.assign(a,e({props:o,slots:c,emit:l,helpers:a,exposeApi:s=>{Object.assign(a,s)}})),a.isBusy===void 0&&(a.isBusy=$(!1));const T=$(0),Q=p(()=>T.value===0?0:a.uploadedSize.value/T.value),R=p(()=>al(Q.value)),I=p(()=>Zt(T.value)),G=p(()=>d.value===!0&&a.isUploading.value!==!0&&(o.multiple===!0||a.queuedFiles.value.length===0)&&(o.maxFiles===void 0||a.files.value.length<P.value)&&(o.maxTotalSize===void 0||T.value<_.value)),z=p(()=>d.value===!0&&a.isBusy.value!==!0&&a.isUploading.value!==!0&&a.queuedFiles.value.length!==0);la(cl,ee);const j=p(()=>"q-uploader column no-wrap"+(y.value===!0?" q-uploader--dark q-dark":"")+(o.bordered===!0?" q-uploader--bordered":"")+(o.square===!0?" q-uploader--square no-border-radius":"")+(o.flat===!0?" q-uploader--flat no-shadow":"")+(o.disable===!0?" disabled q-uploader--disable":"")+(q.value===!0?" q-uploader--dnd":"")),A=p(()=>"q-uploader__header"+(o.color!==void 0?` bg-${o.color}`:"")+(o.textColor!==void 0?` text-${o.textColor}`:""));ce(a.isUploading,(s,B)=>{B===!1&&s===!0?l("start"):B===!0&&s===!1&&l("finish")});function E(){o.disable===!1&&(a.abort(),a.uploadedSize.value=0,T.value=0,xe(),a.files.value=[],a.queuedFiles.value=[],a.uploadedFiles.value=[])}function U(){o.disable===!1&&_e(["uploaded"],()=>{a.uploadedFiles.value=[]})}function ie(){_e(["idle","failed"],({size:s})=>{T.value-=s,a.queuedFiles.value=[]})}function _e(s,B){if(o.disable===!0)return;const J={files:[],size:0},ue=a.files.value.filter(Z=>s.indexOf(Z.__status)===-1?!0:(J.size+=Z.size,J.files.push(Z),Z.__img!==void 0&&window.URL.revokeObjectURL(Z.__img.src),!1));J.files.length!==0&&(a.files.value=ue,B(J),l("removed",J.files))}function pe(s){o.disable||(s.__status==="uploaded"?a.uploadedFiles.value=a.uploadedFiles.value.filter(B=>B.__key!==s.__key):s.__status==="uploading"?s.__abort():T.value-=s.size,a.files.value=a.files.value.filter(B=>B.__key!==s.__key?!0:(B.__img!==void 0&&window.URL.revokeObjectURL(B.__img.src),!1)),a.queuedFiles.value=a.queuedFiles.value.filter(B=>B.__key!==s.__key),l("removed",[s]))}function xe(){a.files.value.forEach(s=>{s.__img!==void 0&&window.URL.revokeObjectURL(s.__img.src)})}function r(){return g.value||i.value.getElementsByClassName("q-uploader__input")[0]}function x(s,B){const J=O(s,B,a.files.value,!0),ue=r();ue!=null&&(ue.value=""),J!==void 0&&(J.forEach(Z=>{if(a.updateFileStatus(Z,"idle"),T.value+=Z.size,o.noThumbnails!==!0&&Z.type.toUpperCase().startsWith("IMAGE")){const ke=new Image;ke.src=window.URL.createObjectURL(Z),Z.__img=ke}}),a.files.value=a.files.value.concat(J),a.queuedFiles.value=a.queuedFiles.value.concat(J),l("added",J),o.autoUpload===!0&&a.upload())}function D(){z.value===!0&&a.upload()}function H(s,B,J){if(s===!0){const ue={type:"a",key:B,icon:f.iconSet.uploader[B],flat:!0,dense:!0};let Z;return B==="add"?(ue.onClick=V,Z=ee):ue.onClick=J,S(de,ue,Z)}}function ee(){return S("input",{ref:g,class:"q-uploader__input overflow-hidden absolute-full",tabindex:-1,type:"file",title:"",accept:o.accept,multiple:o.multiple===!0?"multiple":void 0,capture:o.capture,onMousedown:qe,onClick:V,onChange:x})}function N(){return c.header!==void 0?c.header(X):[S("div",{class:"q-uploader__header-content column"},[S("div",{class:"flex flex-center no-wrap q-gutter-xs"},[H(a.queuedFiles.value.length!==0,"removeQueue",ie),H(a.uploadedFiles.value.length!==0,"removeUploaded",U),a.isUploading.value===!0?S(jt,{class:"q-uploader__spinner"}):null,S("div",{class:"col column justify-center"},[o.label!==void 0?S("div",{class:"q-uploader__title"},[o.label]):null,S("div",{class:"q-uploader__subtitle"},[I.value+" / "+R.value])]),H(G.value,"add"),H(o.hideUploadBtn===!1&&z.value===!0,"upload",a.upload),H(a.isUploading.value,"clear",a.abort)])])]}function M(){return c.list!==void 0?c.list(X):a.files.value.map(s=>S("div",{key:s.__key,class:"q-uploader__file relative-position"+(o.noThumbnails!==!0&&s.__img!==void 0?" q-uploader__file--img":"")+(s.__status==="failed"?" q-uploader__file--failed":s.__status==="uploaded"?" q-uploader__file--uploaded":""),style:o.noThumbnails!==!0&&s.__img!==void 0?{backgroundImage:'url("'+s.__img.src+'")',backgroundSize:o.thumbnailFit}:null},[S("div",{class:"q-uploader__file-header row flex-center no-wrap"},[s.__status==="failed"?S(Ee,{class:"q-uploader__file-status",name:f.iconSet.type.negative,color:"negative"}):null,S("div",{class:"q-uploader__file-header-content col"},[S("div",{class:"q-uploader__title"},[s.name]),S("div",{class:"q-uploader__subtitle row items-center no-wrap"},[s.__sizeLabel+" / "+s.__progressLabel])]),s.__status==="uploading"?S(Oa,{value:s.__progress,min:0,max:1,indeterminate:s.__progress===0}):S(de,{round:!0,dense:!0,flat:!0,icon:f.iconSet.uploader[s.__status==="uploaded"?"done":"clear"],onClick:()=>{pe(s)}})])]))}Je(()=>{a.isUploading.value===!0&&a.abort(),a.files.value.length!==0&&xe()});const X={};for(const s in a)Zl(a[s])===!0?Gl(X,s,()=>a[s].value):X[s]=a[s];return Object.assign(X,{upload:D,reset:E,removeUploadedFiles:U,removeQueuedFiles:ie,removeFile:pe,pickFiles:V,addFiles:v}),ea(X,{canAddFiles:()=>G.value,canUpload:()=>z.value,uploadSizeLabel:()=>I.value,uploadProgressLabel:()=>R.value}),n({...a,upload:D,reset:E,removeUploadedFiles:U,removeQueuedFiles:ie,removeFile:pe,pickFiles:V,addFiles:v,canAddFiles:G,canUpload:z,uploadSizeLabel:I,uploadProgressLabel:R}),()=>{const s=[S("div",{class:A.value},N()),S("div",{class:"q-uploader__list scroll"},M()),F("uploader")];a.isBusy.value===!0&&s.push(S("div",{class:"q-uploader__overlay absolute-full flex flex-center"},[S(jt)]));const B={ref:i,class:j.value};return G.value===!0&&Object.assign(B,{onDragover:b,onDragleave:m}),S("div",B,s)}}const Ua=()=>!0;function Al(e){const n={};return e.forEach(u=>{n[u]=Ua}),n}const Na=Al(zl),Ha=({name:e,props:n,emits:u,injectPlugin:o})=>Se({name:e,props:{...Ma,...n},emits:aa(u)===!0?{...Na,...u}:[...zl,...u],setup(c,{expose:l}){return La(o,l)}});function be(e){return typeof e=="function"?e:()=>e}const Qa="QUploader",ja={url:[Function,String],method:{type:[Function,String],default:"POST"},fieldName:{type:[Function,String],default:()=>e=>e.name},headers:[Function,Array],formFields:[Function,Array],withCredentials:[Function,Boolean],sendRaw:[Function,Boolean],batch:[Function,Boolean],factory:Function},Ka=["factoryFailed","uploaded","failed","uploading"];function Wa({props:e,emit:n,helpers:u}){const o=$([]),c=$([]),l=$(0),h=p(()=>({url:be(e.url),method:be(e.method),headers:be(e.headers),formFields:be(e.formFields),fieldName:be(e.fieldName),withCredentials:be(e.withCredentials),sendRaw:be(e.sendRaw),batch:be(e.batch)})),f=p(()=>l.value>0),y=p(()=>c.value.length!==0);let k;function d(){o.value.forEach(a=>{a.abort()}),c.value.length!==0&&(k=!0)}function q(){const a=u.queuedFiles.value.slice(0);u.queuedFiles.value=[],h.value.batch(a)?i(a):a.forEach(V=>{i([V])})}function i(a){if(l.value++,typeof e.factory!="function"){g(a,{});return}const V=e.factory(a);if(!V)n("factoryFailed",new Error("QUploader: factory() does not return properly"),a),l.value--;else if(typeof V.catch=="function"&&typeof V.then=="function"){c.value.push(V);const v=b=>{u.isAlive()===!0&&(c.value=c.value.filter(m=>m!==V),c.value.length===0&&(k=!1),u.queuedFiles.value=u.queuedFiles.value.concat(a),a.forEach(m=>{u.updateFileStatus(m,"failed")}),n("factoryFailed",b,a),l.value--)};V.then(b=>{k===!0?v(new Error("Aborted")):u.isAlive()===!0&&(c.value=c.value.filter(m=>m!==V),g(a,b))}).catch(v)}else g(a,V||{})}function g(a,V){const v=new FormData,b=new XMLHttpRequest,m=(z,j)=>V[z]!==void 0?be(V[z])(j):h.value[z](j),O=m("url",a);if(!O){console.error("q-uploader: invalid or no URL specified"),l.value--;return}const F=m("formFields",a);F!==void 0&&F.forEach(z=>{v.append(z.name,z.value)});let P=0,_=0,T=0,Q=0,R;b.upload.addEventListener("progress",z=>{if(R===!0)return;const j=Math.min(Q,z.loaded);u.uploadedSize.value+=j-T,T=j;let A=T-_;for(let E=P;A>0&&E<a.length;E++){const U=a[E];if(A>U.size)A-=U.size,P++,_+=U.size,u.updateFileStatus(U,"uploading",U.size);else{u.updateFileStatus(U,"uploading",A);return}}},!1),b.onreadystatechange=()=>{b.readyState<4||(b.status&&b.status<400?(u.uploadedFiles.value=u.uploadedFiles.value.concat(a),a.forEach(z=>{u.updateFileStatus(z,"uploaded")}),n("uploaded",{files:a,xhr:b})):(R=!0,u.uploadedSize.value-=T,u.queuedFiles.value=u.queuedFiles.value.concat(a),a.forEach(z=>{u.updateFileStatus(z,"failed")}),n("failed",{files:a,xhr:b})),l.value--,o.value=o.value.filter(z=>z!==b))},b.open(m("method",a),O),m("withCredentials",a)===!0&&(b.withCredentials=!0);const I=m("headers",a);I!==void 0&&I.forEach(z=>{b.setRequestHeader(z.name,z.value)});const G=m("sendRaw",a);a.forEach(z=>{u.updateFileStatus(z,"uploading",0),G!==!0&&v.append(m("fieldName",z),z,z.name),z.xhr=b,z.__abort=()=>{b.abort()},Q+=z.size}),n("uploading",{files:a,xhr:b}),o.value.push(b),G===!0?b.send(new Blob(a)):b.send(v)}return{isUploading:f,isBusy:y,abort:d,upload:q}}const Xa={name:Qa,props:ja,emits:Ka,injectPlugin:Wa},Ya=Ha(Xa),Ja=Se({name:"QField",inheritAttrs:!1,props:{...qt,tag:{type:String,default:"label"}},emits:ml,setup(){return gl(pl({tagProp:!0}))}}),Za={xs:8,sm:10,md:14,lg:20,xl:24},Ga=Se({name:"QChip",props:{...wt,...dl,dense:Boolean,icon:String,iconRight:String,iconRemove:String,iconSelected:String,label:[String,Number],color:String,textColor:String,modelValue:{type:Boolean,default:!0},selected:{type:Boolean,default:null},square:Boolean,outline:Boolean,clickable:Boolean,removable:Boolean,removeAriaLabel:String,tabindex:[String,Number],disable:Boolean,ripple:{type:[Boolean,Object],default:!0}},emits:["update:modelValue","update:selected","remove","click"],setup(e,{slots:n,emit:u}){const{proxy:{$q:o}}=ge(),c=Ct(e,o),l=vl(e,Za),h=p(()=>e.selected===!0||e.icon!==void 0),f=p(()=>e.selected===!0?e.iconSelected||o.iconSet.chip.selected:e.icon),y=p(()=>e.iconRemove||o.iconSet.chip.remove),k=p(()=>e.disable===!1&&(e.clickable===!0||e.selected!==null)),d=p(()=>{const v=e.outline===!0&&e.color||e.textColor;return"q-chip row inline no-wrap items-center"+(e.outline===!1&&e.color!==void 0?` bg-${e.color}`:"")+(v?` text-${v} q-chip--colored`:"")+(e.disable===!0?" disabled":"")+(e.dense===!0?" q-chip--dense":"")+(e.outline===!0?" q-chip--outline":"")+(e.selected===!0?" q-chip--selected":"")+(k.value===!0?" q-chip--clickable cursor-pointer non-selectable q-hoverable":"")+(e.square===!0?" q-chip--square":"")+(c.value===!0?" q-chip--dark q-dark":"")}),q=p(()=>{const v=e.disable===!0?{tabindex:-1,"aria-disabled":"true"}:{tabindex:e.tabindex||0},b={...v,role:"button","aria-hidden":"false","aria-label":e.removeAriaLabel||o.lang.label.remove};return{chip:v,remove:b}});function i(v){v.keyCode===13&&g(v)}function g(v){e.disable||(u("update:selected",!e.selected),u("click",v))}function a(v){(v.keyCode===void 0||v.keyCode===13)&&(ve(v),e.disable===!1&&(u("update:modelValue",!1),u("remove")))}function V(){const v=[];k.value===!0&&v.push(S("div",{class:"q-focus-helper"})),h.value===!0&&v.push(S(Ee,{class:"q-chip__icon q-chip__icon--left",name:f.value}));const b=e.label!==void 0?[S("div",{class:"ellipsis"},[e.label])]:void 0;return v.push(S("div",{class:"q-chip__content col row no-wrap items-center q-anchor--skip"},fl(n.default,b))),e.iconRight&&v.push(S(Ee,{class:"q-chip__icon q-chip__icon--right",name:e.iconRight})),e.removable===!0&&v.push(S(Ee,{class:"q-chip__icon q-chip__icon--remove cursor-pointer",name:y.value,...q.value.remove,onClick:a,onKeyup:a})),v}return()=>{if(e.modelValue===!1)return;const v={class:d.value,style:l.value};return k.value===!0&&Object.assign(v,q.value.chip,{onClick:g,onKeyup:i}),hl("div",v,V(),"ripple",e.ripple!==!1&&e.disable!==!0,()=>[[na,e.ripple]])}}});let it=!1;{const e=document.createElement("div");e.setAttribute("dir","rtl"),Object.assign(e.style,{width:"1px",height:"1px",overflow:"auto"});const n=document.createElement("div");Object.assign(n.style,{width:"1000px",height:"1px"}),document.body.appendChild(e),e.appendChild(n),e.scrollLeft=-1e3,it=e.scrollLeft>=0,e.remove()}const me=1e3,en=["start","center","end","start-force","center-force","end-force"],Il=Array.prototype.filter,tn=window.getComputedStyle(document.body).overflowAnchor===void 0?yl:function(e,n){e!==null&&(e._qOverflowAnimationFrame!==void 0&&cancelAnimationFrame(e._qOverflowAnimationFrame),e._qOverflowAnimationFrame=requestAnimationFrame(()=>{if(e===null)return;e._qOverflowAnimationFrame=void 0;const u=e.children||[];Il.call(u,c=>c.dataset&&c.dataset.qVsAnchor!==void 0).forEach(c=>{delete c.dataset.qVsAnchor});const o=u[n];o?.dataset&&(o.dataset.qVsAnchor="")}))};function Le(e,n){return e+n}function yt(e,n,u,o,c,l,h,f){const y=e===window?document.scrollingElement||document.documentElement:e,k=c===!0?"offsetWidth":"offsetHeight",d={scrollStart:0,scrollViewSize:-h-f,scrollMaxSize:0,offsetStart:-h,offsetEnd:-f};if(c===!0?(e===window?(d.scrollStart=window.pageXOffset||window.scrollX||document.body.scrollLeft||0,d.scrollViewSize+=document.documentElement.clientWidth):(d.scrollStart=y.scrollLeft,d.scrollViewSize+=y.clientWidth),d.scrollMaxSize=y.scrollWidth,l===!0&&(d.scrollStart=(it===!0?d.scrollMaxSize-d.scrollViewSize:0)-d.scrollStart)):(e===window?(d.scrollStart=window.pageYOffset||window.scrollY||document.body.scrollTop||0,d.scrollViewSize+=document.documentElement.clientHeight):(d.scrollStart=y.scrollTop,d.scrollViewSize+=y.clientHeight),d.scrollMaxSize=y.scrollHeight),u!==null)for(let q=u.previousElementSibling;q!==null;q=q.previousElementSibling)q.classList.contains("q-virtual-scroll--skip")===!1&&(d.offsetStart+=q[k]);if(o!==null)for(let q=o.nextElementSibling;q!==null;q=q.nextElementSibling)q.classList.contains("q-virtual-scroll--skip")===!1&&(d.offsetEnd+=q[k]);if(n!==e){const q=y.getBoundingClientRect(),i=n.getBoundingClientRect();c===!0?(d.offsetStart+=i.left-q.left,d.offsetEnd-=i.width):(d.offsetStart+=i.top-q.top,d.offsetEnd-=i.height),e!==window&&(d.offsetStart+=d.scrollStart),d.offsetEnd+=d.scrollMaxSize-d.offsetStart}return d}function nl(e,n,u,o){n==="end"&&(n=(e===window?document.body:e)[u===!0?"scrollWidth":"scrollHeight"]),e===window?u===!0?(o===!0&&(n=(it===!0?document.body.scrollWidth-document.documentElement.clientWidth:0)-n),window.scrollTo(n,window.pageYOffset||window.scrollY||document.body.scrollTop||0)):window.scrollTo(window.pageXOffset||window.scrollX||document.body.scrollLeft||0,n):u===!0?(o===!0&&(n=(it===!0?e.scrollWidth-e.offsetWidth:0)-n),e.scrollLeft=n):e.scrollTop=n}function Ke(e,n,u,o){if(u>=o)return 0;const c=n.length,l=Math.floor(u/me),h=Math.floor((o-1)/me)+1;let f=e.slice(l,h).reduce(Le,0);return u%me!==0&&(f-=n.slice(l*me,u).reduce(Le,0)),o%me!==0&&o!==c&&(f-=n.slice(o,h*me).reduce(Le,0)),f}const ln={virtualScrollSliceSize:{type:[Number,String],default:10},virtualScrollSliceRatioBefore:{type:[Number,String],default:1},virtualScrollSliceRatioAfter:{type:[Number,String],default:1},virtualScrollItemSize:{type:[Number,String],default:24},virtualScrollStickySizeStart:{type:[Number,String],default:0},virtualScrollStickySizeEnd:{type:[Number,String],default:0},tableColspan:[Number,String]},ol={virtualScrollHorizontal:Boolean,onVirtualScroll:Function,...ln};function an({virtualScrollLength:e,getVirtualScrollTarget:n,getVirtualScrollEl:u,virtualScrollItemSizeComputed:o}){const c=ge(),{props:l,emit:h,proxy:f}=c,{$q:y}=f;let k,d,q,i=[],g;const a=$(0),V=$(0),v=$({}),b=$(null),m=$(null),O=$(null),F=$({from:0,to:0}),P=p(()=>l.tableColspan!==void 0?l.tableColspan:100);o===void 0&&(o=p(()=>l.virtualScrollItemSize));const _=p(()=>o.value+";"+l.virtualScrollHorizontal),T=p(()=>_.value+";"+l.virtualScrollSliceRatioBefore+";"+l.virtualScrollSliceRatioAfter);ce(T,()=>{U()}),ce(_,Q);function Q(){E(d,!0)}function R(r){E(r===void 0?d:r)}function I(r,x){const D=n();if(D==null||D.nodeType===8)return;const H=yt(D,u(),b.value,m.value,l.virtualScrollHorizontal,y.lang.rtl,l.virtualScrollStickySizeStart,l.virtualScrollStickySizeEnd);q!==H.scrollViewSize&&U(H.scrollViewSize),z(D,H,Math.min(e.value-1,Math.max(0,parseInt(r,10)||0)),0,en.indexOf(x)!==-1?x:d!==-1&&r>d?"end":"start")}function G(){const r=n();if(r==null||r.nodeType===8)return;const x=yt(r,u(),b.value,m.value,l.virtualScrollHorizontal,y.lang.rtl,l.virtualScrollStickySizeStart,l.virtualScrollStickySizeEnd),D=e.value-1,H=x.scrollMaxSize-x.offsetStart-x.offsetEnd-V.value;if(k===x.scrollStart)return;if(x.scrollMaxSize<=0){z(r,x,0,0);return}q!==x.scrollViewSize&&U(x.scrollViewSize),j(F.value.from);const ee=Math.floor(x.scrollMaxSize-Math.max(x.scrollViewSize,x.offsetEnd)-Math.min(g[D],x.scrollViewSize/2));if(ee>0&&Math.ceil(x.scrollStart)>=ee){z(r,x,D,x.scrollMaxSize-x.offsetEnd-i.reduce(Le,0));return}let N=0,M=x.scrollStart-x.offsetStart,X=M;if(M<=H&&M+x.scrollViewSize>=a.value)M-=a.value,N=F.value.from,X=M;else for(let s=0;M>=i[s]&&N<D;s++)M-=i[s],N+=me;for(;M>0&&N<D;)M-=g[N],M>-x.scrollViewSize?(N++,X=M):X=g[N]+M;z(r,x,N,X)}function z(r,x,D,H,ee){const N=typeof ee=="string"&&ee.indexOf("-force")!==-1,M=N===!0?ee.replace("-force",""):ee,X=M!==void 0?M:"start";let s=Math.max(0,D-v.value[X]),B=s+v.value.total;B>e.value&&(B=e.value,s=Math.max(0,B-v.value.total)),k=x.scrollStart;const J=s!==F.value.from||B!==F.value.to;if(J===!1&&M===void 0){_e(D);return}const{activeElement:ue}=document,Z=O.value;J===!0&&Z!==null&&Z!==ue&&Z.contains(ue)===!0&&(Z.addEventListener("focusout",A),setTimeout(()=>{Z?.removeEventListener("focusout",A)})),tn(Z,D-s);const ke=M!==void 0?g.slice(s,D).reduce(Le,0):0;if(J===!0){const Fe=B>=F.value.from&&s<=F.value.to?F.value.to:B;F.value={from:s,to:Fe},a.value=Ke(i,g,0,s),V.value=Ke(i,g,B,e.value),requestAnimationFrame(()=>{F.value.to!==B&&k===x.scrollStart&&(F.value={from:F.value.from,to:B},V.value=Ke(i,g,B,e.value))})}requestAnimationFrame(()=>{if(k!==x.scrollStart)return;J===!0&&j(s);const Fe=g.slice(s,D).reduce(Le,0),Ve=Fe+x.offsetStart+a.value,Ze=Ve+g[D];let Ue=Ve+H;if(M!==void 0){const ct=Fe-ke,Ne=x.scrollStart+ct;Ue=N!==!0&&Ne<Ve&&Ze<Ne+x.scrollViewSize?Ne:M==="end"?Ze-x.scrollViewSize:Ve-(M==="start"?0:Math.round((x.scrollViewSize-g[D])/2))}k=Ue,nl(r,Ue,l.virtualScrollHorizontal,y.lang.rtl),_e(D)})}function j(r){const x=O.value;if(x){const D=Il.call(x.children,s=>s.classList&&s.classList.contains("q-virtual-scroll--skip")===!1),H=D.length,ee=l.virtualScrollHorizontal===!0?s=>s.getBoundingClientRect().width:s=>s.offsetHeight;let N=r,M,X;for(let s=0;s<H;){for(M=ee(D[s]),s++;s<H&&D[s].classList.contains("q-virtual-scroll--with-prev")===!0;)M+=ee(D[s]),s++;X=M-g[N],X!==0&&(g[N]+=X,i[Math.floor(N/me)]+=X),N++}}}function A(){O.value?.focus()}function E(r,x){const D=1*o.value;(x===!0||Array.isArray(g)===!1)&&(g=[]);const H=g.length;g.length=e.value;for(let N=e.value-1;N>=H;N--)g[N]=D;const ee=Math.floor((e.value-1)/me);i=[];for(let N=0;N<=ee;N++){let M=0;const X=Math.min((N+1)*me,e.value);for(let s=N*me;s<X;s++)M+=g[s];i.push(M)}d=-1,k=void 0,a.value=Ke(i,g,0,F.value.from),V.value=Ke(i,g,F.value.to,e.value),r>=0?(j(F.value.from),we(()=>{I(r)})):pe()}function U(r){if(r===void 0&&typeof window<"u"){const M=n();M!=null&&M.nodeType!==8&&(r=yt(M,u(),b.value,m.value,l.virtualScrollHorizontal,y.lang.rtl,l.virtualScrollStickySizeStart,l.virtualScrollStickySizeEnd).scrollViewSize)}q=r;const x=parseFloat(l.virtualScrollSliceRatioBefore)||0,D=parseFloat(l.virtualScrollSliceRatioAfter)||0,H=1+x+D,ee=r===void 0||r<=0?1:Math.ceil(r/o.value),N=Math.max(1,ee,Math.ceil((l.virtualScrollSliceSize>0?l.virtualScrollSliceSize:10)/H));v.value={total:Math.ceil(N*H),start:Math.ceil(N*x),center:Math.ceil(N*(.5+x)),end:Math.ceil(N*(1+x)),view:ee}}function ie(r,x){const D=l.virtualScrollHorizontal===!0?"width":"height",H={["--q-virtual-scroll-item-"+D]:o.value+"px"};return[r==="tbody"?S(r,{class:"q-virtual-scroll__padding",key:"before",ref:b},[S("tr",[S("td",{style:{[D]:`${a.value}px`,...H},colspan:P.value})])]):S(r,{class:"q-virtual-scroll__padding",key:"before",ref:b,style:{[D]:`${a.value}px`,...H}}),S(r,{class:"q-virtual-scroll__content",key:"content",ref:O,tabindex:-1},x.flat()),r==="tbody"?S(r,{class:"q-virtual-scroll__padding",key:"after",ref:m},[S("tr",[S("td",{style:{[D]:`${V.value}px`,...H},colspan:P.value})])]):S(r,{class:"q-virtual-scroll__padding",key:"after",ref:m,style:{[D]:`${V.value}px`,...H}})]}function _e(r){d!==r&&(l.onVirtualScroll!==void 0&&h("virtualScroll",{index:r,from:F.value.from,to:F.value.to-1,direction:r<d?"decrease":"increase",ref:f}),d=r)}U();const pe=oa(G,y.platform.is.ios===!0?120:35);Sl(()=>{U()});let xe=!1;return ua(()=>{xe=!0}),ia(()=>{if(xe!==!0)return;const r=n();k!==void 0&&r!==void 0&&r!==null&&r.nodeType!==8?nl(r,k,l.virtualScrollHorizontal,y.lang.rtl):I(d)}),Je(()=>{pe.cancel()}),Object.assign(f,{scrollTo:I,reset:Q,refresh:R}),{virtualScrollSliceRange:F,virtualScrollSliceSizeComputed:v,setVirtualScrollSize:U,onVirtualScrollEvt:pe,localResetVirtualScroll:E,padVirtualScroll:ie,scrollTo:I,reset:Q,refresh:R}}const ul=e=>["add","add-unique","toggle"].includes(e),nn=".*+?^${}()|[]\\",on=Object.keys(qt);function St(e,n){if(typeof e=="function")return e;const u=e!==void 0?e:n;return o=>o!==null&&typeof o=="object"&&u in o?o[u]:o}const il=Se({name:"QSelect",inheritAttrs:!1,props:{...ol,...ra,...qt,modelValue:{required:!0},multiple:Boolean,displayValue:[String,Number],displayValueHtml:Boolean,dropdownIcon:String,options:{type:Array,default:()=>[]},optionValue:[Function,String],optionLabel:[Function,String],optionDisable:[Function,String],hideSelected:Boolean,hideDropdownIcon:Boolean,fillInput:Boolean,maxValues:[Number,String],optionsDense:Boolean,optionsDark:{type:Boolean,default:null},optionsSelectedClass:String,optionsHtml:Boolean,optionsCover:Boolean,menuShrink:Boolean,menuAnchor:String,menuSelf:String,menuOffset:Array,popupContentClass:String,popupContentStyle:[String,Array,Object],popupNoRouteDismiss:Boolean,useInput:Boolean,useChips:Boolean,newValueMode:{type:String,validator:ul},mapOptions:Boolean,emitValue:Boolean,disableTabSelection:Boolean,inputDebounce:{type:[Number,String],default:500},inputClass:[Array,String,Object],inputStyle:[Array,String,Object],tabindex:{type:[String,Number],default:0},autocomplete:String,transitionShow:{},transitionHide:{},transitionDuration:{},behavior:{type:String,validator:e=>["default","menu","dialog"].includes(e),default:"default"},virtualScrollItemSize:ol.virtualScrollItemSize.type,onNewValue:Function,onFilter:Function},emits:[...ml,"add","remove","inputValue","keyup","keypress","keydown","popupShow","popupHide","filterAbort"],setup(e,{slots:n,emit:u}){const{proxy:o}=ge(),{$q:c}=o,l=$(!1),h=$(!1),f=$(-1),y=$(""),k=$(!1),d=$(!1);let q=null,i=null,g,a,V,v=null,b,m,O,F;const P=$(null),_=$(null),T=$(null),Q=$(null),R=$(null),I=sa(e),G=ca(Lt),z=p(()=>Array.isArray(e.options)?e.options.length:0),j=p(()=>e.virtualScrollItemSize===void 0?e.optionsDense===!0?24:48:e.virtualScrollItemSize),{virtualScrollSliceRange:A,virtualScrollSliceSizeComputed:E,localResetVirtualScroll:U,padVirtualScroll:ie,onVirtualScrollEvt:_e,scrollTo:pe,setVirtualScrollSize:xe}=an({virtualScrollLength:z,getVirtualScrollTarget:Tl,getVirtualScrollEl:Et,virtualScrollItemSizeComputed:j}),r=pl(),x=p(()=>{const t=e.mapOptions===!0&&e.multiple!==!0,w=e.modelValue!==void 0&&(e.modelValue!==null||t===!0)?e.multiple===!0&&Array.isArray(e.modelValue)?e.modelValue:[e.modelValue]:[];if(e.mapOptions===!0&&Array.isArray(e.options)===!0){const C=e.mapOptions===!0&&g!==void 0?g:[],L=w.map(Y=>Ol(Y,C));return e.modelValue===null&&t===!0?L.filter(Y=>Y!==null):L}return w}),D=p(()=>{const t={};return on.forEach(w=>{const C=e[w];C!==void 0&&(t[w]=C)}),t}),H=p(()=>e.optionsDark===null?r.isDark.value:e.optionsDark),ee=p(()=>Kt(x.value)),N=p(()=>{let t="q-field__input q-placeholder col";return e.hideSelected===!0||x.value.length===0?[t,e.inputClass]:(t+=" q-field__input--padding",e.inputClass===void 0?t:[t,e.inputClass])}),M=p(()=>(e.virtualScrollHorizontal===!0?"q-virtual-scroll--horizontal":"")+(e.popupContentClass?" "+e.popupContentClass:"")),X=p(()=>z.value===0),s=p(()=>x.value.map(t=>re.value(t)).join(", ")),B=p(()=>e.displayValue!==void 0?e.displayValue:s.value),J=p(()=>e.optionsHtml===!0?()=>!0:t=>t?.html===!0),ue=p(()=>e.displayValueHtml===!0||e.displayValue===void 0&&(e.optionsHtml===!0||x.value.some(J.value))),Z=p(()=>r.focused.value===!0?e.tabindex:-1),ke=p(()=>{const t={tabindex:e.tabindex,role:"combobox","aria-label":e.label,"aria-readonly":e.readonly===!0?"true":"false","aria-autocomplete":e.useInput===!0?"list":"none","aria-expanded":l.value===!0?"true":"false","aria-controls":`${r.targetUid.value}_lb`};return f.value>=0&&(t["aria-activedescendant"]=`${r.targetUid.value}_${f.value}`),t}),Fe=p(()=>({id:`${r.targetUid.value}_lb`,role:"listbox","aria-multiselectable":e.multiple===!0?"true":"false"})),Ve=p(()=>x.value.map((t,w)=>({index:w,opt:t,html:J.value(t),selected:!0,removeAtIndex:Dl,toggleOption:Pe,tabindex:Z.value}))),Ze=p(()=>{if(z.value===0)return[];const{from:t,to:w}=A.value;return e.options.slice(t,w).map((C,L)=>{const Y=Ae.value(C)===!0,W=vt(C)===!0,ne=t+L,te={clickable:!0,active:W,activeClass:Ne.value,manualFocus:!0,focused:!1,disable:Y,tabindex:-1,dense:e.optionsDense,dark:H.value,role:"option","aria-selected":W===!0?"true":"false",id:`${r.targetUid.value}_${ne}`,onClick:()=>{Pe(C)}};return Y!==!0&&(f.value===ne&&(te.focused=!0),c.platform.is.desktop===!0&&(te.onMousemove=()=>{l.value===!0&&Ie(ne)})),{index:ne,opt:C,html:J.value(C),label:re.value(C),selected:te.active,focused:te.focused,toggleOption:Pe,setOptionIndex:Ie,itemProps:te}})}),Ue=p(()=>e.dropdownIcon!==void 0?e.dropdownIcon:c.iconSet.arrow.dropdown),ct=p(()=>e.optionsCover===!1&&e.outlined!==!0&&e.standout!==!0&&e.borderless!==!0&&e.rounded!==!0),Ne=p(()=>e.optionsSelectedClass!==void 0?e.optionsSelectedClass:e.color!==void 0?`text-${e.color}`:""),he=p(()=>St(e.optionValue,"value")),re=p(()=>St(e.optionLabel,"label")),Ae=p(()=>St(e.optionDisable,"disable")),Ge=p(()=>x.value.map(he.value)),$l=p(()=>{const t={onInput:Lt,onChange:G,onKeydown:Rt,onKeyup:Ot,onKeypress:Tt,onFocus:$t,onClick(w){a===!0&&qe(w)}};return t.onCompositionstart=t.onCompositionupdate=t.onCompositionend=G,t});ce(x,t=>{g=t,e.useInput===!0&&e.fillInput===!0&&e.multiple!==!0&&r.innerLoading.value!==!0&&(h.value!==!0&&l.value!==!0||ee.value!==!0)&&(V!==!0&&Oe(),(h.value===!0||l.value===!0)&&Be(""))},{immediate:!0}),ce(()=>e.fillInput,Oe),ce(l,ft),ce(z,Xl);function It(t){return e.emitValue===!0?he.value(t):t}function dt(t){if(t!==-1&&t<x.value.length)if(e.multiple===!0){const w=e.modelValue.slice();u("remove",{index:t,value:w.splice(t,1)[0]}),u("update:modelValue",w)}else u("update:modelValue",null)}function Dl(t){dt(t),r.focus()}function Bt(t,w){const C=It(t);if(e.multiple!==!0){e.fillInput===!0&&He(re.value(t),!0,!0),u("update:modelValue",C);return}if(x.value.length===0){u("add",{index:0,value:C}),u("update:modelValue",e.multiple===!0?[C]:C);return}if(w===!0&&vt(t)===!0||e.maxValues!==void 0&&e.modelValue.length>=e.maxValues)return;const L=e.modelValue.slice();u("add",{index:L.length,value:C}),L.push(C),u("update:modelValue",L)}function Pe(t,w){if(r.editable.value!==!0||t===void 0||Ae.value(t)===!0)return;const C=he.value(t);if(e.multiple!==!0){w!==!0&&(He(e.fillInput===!0?re.value(t):"",!0,!0),ze()),_.value?.focus(),(x.value.length===0||Qe(he.value(x.value[0]),C)!==!0)&&u("update:modelValue",e.emitValue===!0?C:t);return}if((a!==!0||k.value===!0)&&r.focus(),$t(),x.value.length===0){const W=e.emitValue===!0?C:t;u("add",{index:0,value:W}),u("update:modelValue",e.multiple===!0?[W]:W);return}const L=e.modelValue.slice(),Y=Ge.value.findIndex(W=>Qe(W,C));if(Y!==-1)u("remove",{index:Y,value:L.splice(Y,1)[0]});else{if(e.maxValues!==void 0&&L.length>=e.maxValues)return;const W=e.emitValue===!0?C:t;u("add",{index:L.length,value:W}),L.push(W)}u("update:modelValue",L)}function Ie(t){if(c.platform.is.desktop!==!0)return;const w=t!==-1&&t<z.value?t:-1;f.value!==w&&(f.value=w)}function et(t=1,w){if(l.value===!0){let C=f.value;do C=Gt(C+t,-1,z.value-1);while(C!==-1&&C!==f.value&&Ae.value(e.options[C])===!0);f.value!==C&&(Ie(C),pe(C),w!==!0&&e.useInput===!0&&e.fillInput===!0&&tt(C>=0?re.value(e.options[C]):b,!0))}}function Ol(t,w){const C=L=>Qe(he.value(L),t);return e.options.find(C)||w.find(C)||t}function vt(t){const w=he.value(t);return Ge.value.find(C=>Qe(C,w))!==void 0}function $t(t){e.useInput===!0&&_.value!==null&&(t===void 0||_.value===t.target&&t.target.value===s.value)&&_.value.select()}function Dt(t){ma(t,27)===!0&&l.value===!0&&(qe(t),ze(),Oe()),u("keyup",t)}function Ot(t){const{value:w}=t.target;if(t.keyCode!==void 0){Dt(t);return}if(t.target.value="",q!==null&&(clearTimeout(q),q=null),i!==null&&(clearTimeout(i),i=null),Oe(),typeof w=="string"&&w.length!==0){const C=w.toLocaleLowerCase(),L=W=>{const ne=e.options.find(te=>String(W.value(te)).toLocaleLowerCase()===C);return ne===void 0?!1:(x.value.indexOf(ne)===-1?Pe(ne):ze(),!0)},Y=W=>{L(he)!==!0&&W!==!0&&L(re)!==!0&&Be(w,!0,()=>Y(!0))};Y()}else r.clearValue(t)}function Tt(t){u("keypress",t)}function Rt(t){if(u("keydown",t),da(t)===!0)return;const w=y.value.length!==0&&(e.newValueMode!==void 0||e.onNewValue!==void 0),C=t.shiftKey!==!0&&e.disableTabSelection!==!0&&e.multiple!==!0&&(f.value!==-1||w===!0);if(t.keyCode===27){gt(t);return}if(t.keyCode===9&&C===!1){$e();return}if(t.target===void 0||t.target.id!==r.targetUid.value||r.editable.value!==!0)return;if(t.keyCode===40&&r.innerLoading.value!==!0&&l.value===!1){ve(t),De();return}if(t.keyCode===8&&(e.useChips===!0||e.clearable===!0)&&e.hideSelected!==!0&&y.value.length===0){e.multiple===!0&&Array.isArray(e.modelValue)===!0?dt(e.modelValue.length-1):e.multiple!==!0&&e.modelValue!==null&&u("update:modelValue",null);return}(t.keyCode===35||t.keyCode===36)&&(typeof y.value!="string"||y.value.length===0)&&(ve(t),f.value=-1,et(t.keyCode===36?1:-1,e.multiple)),(t.keyCode===33||t.keyCode===34)&&E.value!==void 0&&(ve(t),f.value=Math.max(-1,Math.min(z.value,f.value+(t.keyCode===33?-1:1)*E.value.view)),et(t.keyCode===33?1:-1,e.multiple)),(t.keyCode===38||t.keyCode===40)&&(ve(t),et(t.keyCode===38?-1:1,e.multiple));const L=z.value;if((O===void 0||F<Date.now())&&(O=""),L>0&&e.useInput!==!0&&t.key!==void 0&&t.key.length===1&&t.altKey===!1&&t.ctrlKey===!1&&t.metaKey===!1&&(t.keyCode!==32||O.length!==0)){l.value!==!0&&De(t);const Y=t.key.toLocaleLowerCase(),W=O.length===1&&O[0]===Y;F=Date.now()+1500,W===!1&&(ve(t),O+=Y);const ne=new RegExp("^"+O.split("").map(mt=>nn.indexOf(mt)!==-1?"\\"+mt:mt).join(".*"),"i");let te=f.value;if(W===!0||te<0||ne.test(re.value(e.options[te]))!==!0)do te=Gt(te+1,-1,L-1);while(te!==f.value&&(Ae.value(e.options[te])===!0||ne.test(re.value(e.options[te]))!==!0));f.value!==te&&we(()=>{Ie(te),pe(te),te>=0&&e.useInput===!0&&e.fillInput===!0&&tt(re.value(e.options[te]),!0)});return}if(!(t.keyCode!==13&&(t.keyCode!==32||e.useInput===!0||O!=="")&&(t.keyCode!==9||C===!1))){if(t.keyCode!==9&&ve(t),f.value!==-1&&f.value<L){Pe(e.options[f.value]);return}if(w===!0){const Y=(W,ne)=>{if(ne){if(ul(ne)!==!0)return}else ne=e.newValueMode;if(He("",e.multiple!==!0,!0),W==null)return;(ne==="toggle"?Pe:Bt)(W,ne==="add-unique"),e.multiple!==!0&&(_.value?.focus(),ze())};if(e.onNewValue!==void 0?u("newValue",y.value,Y):Y(y.value),e.multiple!==!0)return}l.value===!0?$e():r.innerLoading.value!==!0&&De()}}function Et(){return a===!0?R.value:T.value!==null&&T.value.contentEl!==null?T.value.contentEl:void 0}function Tl(){return Et()}function Rl(){return e.hideSelected===!0?[]:n["selected-item"]!==void 0?Ve.value.map(t=>n["selected-item"](t)).slice():n.selected!==void 0?[].concat(n.selected()):e.useChips===!0?Ve.value.map((t,w)=>S(Ga,{key:"option-"+w,removable:r.editable.value===!0&&Ae.value(t.opt)!==!0,dense:!0,textColor:e.color,tabindex:Z.value,onRemove(){t.removeAtIndex(w)}},()=>S("span",{class:"ellipsis",[t.html===!0?"innerHTML":"textContent"]:re.value(t.opt)}))):[S("span",{class:"ellipsis",[ue.value===!0?"innerHTML":"textContent"]:B.value})]}function Mt(){if(X.value===!0)return n["no-option"]!==void 0?n["no-option"]({inputValue:y.value}):void 0;const t=n.option!==void 0?n.option:C=>S(Pa,{key:C.index,...C.itemProps},()=>S(Fa,()=>S(Va,()=>S("span",{[C.html===!0?"innerHTML":"textContent"]:C.label}))));let w=ie("div",Ze.value.map(t));return n["before-options"]!==void 0&&(w=n["before-options"]().concat(w)),_l(n["after-options"],w)}function El(t,w){const C=w===!0?{...ke.value,...r.splitAttrs.attributes.value}:void 0,L={ref:w===!0?_:void 0,key:"i_t",class:N.value,style:e.inputStyle,value:y.value!==void 0?y.value:"",type:"search",...C,id:w===!0?r.targetUid.value:void 0,maxlength:e.maxlength,autocomplete:e.autocomplete,"data-autofocus":t===!0||e.autofocus===!0||void 0,disabled:e.disable===!0,readonly:e.readonly===!0,...$l.value};return t!==!0&&a===!0&&(Array.isArray(L.class)===!0?L.class=[...L.class,"no-pointer-events"]:L.class+=" no-pointer-events"),S("input",L)}function Lt(t){q!==null&&(clearTimeout(q),q=null),i!==null&&(clearTimeout(i),i=null),!(t&&t.target&&t.target.qComposing===!0)&&(tt(t.target.value||""),V=!0,b=y.value,r.focused.value!==!0&&(a!==!0||k.value===!0)&&r.focus(),e.onFilter!==void 0&&(q=setTimeout(()=>{q=null,Be(y.value)},e.inputDebounce)))}function tt(t,w){y.value!==t&&(y.value=t,w===!0||e.inputDebounce===0||e.inputDebounce==="0"?u("inputValue",t):i=setTimeout(()=>{i=null,u("inputValue",t)},e.inputDebounce))}function He(t,w,C){V=C!==!0,e.useInput===!0&&(tt(t,!0),(w===!0||C!==!0)&&(b=t),w!==!0&&Be(t))}function Be(t,w,C){if(e.onFilter===void 0||w!==!0&&r.focused.value!==!0)return;r.innerLoading.value===!0?u("filterAbort"):(r.innerLoading.value=!0,d.value=!0),t!==""&&e.multiple!==!0&&x.value.length!==0&&V!==!0&&t===re.value(x.value[0])&&(t="");const L=setTimeout(()=>{l.value===!0&&(l.value=!1)},10);v!==null&&clearTimeout(v),v=L,u("filter",t,(Y,W)=>{(w===!0||r.focused.value===!0)&&v===L&&(clearTimeout(v),typeof Y=="function"&&Y(),d.value=!1,we(()=>{r.innerLoading.value=!1,r.editable.value===!0&&(w===!0?l.value===!0&&ze():l.value===!0?ft(!0):l.value=!0),typeof W=="function"&&we(()=>{W(o)}),typeof C=="function"&&we(()=>{C(o)})}))},()=>{r.focused.value===!0&&v===L&&(clearTimeout(v),r.innerLoading.value=!1,d.value=!1),l.value===!0&&(l.value=!1)})}function Ml(){return S(qa,{ref:T,class:M.value,style:e.popupContentStyle,modelValue:l.value,fit:e.menuShrink!==!0,cover:e.optionsCover===!0&&X.value!==!0&&e.useInput!==!0,anchor:e.menuAnchor,self:e.menuSelf,offset:e.menuOffset,dark:H.value,noParentEvent:!0,noRefocus:!0,noFocus:!0,noRouteDismiss:e.popupNoRouteDismiss,square:ct.value,transitionShow:e.transitionShow,transitionHide:e.transitionHide,transitionDuration:e.transitionDuration,separateClosePopup:!0,...Fe.value,onScrollPassive:_e,onBeforeShow:Nt,onBeforeHide:Ll,onShow:Ul},Mt)}function Ll(t){Ht(t),$e()}function Ul(){xe()}function Nl(t){qe(t),_.value?.focus(),k.value=!0,window.scrollTo(window.pageXOffset||window.scrollX||document.body.scrollLeft||0,0)}function Hl(t){qe(t),we(()=>{k.value=!1})}function Ql(){const t=[S(Ja,{class:`col-auto ${r.fieldClass.value}`,...D.value,for:r.targetUid.value,dark:H.value,square:!0,loading:d.value,itemAligned:!1,filled:!0,stackLabel:y.value.length!==0,...r.splitAttrs.listeners.value,onFocus:Nl,onBlur:Hl},{...n,rawControl:()=>r.getControl(!0),before:void 0,after:void 0})];return l.value===!0&&t.push(S("div",{ref:R,class:M.value+" scroll",style:e.popupContentStyle,...Fe.value,onClick:gt,onScrollPassive:_e},Mt())),S(bl,{ref:Q,modelValue:h.value,position:e.useInput===!0?"top":void 0,transitionShow:m,transitionHide:e.transitionHide,transitionDuration:e.transitionDuration,noRouteDismiss:e.popupNoRouteDismiss,onBeforeShow:Nt,onBeforeHide:jl,onHide:Kl,onShow:Wl},()=>S("div",{class:"q-select__dialog"+(H.value===!0?" q-select__dialog--dark q-dark":"")+(k.value===!0?" q-select__dialog--focused":"")},t))}function jl(t){Ht(t),Q.value!==null&&Q.value.__updateRefocusTarget(r.rootRef.value.querySelector(".q-field__native > [tabindex]:last-child")),r.focused.value=!1}function Kl(t){ze(),r.focused.value===!1&&u("blur",t),Oe()}function Wl(){const t=document.activeElement;(t===null||t.id!==r.targetUid.value)&&_.value!==null&&_.value!==t&&_.value.focus(),xe()}function $e(){h.value!==!0&&(f.value=-1,l.value===!0&&(l.value=!1),r.focused.value===!1&&(v!==null&&(clearTimeout(v),v=null),r.innerLoading.value===!0&&(u("filterAbort"),r.innerLoading.value=!1,d.value=!1)))}function De(t){r.editable.value===!0&&(a===!0?(r.onControlFocusin(t),h.value=!0,we(()=>{r.focus()})):r.focus(),e.onFilter!==void 0?Be(y.value):(X.value!==!0||n["no-option"]!==void 0)&&(l.value=!0))}function ze(){h.value=!1,$e()}function Oe(){e.useInput===!0&&He(e.multiple!==!0&&e.fillInput===!0&&x.value.length!==0&&re.value(x.value[0])||"",!0,!0)}function ft(t){let w=-1;if(t===!0){if(x.value.length!==0){const C=he.value(x.value[0]);w=e.options.findIndex(L=>Qe(he.value(L),C))}U(w)}Ie(w)}function Xl(t,w){l.value===!0&&r.innerLoading.value===!1&&(U(-1,!0),we(()=>{l.value===!0&&r.innerLoading.value===!1&&(t>w?U():ft(!0))}))}function Ut(){h.value===!1&&T.value!==null&&T.value.updatePosition()}function Nt(t){t!==void 0&&qe(t),u("popupShow",t),r.hasPopupOpen=!0,r.onControlFocusin(t)}function Ht(t){t!==void 0&&qe(t),u("popupHide",t),r.hasPopupOpen=!1,r.onControlFocusout(t)}function Qt(){a=c.platform.is.mobile!==!0&&e.behavior!=="dialog"?!1:e.behavior!=="menu"&&(e.useInput===!0?n["no-option"]!==void 0||e.onFilter!==void 0||X.value===!1:!0),m=c.platform.is.ios===!0&&a===!0&&e.useInput===!0?"fade":e.transitionShow}return va(Qt),fa(Ut),Qt(),Je(()=>{q!==null&&clearTimeout(q),i!==null&&clearTimeout(i)}),Object.assign(o,{showPopup:De,hidePopup:ze,removeAtIndex:dt,add:Bt,toggleOption:Pe,getOptionIndex:()=>f.value,setOptionIndex:Ie,moveOptionSelection:et,filter:Be,updateMenuPosition:Ut,updateInputValue:He,isOptionSelected:vt,getEmittingOptionValue:It,isOptionDisabled:(...t)=>Ae.value.apply(null,t)===!0,getOptionValue:(...t)=>he.value.apply(null,t),getOptionLabel:(...t)=>re.value.apply(null,t)}),Object.assign(r,{innerValue:x,fieldClass:p(()=>`q-select q-field--auto-height q-select--with${e.useInput!==!0?"out":""}-input q-select--with${e.useChips!==!0?"out":""}-chips q-select--${e.multiple===!0?"multiple":"single"}`),inputRef:P,targetRef:_,hasValue:ee,showPopup:De,floatingLabel:p(()=>e.hideSelected!==!0&&ee.value===!0||typeof y.value=="number"||y.value.length!==0||Kt(e.displayValue)),getControlChild:()=>{if(r.editable.value!==!1&&(h.value===!0||X.value!==!0||n["no-option"]!==void 0))return a===!0?Ql():Ml();r.hasPopupOpen===!0&&(r.hasPopupOpen=!1)},controlEvents:{onFocusin(t){r.onControlFocusin(t)},onFocusout(t){r.onControlFocusout(t,()=>{Oe(),$e()})},onClick(t){if(gt(t),a!==!0&&l.value===!0){$e(),_.value?.focus();return}De(t)}},getControl:t=>{const w=Rl(),C=t===!0||h.value!==!0||a!==!0;if(e.useInput===!0)w.push(El(t,C));else if(r.editable.value===!0){const Y=C===!0?ke.value:void 0;w.push(S("input",{ref:C===!0?_:void 0,key:"d_t",class:"q-select__focus-target",id:C===!0?r.targetUid.value:void 0,value:B.value,readonly:!0,"data-autofocus":t===!0||e.autofocus===!0||void 0,...Y,onKeydown:Rt,onKeyup:Dt,onKeypress:Tt})),C===!0&&typeof e.autocomplete=="string"&&e.autocomplete.length!==0&&w.push(S("input",{class:"q-select__autocomplete-input",autocomplete:e.autocomplete,tabindex:-1,onKeyup:Ot}))}if(I.value!==void 0&&e.disable!==!0&&Ge.value.length!==0){const Y=Ge.value.map(W=>S("option",{value:W,selected:!0}));w.push(S("select",{class:"hidden",name:I.value,multiple:e.multiple},Y))}const L=e.useInput===!0||C!==!0?void 0:r.splitAttrs.attributes.value;return S("div",{class:"q-field__native row items-center",...L,...r.splitAttrs.listeners.value},w)},getInnerAppend:()=>e.loading!==!0&&d.value!==!0&&e.hideDropdownIcon!==!0?[S(Ee,{class:"q-select__dropdown-icon"+(l.value===!0?" rotate-180":""),name:Ue.value})]:null}),gl(r)}});function At(){const{emit:e,proxy:n}=ge(),u=$(null);function o(){u.value.show()}function c(){u.value.hide()}function l(f){e("ok",f),c()}function h(){e("hide")}return Object.assign(n,{show:o,hide:c}),{dialogRef:u,onDialogHide:h,onDialogOK:l,onDialogCancel:c}}const Bl=["ok","hide"];At.emits=Bl;At.emitsObject=Al(Bl);function un(e){const n=[.06,6,50];return typeof e=="string"&&e.length&&e.split(":").forEach((u,o)=>{const c=parseFloat(u);c&&(n[o]=c)}),n}const rn=ga({name:"touch-swipe",beforeMount(e,{value:n,arg:u,modifiers:o}){if(o.mouse!==!0&&Re.has.touch!==!0)return;const c=o.mouseCapture===!0?"Capture":"",l={handler:n,sensitivity:un(u),direction:el(o),noop:yl,mouseStart(h){tl(h,l)&&pa(h)&&(lt(l,"temp",[[document,"mousemove","move",`notPassive${c}`],[document,"mouseup","end","notPassiveCapture"]]),l.start(h,!0))},touchStart(h){if(tl(h,l)){const f=h.target;lt(l,"temp",[[f,"touchmove","move","notPassiveCapture"],[f,"touchcancel","end","notPassiveCapture"],[f,"touchend","end","notPassiveCapture"]]),l.start(h)}},start(h,f){Re.is.firefox===!0&&ht(e,!0);const y=Wt(h);l.event={x:y.left,y:y.top,time:Date.now(),mouse:f===!0,dir:!1}},move(h){if(l.event===void 0)return;if(l.event.dir!==!1){ve(h);return}const f=Date.now()-l.event.time;if(f===0)return;const y=Wt(h),k=y.left-l.event.x,d=Math.abs(k),q=y.top-l.event.y,i=Math.abs(q);if(l.event.mouse!==!0){if(d<l.sensitivity[1]&&i<l.sensitivity[1]){l.end(h);return}}else if(window.getSelection().toString()!==""){l.end(h);return}else if(d<l.sensitivity[2]&&i<l.sensitivity[2])return;const g=d/f,a=i/f;l.direction.vertical===!0&&d<i&&d<100&&a>l.sensitivity[0]&&(l.event.dir=q<0?"up":"down"),l.direction.horizontal===!0&&d>i&&i<100&&g>l.sensitivity[0]&&(l.event.dir=k<0?"left":"right"),l.direction.up===!0&&d<i&&q<0&&d<100&&a>l.sensitivity[0]&&(l.event.dir="up"),l.direction.down===!0&&d<i&&q>0&&d<100&&a>l.sensitivity[0]&&(l.event.dir="down"),l.direction.left===!0&&d>i&&k<0&&i<100&&g>l.sensitivity[0]&&(l.event.dir="left"),l.direction.right===!0&&d>i&&k>0&&i<100&&g>l.sensitivity[0]&&(l.event.dir="right"),l.event.dir!==!1?(ve(h),l.event.mouse===!0&&(document.body.classList.add("no-pointer-events--children"),document.body.classList.add("non-selectable"),za(),l.styleCleanup=V=>{l.styleCleanup=void 0,document.body.classList.remove("non-selectable");const v=()=>{document.body.classList.remove("no-pointer-events--children")};V===!0?setTimeout(v,50):v()}),l.handler({evt:h,touch:l.event.mouse!==!0,mouse:l.event.mouse,direction:l.event.dir,duration:f,distance:{x:d,y:i}})):l.end(h)},end(h){l.event!==void 0&&(pt(l,"temp"),Re.is.firefox===!0&&ht(e,!1),l.styleCleanup?.(!0),h!==void 0&&l.event.dir!==!1&&ve(h),l.event=void 0)}};if(e.__qtouchswipe=l,o.mouse===!0){const h=o.mouseCapture===!0||o.mousecapture===!0?"Capture":"";lt(l,"main",[[e,"mousedown","mouseStart",`passive${h}`]])}Re.has.touch===!0&&lt(l,"main",[[e,"touchstart","touchStart",`passive${o.capture===!0?"Capture":""}`],[e,"touchmove","noop","notPassiveCapture"]])},updated(e,n){const u=e.__qtouchswipe;u!==void 0&&(n.oldValue!==n.value&&(typeof n.value!="function"&&u.end(),u.handler=n.value),u.direction=el(n.modifiers))},beforeUnmount(e){const n=e.__qtouchswipe;n!==void 0&&(pt(n,"main"),pt(n,"temp"),Re.is.firefox===!0&&ht(e,!1),n.styleCleanup?.(),delete e.__qtouchswipe)}});function sn(){let e=Object.create(null);return{getCache:(n,u)=>e[n]===void 0?e[n]=typeof u=="function"?u():u:e[n],setCache(n,u){e[n]=u},hasCache(n){return Object.hasOwnProperty.call(e,n)},clearCache(n){n!==void 0?delete e[n]:e=Object.create(null)}}}const cn={name:{required:!0},disable:Boolean},rl={setup(e,{slots:n}){return()=>S("div",{class:"q-panel scroll",role:"tabpanel"},Ye(n.default))}},dn={modelValue:{required:!0},animated:Boolean,infinite:Boolean,swipeable:Boolean,vertical:Boolean,transitionPrev:String,transitionNext:String,transitionDuration:{type:[String,Number],default:300},keepAlive:Boolean,keepAliveInclude:[String,Array,RegExp],keepAliveExclude:[String,Array,RegExp],keepAliveMax:Number},vn=["update:modelValue","beforeTransition","transition"];function fn(){const{props:e,emit:n,proxy:u}=ge(),{getCache:o}=sn(),{registerTimeout:c}=ha();let l,h;const f=$(null),y={value:null};function k(A){const E=e.vertical===!0?"up":"left";Q((u.$q.lang.rtl===!0?-1:1)*(A.direction===E?1:-1))}const d=p(()=>[[rn,k,void 0,{horizontal:e.vertical!==!0,vertical:e.vertical,mouse:!0}]]),q=p(()=>e.transitionPrev||`slide-${e.vertical===!0?"down":"right"}`),i=p(()=>e.transitionNext||`slide-${e.vertical===!0?"up":"left"}`),g=p(()=>`--q-transition-duration: ${e.transitionDuration}ms`),a=p(()=>typeof e.modelValue=="string"||typeof e.modelValue=="number"?e.modelValue:String(e.modelValue)),V=p(()=>({include:e.keepAliveInclude,exclude:e.keepAliveExclude,max:e.keepAliveMax})),v=p(()=>e.keepAliveInclude!==void 0||e.keepAliveExclude!==void 0);ce(()=>e.modelValue,(A,E)=>{const U=F(A)===!0?P(A):-1;h!==!0&&T(U===-1?0:U<P(E)?-1:1),y.value!==U&&(y.value=U,n("beforeTransition",A,E),c(()=>{n("transition",A,E)},e.transitionDuration))});function b(){Q(1)}function m(){Q(-1)}function O(A){n("update:modelValue",A)}function F(A){return A!=null&&A!==""}function P(A){return l.findIndex(E=>E.props.name===A&&E.props.disable!==""&&E.props.disable!==!0)}function _(){return l.filter(A=>A.props.disable!==""&&A.props.disable!==!0)}function T(A){const E=A!==0&&e.animated===!0&&y.value!==-1?"q-transition--"+(A===-1?q.value:i.value):null;f.value!==E&&(f.value=E)}function Q(A,E=y.value){let U=E+A;for(;U!==-1&&U<l.length;){const ie=l[U];if(ie!==void 0&&ie.props.disable!==""&&ie.props.disable!==!0){T(A),h=!0,n("update:modelValue",ie.props.name),setTimeout(()=>{h=!1});return}U+=A}e.infinite===!0&&l.length!==0&&E!==-1&&E!==l.length&&Q(A,A===-1?l.length:-1)}function R(){const A=P(e.modelValue);return y.value!==A&&(y.value=A),!0}function I(){const A=F(e.modelValue)===!0&&R()&&l[y.value];return e.keepAlive===!0?[S(ba,V.value,[S(v.value===!0?o(a.value,()=>({...rl,name:a.value})):rl,{key:a.value,style:g.value},()=>A)])]:[S("div",{class:"q-panel scroll",style:g.value,key:a.value,role:"tabpanel"},[A])]}function G(){if(l.length!==0)return e.animated===!0?[S(ya,{name:f.value},I)]:I()}function z(A){return l=Sa(Ye(A.default,[])).filter(E=>E.props!==null&&E.props.slot===void 0&&F(E.props.name)===!0),l.length}function j(){return l}return Object.assign(u,{next:b,previous:m,goTo:O}),{panelIndex:y,panelDirectives:d,updatePanelsList:z,updatePanelIndex:R,getPanelContent:G,getEnabledPanels:_,getPanels:j,isValidPanelName:F,keepAliveProps:V,needsUniqueKeepAliveWrapper:v,goToPanelByOffset:Q,goToPanel:O,nextPanel:b,previousPanel:m}}const mn=Se({name:"QCarouselSlide",props:{...cn,imgSrc:String},setup(e,{slots:n}){const u=p(()=>e.imgSrc?{backgroundImage:`url("${e.imgSrc}")`}:{});return()=>S("div",{class:"q-carousel__slide",style:u.value},Ye(n.default))}}),gn=Se({name:"QCarouselControl",props:{position:{type:String,default:"bottom-right",validator:e=>["top-right","top-left","bottom-right","bottom-left","top","right","bottom","left"].includes(e)},offset:{type:Array,default:()=>[18,18],validator:e=>e.length===2}},setup(e,{slots:n}){const u=p(()=>`q-carousel__control absolute absolute-${e.position}`),o=p(()=>({margin:`${e.offset[1]}px ${e.offset[0]}px`}));return()=>S("div",{class:u.value,style:o.value},Ye(n.default))}});let We=0;const pn={fullscreen:Boolean,noRouteFullscreenExit:Boolean},hn=["update:fullscreen","fullscreen"];function yn(){const e=ge(),{props:n,emit:u,proxy:o}=e;let c,l,h;const f=$(!1);_a(e)===!0&&ce(()=>o.$route.fullPath,()=>{n.noRouteFullscreenExit!==!0&&d()}),ce(()=>n.fullscreen,q=>{f.value!==q&&y()}),ce(f,q=>{u("update:fullscreen",q),u("fullscreen",q)});function y(){f.value===!0?d():k()}function k(){f.value!==!0&&(f.value=!0,h=o.$el.parentNode,h.replaceChild(l,o.$el),document.body.appendChild(o.$el),We++,We===1&&document.body.classList.add("q-body--fullscreen-mixin"),c={handler:d},Xt.add(c))}function d(){f.value===!0&&(c!==void 0&&(Xt.remove(c),c=void 0),h.replaceChild(o.$el,l),f.value=!1,We=Math.max(0,We-1),We===0&&(document.body.classList.remove("q-body--fullscreen-mixin"),o.$el.scrollIntoView!==void 0&&setTimeout(()=>{o.$el.scrollIntoView()})))}return Sl(()=>{l=document.createElement("span")}),rt(()=>{n.fullscreen===!0&&k()}),Je(d),Object.assign(o,{toggleFullscreen:y,setFullscreen:k,exitFullscreen:d}),{inFullscreen:f,toggleFullscreen:y}}const Sn=["top","right","bottom","left"],bn=["regular","flat","outline","push","unelevated"],_n=Se({name:"QCarousel",props:{...wt,...dn,...pn,transitionPrev:{type:String,default:"fade"},transitionNext:{type:String,default:"fade"},height:String,padding:Boolean,controlColor:String,controlTextColor:String,controlType:{type:String,validator:e=>bn.includes(e),default:"flat"},autoplay:[Number,Boolean],arrows:Boolean,prevIcon:String,nextIcon:String,navigation:Boolean,navigationPosition:{type:String,validator:e=>Sn.includes(e)},navigationIcon:String,navigationActiveIcon:String,thumbnails:Boolean},emits:[...hn,...vn],setup(e,{slots:n}){const{proxy:{$q:u}}=ge(),o=Ct(e,u);let c=null,l;const{updatePanelsList:h,getPanelContent:f,panelDirectives:y,goToPanel:k,previousPanel:d,nextPanel:q,getEnabledPanels:i,panelIndex:g}=fn(),{inFullscreen:a}=yn(),V=p(()=>a.value!==!0&&e.height!==void 0?{height:e.height}:{}),v=p(()=>e.vertical===!0?"vertical":"horizontal"),b=p(()=>e.navigationPosition||(e.vertical===!0?"right":"bottom")),m=p(()=>`q-carousel q-panel-parent q-carousel--with${e.padding===!0?"":"out"}-padding`+(a.value===!0?" fullscreen":"")+(o.value===!0?" q-carousel--dark q-dark":"")+(e.arrows===!0?` q-carousel--arrows-${v.value}`:"")+(e.navigation===!0?` q-carousel--navigation-${b.value}`:"")),O=p(()=>{const I=[e.prevIcon||u.iconSet.carousel[e.vertical===!0?"up":"left"],e.nextIcon||u.iconSet.carousel[e.vertical===!0?"down":"right"]];return e.vertical===!1&&u.lang.rtl===!0?I.reverse():I}),F=p(()=>e.navigationIcon||u.iconSet.carousel.navigationIcon),P=p(()=>e.navigationActiveIcon||F.value),_=p(()=>({color:e.controlColor,textColor:e.controlTextColor,round:!0,[e.controlType]:!0,dense:!0}));ce(()=>e.modelValue,()=>{e.autoplay&&T()}),ce(()=>e.autoplay,I=>{I?T():c!==null&&(clearTimeout(c),c=null)});function T(){const I=xa(e.autoplay)===!0?Math.abs(e.autoplay):5e3;c!==null&&clearTimeout(c),c=setTimeout(()=>{c=null,I>=0?q():d()},I)}rt(()=>{e.autoplay&&T()}),Je(()=>{c!==null&&clearTimeout(c)});function Q(I,G){return S("div",{class:`q-carousel__control q-carousel__navigation no-wrap absolute flex q-carousel__navigation--${I} q-carousel__navigation--${b.value}`+(e.controlColor!==void 0?` text-${e.controlColor}`:"")},[S("div",{class:"q-carousel__navigation-inner flex flex-center no-wrap"},i().map(G))])}function R(){const I=[];if(e.navigation===!0){const G=n["navigation-icon"]!==void 0?n["navigation-icon"]:j=>S(de,{key:"nav"+j.name,class:`q-carousel__navigation-icon q-carousel__navigation-icon--${j.active===!0?"":"in"}active`,...j.btnProps,onClick:j.onClick}),z=l-1;I.push(Q("buttons",(j,A)=>{const E=j.props.name,U=g.value===A;return G({index:A,maxIndex:z,name:E,active:U,btnProps:{icon:U===!0?P.value:F.value,size:"sm",..._.value},onClick:()=>{k(E)}})}))}else if(e.thumbnails===!0){const G=e.controlColor!==void 0?` text-${e.controlColor}`:"";I.push(Q("thumbnails",z=>{const j=z.props;return S("img",{key:"tmb#"+j.name,class:`q-carousel__thumbnail q-carousel__thumbnail--${j.name===e.modelValue?"":"in"}active`+G,src:j.imgSrc||j["img-src"],onClick:()=>{k(j.name)}})}))}return e.arrows===!0&&g.value>=0&&((e.infinite===!0||g.value>0)&&I.push(S("div",{key:"prev",class:`q-carousel__control q-carousel__arrow q-carousel__prev-arrow q-carousel__prev-arrow--${v.value} absolute flex flex-center`},[S(de,{icon:O.value[0],..._.value,onClick:d})])),(e.infinite===!0||g.value<l-1)&&I.push(S("div",{key:"next",class:`q-carousel__control q-carousel__arrow q-carousel__next-arrow q-carousel__next-arrow--${v.value} absolute flex flex-center`},[S(de,{icon:O.value[1],..._.value,onClick:q})]))),_l(n.control,I)}return()=>(l=h(n),S("div",{class:m.value,style:V.value},[hl("div",{class:"q-carousel__slides-container"},f(),"sl-cont",e.swipeable,()=>y.value)].concat(R())))}}),xn=st({__name:"ProductImgCarusel",props:{images:{}},emits:["refresh-data"],setup(e,{emit:n}){const u=e,o=n,c=Vt(),l=Ft(),h=kt(),{isManager:f}=Pt(p(()=>h.user?.role)),y=$(0),k=$(!1);function d(){c.dialog({title:" ",message:"     ?",cancel:!0,persistent:!0}).onOk(()=>{q()})}async function q(){try{const i=u.images[y.value];await l.deleteFile(i.id),o("refresh-data")}catch(i){console.error(i)}}return(i,g)=>(ae(),se(_n,{swipeable:"",animated:"",arrows:"",modelValue:y.value,"onUpdate:modelValue":g[2]||(g[2]=a=>y.value=a),fullscreen:k.value,"onUpdate:fullscreen":g[3]||(g[3]=a=>k.value=a),infinite:"",height:ye(f)?"200px":"250px",class:"q-mb-sm"},{control:le(()=>[K(gn,{position:"bottom-right",offset:[18,18]},{default:le(()=>[ye(f)?Me("",!0):(ae(),se(de,{key:0,push:"",round:"",dense:"",color:"white","text-color":"primary",icon:k.value?"fullscreen_exit":"fullscreen",onClick:g[0]||(g[0]=a=>k.value=!k.value)},null,8,["icon"])),ye(f)?(ae(),se(de,{key:1,round:"",dense:"","text-color":"red",icon:"delete",onClick:g[1]||(g[1]=a=>d())})):Me("",!0)]),_:1})]),default:le(()=>[(ae(!0),Xe(wl,null,xl(i.images,(a,V)=>(ae(),se(mn,{key:V,name:V,"img-src":a.file_path,class:"card-image"},null,8,["name","img-src"]))),128))]),_:1},8,["modelValue","fullscreen","height"]))}}),sl=zt(xn,[["__scopeId","data-v-11af1822"]]),wn={class:"text-h6 q-mb-md"},Cn={class:"text-center upload-title"},qn={key:1},kn={class:"text-h6 text-center q-mt-sm"},Fn={class:"text-bold"},Vn=st({__name:"AddProductModal",props:{productData:{}},emits:["refresh-data","add-product"],setup(e,{emit:n}){const u=e,o=n,c=Vt(),l=Ft(),h=Aa(),{dialogRef:f}=At(),y=kt(),{isManager:k}=Pt(p(()=>y.user?.role)),d=Fl(),q=$(!1),i=$({id:null,name:"",price:null,category_id:null,unit_id:null,qty:null,description:"",images:"",origin_country:"",unit:null}),g=new FormData;rt(()=>{u.productData&&(i.value=u.productData)});async function a(){try{let F=null;i.value?.id?F=l.updateProduct(i.value):(v(),F=await l.createProduct(g)),F&&(i.value.id=F.id,c.notify({message:" ",color:"primary"}),o("refresh-data"))}catch(F){console.error(F)}}function V(){o("add-product",i.value)}function v(){i?.value?.id&&g.append("id",i.value.id.toString()),i.value?.name&&g.append("name",i.value.name),i.value?.price&&g.append("price",i.value.price.toString()),i.value?.category_id&&g.append("category_id",i.value.category_id.toString()),i.value?.unit_id&&g.append("unit_id",i.value.unit_id.toString()),i.value?.qty&&g.append("qty",i.value.qty.toString()),i.value?.description&&g.append("description",i.value.description),i.value?.origin_country&&g.append("origin_country",i.value.origin_country)}function b(F){const P=new FileReader;P.readAsDataURL(F[0]),P.onload=()=>{},g.append("images",F[0]),i.value?.id&&m(F[0])}async function m(F){const P=new FormData;P.append("file",F);try{await l.uploadFile(i.value.id,P)&&(O(),c.notify({message:"  ",color:"primary"}))}catch(_){console.error(_)}}async function O(){try{const F=await l.fetchProductsById(i.value.id);i.value=F}catch(F){console.error(F)}}return(F,P)=>(ae(),se(bl,{ref_key:"dialogRef",ref:f,modelValue:q.value,"onUpdate:modelValue":P[10]||(P[10]=_=>q.value=_),persistent:""},{default:le(()=>[K(Cl,{class:"add-product"},{default:le(()=>[ye(k)?(ae(),se(ll,{key:0,greedy:""},{default:le(()=>[K(ut,null,{default:le(()=>[oe("div",wn,fe(i.value.id?" ":" "),1),K(Ya,{ref:"uploaderRef",color:"primary",flat:"",onAdded:b},{header:le(()=>[...P[11]||(P[11]=[])]),list:le(()=>[K(Ba),oe("div",Cn,[K(Ee,{class:"q-mr-sm",name:"note_add",size:"24px"}),P[12]||(P[12]=oe("span",null," ",-1))])]),_:1},512),oe("div",null,[i.value?.images?.length?(ae(),se(sl,{key:0,onRefreshData:P[0]||(P[0]=_=>O()),images:i.value.images},null,8,["images"])):Me("",!0)]),K(je,{modelValue:i.value.name,"onUpdate:modelValue":P[1]||(P[1]=_=>i.value.name=_),class:"q-mb-xs",outlined:"",label:" "},null,8,["modelValue"]),K(je,{modelValue:i.value.price,"onUpdate:modelValue":P[2]||(P[2]=_=>i.value.price=_),class:"q-mb-xs",outlined:"",label:" "},null,8,["modelValue"]),K(je,{modelValue:i.value.qty,"onUpdate:modelValue":P[3]||(P[3]=_=>i.value.qty=_),class:"q-mb-xs",outlined:"",label:""},null,8,["modelValue"]),K(je,{modelValue:i.value.origin_country,"onUpdate:modelValue":P[4]||(P[4]=_=>i.value.origin_country=_),class:"q-mb-xs",outlined:"",label:" "},null,8,["modelValue"]),K(il,{modelValue:i.value.category_id,"onUpdate:modelValue":P[5]||(P[5]=_=>i.value.category_id=_),options:ye(h).categories,class:"q-mb-xs",outlined:"",label:" ","emit-value":"","map-options":"","option-label":"name","option-value":"id"},null,8,["modelValue","options"]),K(il,{modelValue:i.value.unit_id,"onUpdate:modelValue":P[6]||(P[6]=_=>i.value.unit_id=_),options:ye(d).units,outlined:"",label:"","emit-value":"","map-options":"","option-label":"name","option-value":"id"},null,8,["modelValue","options"]),K(je,{class:"q-mt-sm",modelValue:i.value.description,"onUpdate:modelValue":P[7]||(P[7]=_=>i.value.description=_),outlined:"",type:"textarea",rows:"2",label:""},null,8,["modelValue"])]),_:1}),K(_t,{align:"right"},{default:le(()=>[at(K(de,{color:"red",label:""},null,512),[[nt]]),at(K(de,{color:"primary",label:"",onClick:P[8]||(P[8]=_=>a())},null,512),[[nt]])]),_:1})]),_:1})):(ae(),se(ll,{key:1},{default:le(()=>[K(ut,null,{default:le(()=>[oe("div",null,[i.value?.images?.length?(ae(),se(sl,{key:0,images:i.value.images},null,8,["images"])):(ae(),Xe("div",qn,[K(ql,{class:"q-mt-sm",src:ye(kl)("/card-shop.jpg")},null,8,["src"])]))]),oe("div",kn,fe(i.value.name),1),oe("div",Fn," : "+fe(i.value.price),1),oe("div",null,": 11 "+fe(i.value?.unit?.name||"")+".",1),oe("div",null," : "+fe(i.value.origin_country),1),oe("div",null,": "+fe(i.value.description),1)]),_:1}),K(_t,{align:"right"},{default:le(()=>[at(K(de,{color:"red",label:""},null,512),[[nt]]),at(K(de,{color:"primary",label:"  ",onClick:P[9]||(P[9]=_=>V())},null,512),[[nt]])]),_:1})]),_:1}))]),_:1})]),_:1},8,["modelValue"]))}}),Pn=zt(Vn,[["__scopeId","data-v-0e9bd43a"]]),zn={class:"product-card row q-col-gutter-xs"},An=["onClick"],In={class:"text-center card-title"},Bn={class:"text-center"},$n={class:"text-bold"},Dn={key:0,class:"text-grey old-price"},On={class:"text-grey"},Tn=st({__name:"ProductList",setup(e){const n=Vt(),u=Fl(),o=Ft(),c=Ca(),l=kt(),{isManager:h}=Pt(p(()=>l.user?.role)),f=$(!1),y=$(!1),k=$();rt(async()=>{try{await u.fetchUnits(),n.loading.show()}catch(v){console.error(v)}finally{n.loading.hide()}});function d(){o.pagination.offset=0,q()}async function q(){try{n.loading.show();const v={offset:o.pagination.offset,limit:o.pagination.limit},b=await o.fetchProducts(v);b&&(o.pagination.total=b.total,o.pagination.has_more=b.has_more,o?.products?.length?o.products.push(b.items):o.products=b.items)}catch(v){console.error(v)}finally{n.loading.hide()}}function i(v){try{if(n.loading.show(),c.basketData?.length){const b=c.basketData.find(m=>m.id===v.id);b?g(b,v):c.basketData.push(structuredClone(Yt(v)))}else c.basketData.push(structuredClone(Yt(v)))}catch(b){console.error(b)}finally{n.notify({message:` ${v.name}   `,color:"primary"}),n.loading.hide()}}function g(v,b){v.price&&(v.price+=b.price),v.weight&&(v.weight+=b.weight),v.oldPrice&&(v.oldPrice+=b.oldPrice)}const a=async(v,b)=>{if(!o.pagination.has_more){f.value=!0,b(!0);return}await q(),o.pagination.offset+=o.pagination.limit,b()};function V(v){k.value=v,y.value=!y.value}return(v,b)=>(ae(),se(ka,{onLoad:a,offset:250},{default:le(()=>[ye(h)?(ae(),se(de,{key:0,onClick:b[0]||(b[0]=m=>V()),class:"full-width q-mb-sm",color:"secondary",label:" "})):Me("",!0),oe("div",zn,[(ae(!0),Xe(wl,null,xl(ye(o).products,(m,O)=>(ae(),Xe("div",{class:"col-6",key:O},[K(Cl,{class:"my-card radius-16 full-height",flat:"",bordered:""},{default:le(()=>[K(ut,{class:"q-pa-sm full-height"},{default:le(()=>[oe("div",{onClick:F=>V(m)},[K(ql,{class:"cursor-pointer radius-8",src:m?.primary_image?m.primary_image:ye(kl)("/card-shop.jpg")},null,8,["src"])],8,An),K(ut,{class:"q-pa-sm"},{default:le(()=>[oe("div",In,fe(m.name),1),oe("div",Bn,[oe("span",$n,fe(m.price),1),b[3]||(b[3]=Jt("  ",-1)),m?.oldPrice?(ae(),Xe("span",Dn,fe(m.old_price)+" ",1)):Me("",!0),Jt(" / "+fe(m.unit_symbol)+" ",1),oe("div",On,fe(m.origin_country),1)])]),_:2},1024),K(_t,{class:"justify-center"},{default:le(()=>[K(de,{dense:"","no-caps":"",class:"full-width",color:"secondary",icon:"add_shopping_cart",label:" ",onClick:F=>i(m)},null,8,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]))),128))]),y.value?(ae(),se(Pn,{key:1,modelValue:y.value,"onUpdate:modelValue":b[1]||(b[1]=m=>y.value=m),productData:k.value,onRefreshData:b[2]||(b[2]=m=>d()),onAddProduct:i},null,8,["modelValue","productData"])):Me("",!0)]),_:1}))}}),Rn=zt(Tn,[["__scopeId","data-v-ce4fb278"]]),Xn=st({__name:"DashboardPage",setup(e){return(n,u)=>(ae(),se(Ia,{class:"q-mx-xs"},{default:le(()=>[K(Rn,{class:"q-mb-lg"})]),_:1}))}});export{Xn as default};
