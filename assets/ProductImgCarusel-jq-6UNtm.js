import{k as ce,a as cl,v as _t,aL as Bt,aM as Pt,g as he,aN as Ot,c as d,h as s,aO as Rt,r as T,L as ge,N as se,G as dl,P as nt,S as ut,w as ne,n as Le,i as fl,aP as vl,aQ as ml,aJ as wt,aK as gl,ad as Me,Q as we,_ as hl,aR as Sl,aS as Et,aT as ot,aU as Tt,aV as Mt,Z as Lt,at as bl,p as yl,q as me,aW as pl,aX as $t,ax as _l,ay as wl,z as Cl,aY as xl,aZ as Ct,a_ as ql,a$ as Oe,av as kl,K as Ge,b0 as Fl,b1 as Vl,au as zl,aE as Il,C as Ut,l as Dt,b2 as Al,b3 as xt,o as Nt,b4 as Bl,d as Pl,u as Ol,aj as He,ai as Re,am as Ze,an as Je,ah as Rl,aq as El,F as Tl,f as Ml,ak as qt}from"./index-Du9uwa0e.js";import{b as Ll,i as kt,r as lt,n as Ft,a as $l,d as Ul,e as Dl,f as Nl,u as Hl}from"./orderStore-Wn8W3fTI.js";import{b as jl,a as Ql,Q as Kl,u as Wl}from"./useUtils-CKDy6ctR.js";import{Q as Xl}from"./QMenu-C7AaibRl.js";import{u as Yl}from"./usePermissionVisibility.hook-BPlhQ8mQ.js";import{_ as Gl}from"./_plugin-vue_export-helper-DlAUqK2U.js";const La=ce({name:"QUploaderAddTrigger",setup(){const e=cl(Bt,_t);return e===_t&&console.error("QUploaderAddTrigger needs to be child of QUploader"),e}}),Zl={...Pt,min:{type:Number,default:0},max:{type:Number,default:100},color:String,centerColor:String,trackColor:String,fontSize:String,rounded:Boolean,thickness:{type:Number,default:.2,validator:e=>e>=0&&e<=1},angle:{type:Number,default:0},showValue:Boolean,reverse:Boolean,instantFeedback:Boolean},at=50,Ht=2*at,jt=Ht*Math.PI,Jl=Math.round(jt*1e3)/1e3,ea=ce({name:"QCircularProgress",props:{...Zl,value:{type:Number,default:0},animationSpeed:{type:[String,Number],default:600},indeterminate:Boolean},setup(e,{slots:r}){const{proxy:{$q:n}}=he(),o=Ot(e),c=d(()=>{const h=(n.lang.rtl===!0?-1:1)*e.angle;return{transform:e.reverse!==(n.lang.rtl===!0)?`scale3d(-1, 1, 1) rotate3d(0, 0, 1, ${-90-h}deg)`:`rotate3d(0, 0, 1, ${h-90}deg)`}}),i=d(()=>e.instantFeedback!==!0&&e.indeterminate!==!0?{transition:`stroke-dashoffset ${e.animationSpeed}ms ease 0s, stroke ${e.animationSpeed}ms ease`}:""),q=d(()=>Ht/(1-e.thickness/2)),b=d(()=>`${q.value/2} ${q.value/2} ${q.value} ${q.value}`),p=d(()=>Ll(e.value,e.min,e.max)),k=d(()=>e.max-e.min),f=d(()=>e.thickness/2*q.value),_=d(()=>{const h=(e.max-p.value)/k.value,l=e.rounded===!0&&p.value<e.max&&h<.25?f.value/2*(1-h/.25):0;return jt*h+l});function C({thickness:h,offset:l,color:z,cls:y,rounded:V}){return s("circle",{class:"q-circular-progress__"+y+(z!==void 0?` text-${z}`:""),style:i.value,fill:"transparent",stroke:"currentColor","stroke-width":h,"stroke-dasharray":Jl,"stroke-dashoffset":l,"stroke-linecap":V,cx:q.value,cy:q.value,r:at})}return()=>{const h=[];e.centerColor!==void 0&&e.centerColor!=="transparent"&&h.push(s("circle",{class:`q-circular-progress__center text-${e.centerColor}`,fill:"currentColor",r:at-f.value/2,cx:q.value,cy:q.value})),e.trackColor!==void 0&&e.trackColor!=="transparent"&&h.push(C({cls:"track",thickness:f.value,offset:0,color:e.trackColor})),h.push(C({cls:"circle",thickness:f.value,offset:_.value,color:e.color,rounded:e.rounded===!0?"round":void 0}));const l=[s("svg",{class:"q-circular-progress__svg",style:c.value,viewBox:b.value,"aria-hidden":"true"},h)];return e.showValue===!0&&l.push(s("div",{class:"q-circular-progress__text absolute-full row flex-center content-center",style:{fontSize:e.fontSize}},r.default!==void 0?r.default():[s("div",p.value)])),s("div",{class:`q-circular-progress q-circular-progress--${e.indeterminate===!0?"in":""}determinate`,style:o.value,role:"progressbar","aria-valuemin":e.min,"aria-valuemax":e.max,"aria-valuenow":e.indeterminate===!0?void 0:p.value},Rt(r.internal,l))}}});function ze(e,r,n,o){const c=[];return e.forEach(i=>{o(i)===!0?c.push(i):r.push({failedPropValidation:n,file:i})}),c}function je(e){e?.dataTransfer&&(e.dataTransfer.dropEffect="copy"),se(e)}const ta={multiple:Boolean,accept:String,capture:String,maxFileSize:[Number,String],maxTotalSize:[Number,String],maxFiles:[Number,String],filter:Function},la=["rejected"];function aa({editable:e,dnd:r,getFileInput:n,addFilesToQueue:o}){const{props:c,emit:i,proxy:q}=he(),b=T(null),p=d(()=>c.accept!==void 0?c.accept.split(",").map(S=>(S=S.trim(),S==="*"?"*/":(S.endsWith("/*")&&(S=S.slice(0,S.length-1)),S.toUpperCase()))):null),k=d(()=>parseInt(c.maxFiles,10)),f=d(()=>parseInt(c.maxTotalSize,10));function _(S){if(e.value)if(S!==Object(S)&&(S={target:null}),S.target?.matches('input[type="file"]')===!0)S.clientX===0&&S.clientY===0&&ge(S);else{const $=n();$!==S.target&&$?.click(S)}}function C(S){e.value&&S&&o(null,S)}function h(S,$,M,ee){let w=Array.from($||S.target.files);const O=[],W=()=>{O.length!==0&&i("rejected",O)};if(c.accept!==void 0&&p.value.indexOf("*/")===-1&&(w=ze(w,O,"accept",R=>p.value.some(F=>R.type.toUpperCase().startsWith(F)||R.name.toUpperCase().endsWith(F))),w.length===0))return W();if(c.maxFileSize!==void 0){const R=parseInt(c.maxFileSize,10);if(w=ze(w,O,"max-file-size",F=>F.size<=R),w.length===0)return W()}if(c.multiple!==!0&&w.length!==0&&(w=[w[0]]),w.forEach(R=>{R.__key=R.webkitRelativePath+R.lastModified+R.name+R.size}),ee===!0){const R=M.map(F=>F.__key);w=ze(w,O,"duplicate",F=>R.includes(F.__key)===!1)}if(w.length===0)return W();if(c.maxTotalSize!==void 0){let R=ee===!0?M.reduce((F,G)=>F+G.size,0):0;if(w=ze(w,O,"max-total-size",F=>(R+=F.size,R<=f.value)),w.length===0)return W()}if(typeof c.filter=="function"){const R=c.filter(w);w=ze(w,O,"filter",F=>R.includes(F))}if(c.maxFiles!==void 0){let R=ee===!0?M.length:0;if(w=ze(w,O,"max-files",()=>(R++,R<=k.value)),w.length===0)return W()}if(W(),w.length!==0)return w}function l(S){je(S),r.value!==!0&&(r.value=!0)}function z(S){se(S),(S.relatedTarget!==null||dl.is.safari!==!0?S.relatedTarget!==b.value:document.elementsFromPoint(S.clientX,S.clientY).includes(b.value)===!1)===!0&&(r.value=!1)}function y(S){je(S);const $=S.dataTransfer.files;$.length!==0&&o(null,$),r.value=!1}function V(S){if(r.value===!0)return s("div",{ref:b,class:`q-${S}__dnd absolute-full`,onDragenter:je,onDragover:je,onDragleave:z,onDrop:y})}return Object.assign(q,{pickFiles:_,addFiles:C}),{pickFiles:_,addFiles:C,onDragover:l,onDragleave:z,processFiles:h,getDndNode:V,maxFilesNumber:k,maxTotalSizeNumber:f}}function Vt(e){return(e*100).toFixed(2)+"%"}const na={...nt,...ta,label:String,color:String,textColor:String,square:Boolean,flat:Boolean,bordered:Boolean,noThumbnails:Boolean,thumbnailFit:{type:String,default:"cover"},autoUpload:Boolean,hideUploadBtn:Boolean,disable:Boolean,readonly:Boolean},Qt=[...la,"start","finish","added","removed"];function ua(e,r){const n=he(),{props:o,slots:c,emit:i,proxy:q}=n,{$q:b}=q,p=ut(o,b);function k(u,I,Q){if(u.__status=I,I==="idle"){u.__uploaded=0,u.__progress=0,u.__sizeLabel=kt(u.size),u.__progressLabel="0.00%";return}if(I==="failed"){q.$forceUpdate();return}u.__uploaded=I==="uploaded"?u.size:Q,u.__progress=I==="uploaded"?1:Math.min(.9999,u.__uploaded/u.size),u.__progressLabel=Vt(u.__progress),q.$forceUpdate()}const f=d(()=>o.disable!==!0&&o.readonly!==!0),_=T(!1),C=T(null),h=T(null),l={files:T([]),queuedFiles:T([]),uploadedFiles:T([]),uploadedSize:T(0),updateFileStatus:k,isAlive:()=>gl(n)===!1},{pickFiles:z,addFiles:y,onDragover:V,onDragleave:S,processFiles:$,getDndNode:M,maxFilesNumber:ee,maxTotalSizeNumber:w}=aa({editable:f,dnd:_,getFileInput:a,addFilesToQueue:v});Object.assign(l,e({props:o,slots:c,emit:i,helpers:l,exposeApi:u=>{Object.assign(l,u)}})),l.isBusy===void 0&&(l.isBusy=T(!1));const O=T(0),W=d(()=>O.value===0?0:l.uploadedSize.value/O.value),R=d(()=>Vt(W.value)),F=d(()=>kt(O.value)),G=d(()=>f.value===!0&&l.isUploading.value!==!0&&(o.multiple===!0||l.queuedFiles.value.length===0)&&(o.maxFiles===void 0||l.files.value.length<ee.value)&&(o.maxTotalSize===void 0||O.value<w.value)),x=d(()=>f.value===!0&&l.isBusy.value!==!0&&l.isUploading.value!==!0&&l.queuedFiles.value.length!==0);hl(Bt,X);const D=d(()=>"q-uploader column no-wrap"+(p.value===!0?" q-uploader--dark q-dark":"")+(o.bordered===!0?" q-uploader--bordered":"")+(o.square===!0?" q-uploader--square no-border-radius":"")+(o.flat===!0?" q-uploader--flat no-shadow":"")+(o.disable===!0?" disabled q-uploader--disable":"")+(_.value===!0?" q-uploader--dnd":"")),te=d(()=>"q-uploader__header"+(o.color!==void 0?` bg-${o.color}`:"")+(o.textColor!==void 0?` text-${o.textColor}`:""));ne(l.isUploading,(u,I)=>{I===!1&&u===!0?i("start"):I===!0&&u===!1&&i("finish")});function J(){o.disable===!1&&(l.abort(),l.uploadedSize.value=0,O.value=0,ve(),l.files.value=[],l.queuedFiles.value=[],l.uploadedFiles.value=[])}function j(){o.disable===!1&&fe(["uploaded"],()=>{l.uploadedFiles.value=[]})}function de(){fe(["idle","failed"],({size:u})=>{O.value-=u,l.queuedFiles.value=[]})}function fe(u,I){if(o.disable===!0)return;const Q={files:[],size:0},le=l.files.value.filter(K=>u.indexOf(K.__status)===-1?!0:(Q.size+=K.size,Q.files.push(K),K.__img!==void 0&&window.URL.revokeObjectURL(K.__img.src),!1));Q.files.length!==0&&(l.files.value=le,I(Q),i("removed",Q.files))}function oe(u){o.disable||(u.__status==="uploaded"?l.uploadedFiles.value=l.uploadedFiles.value.filter(I=>I.__key!==u.__key):u.__status==="uploading"?u.__abort():O.value-=u.size,l.files.value=l.files.value.filter(I=>I.__key!==u.__key?!0:(I.__img!==void 0&&window.URL.revokeObjectURL(I.__img.src),!1)),l.queuedFiles.value=l.queuedFiles.value.filter(I=>I.__key!==u.__key),i("removed",[u]))}function ve(){l.files.value.forEach(u=>{u.__img!==void 0&&window.URL.revokeObjectURL(u.__img.src)})}function a(){return h.value||C.value.getElementsByClassName("q-uploader__input")[0]}function v(u,I){const Q=$(u,I,l.files.value,!0),le=a();le!=null&&(le.value=""),Q!==void 0&&(Q.forEach(K=>{if(l.updateFileStatus(K,"idle"),O.value+=K.size,o.noThumbnails!==!0&&K.type.toUpperCase().startsWith("IMAGE")){const Se=new Image;Se.src=window.URL.createObjectURL(K),K.__img=Se}}),l.files.value=l.files.value.concat(Q),l.queuedFiles.value=l.queuedFiles.value.concat(Q),i("added",Q),o.autoUpload===!0&&l.upload())}function A(){x.value===!0&&l.upload()}function L(u,I,Q){if(u===!0){const le={type:"a",key:I,icon:b.iconSet.uploader[I],flat:!0,dense:!0};let K;return I==="add"?(le.onClick=z,K=X):le.onClick=Q,s(we,le,K)}}function X(){return s("input",{ref:h,class:"q-uploader__input overflow-hidden absolute-full",tabindex:-1,type:"file",title:"",accept:o.accept,multiple:o.multiple===!0?"multiple":void 0,capture:o.capture,onMousedown:ge,onClick:z,onChange:v})}function E(){return c.header!==void 0?c.header(N):[s("div",{class:"q-uploader__header-content column"},[s("div",{class:"flex flex-center no-wrap q-gutter-xs"},[L(l.queuedFiles.value.length!==0,"removeQueue",de),L(l.uploadedFiles.value.length!==0,"removeUploaded",j),l.isUploading.value===!0?s(wt,{class:"q-uploader__spinner"}):null,s("div",{class:"col column justify-center"},[o.label!==void 0?s("div",{class:"q-uploader__title"},[o.label]):null,s("div",{class:"q-uploader__subtitle"},[F.value+" / "+R.value])]),L(G.value,"add"),L(o.hideUploadBtn===!1&&x.value===!0,"upload",l.upload),L(l.isUploading.value,"clear",l.abort)])])]}function B(){return c.list!==void 0?c.list(N):l.files.value.map(u=>s("div",{key:u.__key,class:"q-uploader__file relative-position"+(o.noThumbnails!==!0&&u.__img!==void 0?" q-uploader__file--img":"")+(u.__status==="failed"?" q-uploader__file--failed":u.__status==="uploaded"?" q-uploader__file--uploaded":""),style:o.noThumbnails!==!0&&u.__img!==void 0?{backgroundImage:'url("'+u.__img.src+'")',backgroundSize:o.thumbnailFit}:null},[s("div",{class:"q-uploader__file-header row flex-center no-wrap"},[u.__status==="failed"?s(Me,{class:"q-uploader__file-status",name:b.iconSet.type.negative,color:"negative"}):null,s("div",{class:"q-uploader__file-header-content col"},[s("div",{class:"q-uploader__title"},[u.name]),s("div",{class:"q-uploader__subtitle row items-center no-wrap"},[u.__sizeLabel+" / "+u.__progressLabel])]),u.__status==="uploading"?s(ea,{value:u.__progress,min:0,max:1,indeterminate:u.__progress===0}):s(we,{round:!0,dense:!0,flat:!0,icon:b.iconSet.uploader[u.__status==="uploaded"?"done":"clear"],onClick:()=>{oe(u)}})])]))}Le(()=>{l.isUploading.value===!0&&l.abort(),l.files.value.length!==0&&ve()});const N={};for(const u in l)fl(l[u])===!0?vl(N,u,()=>l[u].value):N[u]=l[u];return Object.assign(N,{upload:A,reset:J,removeUploadedFiles:j,removeQueuedFiles:de,removeFile:oe,pickFiles:z,addFiles:y}),ml(N,{canAddFiles:()=>G.value,canUpload:()=>x.value,uploadSizeLabel:()=>F.value,uploadProgressLabel:()=>R.value}),r({...l,upload:A,reset:J,removeUploadedFiles:j,removeQueuedFiles:de,removeFile:oe,pickFiles:z,addFiles:y,canAddFiles:G,canUpload:x,uploadSizeLabel:F,uploadProgressLabel:R}),()=>{const u=[s("div",{class:te.value},E()),s("div",{class:"q-uploader__list scroll"},B()),M("uploader")];l.isBusy.value===!0&&u.push(s("div",{class:"q-uploader__overlay absolute-full flex flex-center"},[s(wt)]));const I={ref:C,class:D.value};return G.value===!0&&Object.assign(I,{onDragover:V,onDragleave:S}),s("div",I,u)}}const oa=()=>!0;function ia(e){const r={};return e.forEach(n=>{r[n]=oa}),r}const ra=ia(Qt),sa=({name:e,props:r,emits:n,injectPlugin:o})=>ce({name:e,props:{...na,...r},emits:Sl(n)===!0?{...ra,...n}:[...Qt,...n],setup(c,{expose:i}){return ua(o,i)}});function re(e){return typeof e=="function"?e:()=>e}const ca="QUploader",da={url:[Function,String],method:{type:[Function,String],default:"POST"},fieldName:{type:[Function,String],default:()=>e=>e.name},headers:[Function,Array],formFields:[Function,Array],withCredentials:[Function,Boolean],sendRaw:[Function,Boolean],batch:[Function,Boolean],factory:Function},fa=["factoryFailed","uploaded","failed","uploading"];function va({props:e,emit:r,helpers:n}){const o=T([]),c=T([]),i=T(0),q=d(()=>({url:re(e.url),method:re(e.method),headers:re(e.headers),formFields:re(e.formFields),fieldName:re(e.fieldName),withCredentials:re(e.withCredentials),sendRaw:re(e.sendRaw),batch:re(e.batch)})),b=d(()=>i.value>0),p=d(()=>c.value.length!==0);let k;function f(){o.value.forEach(l=>{l.abort()}),c.value.length!==0&&(k=!0)}function _(){const l=n.queuedFiles.value.slice(0);n.queuedFiles.value=[],q.value.batch(l)?C(l):l.forEach(z=>{C([z])})}function C(l){if(i.value++,typeof e.factory!="function"){h(l,{});return}const z=e.factory(l);if(!z)r("factoryFailed",new Error("QUploader: factory() does not return properly"),l),i.value--;else if(typeof z.catch=="function"&&typeof z.then=="function"){c.value.push(z);const y=V=>{n.isAlive()===!0&&(c.value=c.value.filter(S=>S!==z),c.value.length===0&&(k=!1),n.queuedFiles.value=n.queuedFiles.value.concat(l),l.forEach(S=>{n.updateFileStatus(S,"failed")}),r("factoryFailed",V,l),i.value--)};z.then(V=>{k===!0?y(new Error("Aborted")):n.isAlive()===!0&&(c.value=c.value.filter(S=>S!==z),h(l,V))}).catch(y)}else h(l,z||{})}function h(l,z){const y=new FormData,V=new XMLHttpRequest,S=(x,D)=>z[x]!==void 0?re(z[x])(D):q.value[x](D),$=S("url",l);if(!$){console.error("q-uploader: invalid or no URL specified"),i.value--;return}const M=S("formFields",l);M!==void 0&&M.forEach(x=>{y.append(x.name,x.value)});let ee=0,w=0,O=0,W=0,R;V.upload.addEventListener("progress",x=>{if(R===!0)return;const D=Math.min(W,x.loaded);n.uploadedSize.value+=D-O,O=D;let te=O-w;for(let J=ee;te>0&&J<l.length;J++){const j=l[J];if(te>j.size)te-=j.size,ee++,w+=j.size,n.updateFileStatus(j,"uploading",j.size);else{n.updateFileStatus(j,"uploading",te);return}}},!1),V.onreadystatechange=()=>{V.readyState<4||(V.status&&V.status<400?(n.uploadedFiles.value=n.uploadedFiles.value.concat(l),l.forEach(x=>{n.updateFileStatus(x,"uploaded")}),r("uploaded",{files:l,xhr:V})):(R=!0,n.uploadedSize.value-=O,n.queuedFiles.value=n.queuedFiles.value.concat(l),l.forEach(x=>{n.updateFileStatus(x,"failed")}),r("failed",{files:l,xhr:V})),i.value--,o.value=o.value.filter(x=>x!==V))},V.open(S("method",l),$),S("withCredentials",l)===!0&&(V.withCredentials=!0);const F=S("headers",l);F!==void 0&&F.forEach(x=>{V.setRequestHeader(x.name,x.value)});const G=S("sendRaw",l);l.forEach(x=>{n.updateFileStatus(x,"uploading",0),G!==!0&&y.append(S("fieldName",x),x,x.name),x.xhr=V,x.__abort=()=>{V.abort()},W+=x.size}),r("uploading",{files:l,xhr:V}),o.value.push(V),G===!0?V.send(new Blob(l)):V.send(y)}return{isUploading:b,isBusy:p,abort:f,upload:_}}const ma={name:ca,props:da,emits:fa,injectPlugin:va},$a=sa(ma),ga=ce({name:"QField",inheritAttrs:!1,props:{...ot,tag:{type:String,default:"label"}},emits:Et,setup(){return Tt(Mt({tagProp:!0}))}}),ha={xs:8,sm:10,md:14,lg:20,xl:24},Sa=ce({name:"QChip",props:{...nt,...Pt,dense:Boolean,icon:String,iconRight:String,iconRemove:String,iconSelected:String,label:[String,Number],color:String,textColor:String,modelValue:{type:Boolean,default:!0},selected:{type:Boolean,default:null},square:Boolean,outline:Boolean,clickable:Boolean,removable:Boolean,removeAriaLabel:String,tabindex:[String,Number],disable:Boolean,ripple:{type:[Boolean,Object],default:!0}},emits:["update:modelValue","update:selected","remove","click"],setup(e,{slots:r,emit:n}){const{proxy:{$q:o}}=he(),c=ut(e,o),i=Ot(e,ha),q=d(()=>e.selected===!0||e.icon!==void 0),b=d(()=>e.selected===!0?e.iconSelected||o.iconSet.chip.selected:e.icon),p=d(()=>e.iconRemove||o.iconSet.chip.remove),k=d(()=>e.disable===!1&&(e.clickable===!0||e.selected!==null)),f=d(()=>{const y=e.outline===!0&&e.color||e.textColor;return"q-chip row inline no-wrap items-center"+(e.outline===!1&&e.color!==void 0?` bg-${e.color}`:"")+(y?` text-${y} q-chip--colored`:"")+(e.disable===!0?" disabled":"")+(e.dense===!0?" q-chip--dense":"")+(e.outline===!0?" q-chip--outline":"")+(e.selected===!0?" q-chip--selected":"")+(k.value===!0?" q-chip--clickable cursor-pointer non-selectable q-hoverable":"")+(e.square===!0?" q-chip--square":"")+(c.value===!0?" q-chip--dark q-dark":"")}),_=d(()=>{const y=e.disable===!0?{tabindex:-1,"aria-disabled":"true"}:{tabindex:e.tabindex||0},V={...y,role:"button","aria-hidden":"false","aria-label":e.removeAriaLabel||o.lang.label.remove};return{chip:y,remove:V}});function C(y){y.keyCode===13&&h(y)}function h(y){e.disable||(n("update:selected",!e.selected),n("click",y))}function l(y){(y.keyCode===void 0||y.keyCode===13)&&(se(y),e.disable===!1&&(n("update:modelValue",!1),n("remove")))}function z(){const y=[];k.value===!0&&y.push(s("div",{class:"q-focus-helper"})),q.value===!0&&y.push(s(Me,{class:"q-chip__icon q-chip__icon--left",name:b.value}));const V=e.label!==void 0?[s("div",{class:"ellipsis"},[e.label])]:void 0;return y.push(s("div",{class:"q-chip__content col row no-wrap items-center q-anchor--skip"},Rt(r.default,V))),e.iconRight&&y.push(s(Me,{class:"q-chip__icon q-chip__icon--right",name:e.iconRight})),e.removable===!0&&y.push(s(Me,{class:"q-chip__icon q-chip__icon--remove cursor-pointer",name:p.value,..._.value.remove,onClick:l,onKeyup:l})),y}return()=>{if(e.modelValue===!1)return;const y={class:f.value,style:i.value};return k.value===!0&&Object.assign(y,_.value.chip,{onClick:h,onKeyup:C}),Lt("div",y,z(),"ripple",e.ripple!==!1&&e.disable!==!0,()=>[[bl,e.ripple]])}}}),ue=1e3,ba=["start","center","end","start-force","center-force","end-force"],Kt=Array.prototype.filter,ya=window.getComputedStyle(document.body).overflowAnchor===void 0?yl:function(e,r){e!==null&&(e._qOverflowAnimationFrame!==void 0&&cancelAnimationFrame(e._qOverflowAnimationFrame),e._qOverflowAnimationFrame=requestAnimationFrame(()=>{if(e===null)return;e._qOverflowAnimationFrame=void 0;const n=e.children||[];Kt.call(n,c=>c.dataset&&c.dataset.qVsAnchor!==void 0).forEach(c=>{delete c.dataset.qVsAnchor});const o=n[r];o?.dataset&&(o.dataset.qVsAnchor="")}))};function Ie(e,r){return e+r}function et(e,r,n,o,c,i,q,b){const p=e===window?document.scrollingElement||document.documentElement:e,k=c===!0?"offsetWidth":"offsetHeight",f={scrollStart:0,scrollViewSize:-q-b,scrollMaxSize:0,offsetStart:-q,offsetEnd:-b};if(c===!0?(e===window?(f.scrollStart=window.pageXOffset||window.scrollX||document.body.scrollLeft||0,f.scrollViewSize+=document.documentElement.clientWidth):(f.scrollStart=p.scrollLeft,f.scrollViewSize+=p.clientWidth),f.scrollMaxSize=p.scrollWidth,i===!0&&(f.scrollStart=(lt===!0?f.scrollMaxSize-f.scrollViewSize:0)-f.scrollStart)):(e===window?(f.scrollStart=window.pageYOffset||window.scrollY||document.body.scrollTop||0,f.scrollViewSize+=document.documentElement.clientHeight):(f.scrollStart=p.scrollTop,f.scrollViewSize+=p.clientHeight),f.scrollMaxSize=p.scrollHeight),n!==null)for(let _=n.previousElementSibling;_!==null;_=_.previousElementSibling)_.classList.contains("q-virtual-scroll--skip")===!1&&(f.offsetStart+=_[k]);if(o!==null)for(let _=o.nextElementSibling;_!==null;_=_.nextElementSibling)_.classList.contains("q-virtual-scroll--skip")===!1&&(f.offsetEnd+=_[k]);if(r!==e){const _=p.getBoundingClientRect(),C=r.getBoundingClientRect();c===!0?(f.offsetStart+=C.left-_.left,f.offsetEnd-=C.width):(f.offsetStart+=C.top-_.top,f.offsetEnd-=C.height),e!==window&&(f.offsetStart+=f.scrollStart),f.offsetEnd+=f.scrollMaxSize-f.offsetStart}return f}function zt(e,r,n,o){r==="end"&&(r=(e===window?document.body:e)[n===!0?"scrollWidth":"scrollHeight"]),e===window?n===!0?(o===!0&&(r=(lt===!0?document.body.scrollWidth-document.documentElement.clientWidth:0)-r),window.scrollTo(r,window.pageYOffset||window.scrollY||document.body.scrollTop||0)):window.scrollTo(window.pageXOffset||window.scrollX||document.body.scrollLeft||0,r):n===!0?(o===!0&&(r=(lt===!0?e.scrollWidth-e.offsetWidth:0)-r),e.scrollLeft=r):e.scrollTop=r}function Ee(e,r,n,o){if(n>=o)return 0;const c=r.length,i=Math.floor(n/ue),q=Math.floor((o-1)/ue)+1;let b=e.slice(i,q).reduce(Ie,0);return n%ue!==0&&(b-=r.slice(i*ue,n).reduce(Ie,0)),o%ue!==0&&o!==c&&(b-=r.slice(o,q*ue).reduce(Ie,0)),b}const pa={virtualScrollSliceSize:{type:[Number,String],default:10},virtualScrollSliceRatioBefore:{type:[Number,String],default:1},virtualScrollSliceRatioAfter:{type:[Number,String],default:1},virtualScrollItemSize:{type:[Number,String],default:24},virtualScrollStickySizeStart:{type:[Number,String],default:0},virtualScrollStickySizeEnd:{type:[Number,String],default:0},tableColspan:[Number,String]},It={virtualScrollHorizontal:Boolean,onVirtualScroll:Function,...pa};function _a({virtualScrollLength:e,getVirtualScrollTarget:r,getVirtualScrollEl:n,virtualScrollItemSizeComputed:o}){const c=he(),{props:i,emit:q,proxy:b}=c,{$q:p}=b;let k,f,_,C=[],h;const l=T(0),z=T(0),y=T({}),V=T(null),S=T(null),$=T(null),M=T({from:0,to:0}),ee=d(()=>i.tableColspan!==void 0?i.tableColspan:100);o===void 0&&(o=d(()=>i.virtualScrollItemSize));const w=d(()=>o.value+";"+i.virtualScrollHorizontal),O=d(()=>w.value+";"+i.virtualScrollSliceRatioBefore+";"+i.virtualScrollSliceRatioAfter);ne(O,()=>{j()}),ne(w,W);function W(){J(f,!0)}function R(a){J(a===void 0?f:a)}function F(a,v){const A=r();if(A==null||A.nodeType===8)return;const L=et(A,n(),V.value,S.value,i.virtualScrollHorizontal,p.lang.rtl,i.virtualScrollStickySizeStart,i.virtualScrollStickySizeEnd);_!==L.scrollViewSize&&j(L.scrollViewSize),x(A,L,Math.min(e.value-1,Math.max(0,parseInt(a,10)||0)),0,ba.indexOf(v)!==-1?v:f!==-1&&a>f?"end":"start")}function G(){const a=r();if(a==null||a.nodeType===8)return;const v=et(a,n(),V.value,S.value,i.virtualScrollHorizontal,p.lang.rtl,i.virtualScrollStickySizeStart,i.virtualScrollStickySizeEnd),A=e.value-1,L=v.scrollMaxSize-v.offsetStart-v.offsetEnd-z.value;if(k===v.scrollStart)return;if(v.scrollMaxSize<=0){x(a,v,0,0);return}_!==v.scrollViewSize&&j(v.scrollViewSize),D(M.value.from);const X=Math.floor(v.scrollMaxSize-Math.max(v.scrollViewSize,v.offsetEnd)-Math.min(h[A],v.scrollViewSize/2));if(X>0&&Math.ceil(v.scrollStart)>=X){x(a,v,A,v.scrollMaxSize-v.offsetEnd-C.reduce(Ie,0));return}let E=0,B=v.scrollStart-v.offsetStart,N=B;if(B<=L&&B+v.scrollViewSize>=l.value)B-=l.value,E=M.value.from,N=B;else for(let u=0;B>=C[u]&&E<A;u++)B-=C[u],E+=ue;for(;B>0&&E<A;)B-=h[E],B>-v.scrollViewSize?(E++,N=B):N=h[E]+B;x(a,v,E,N)}function x(a,v,A,L,X){const E=typeof X=="string"&&X.indexOf("-force")!==-1,B=E===!0?X.replace("-force",""):X,N=B!==void 0?B:"start";let u=Math.max(0,A-y.value[N]),I=u+y.value.total;I>e.value&&(I=e.value,u=Math.max(0,I-y.value.total)),k=v.scrollStart;const Q=u!==M.value.from||I!==M.value.to;if(Q===!1&&B===void 0){fe(A);return}const{activeElement:le}=document,K=$.value;Q===!0&&K!==null&&K!==le&&K.contains(le)===!0&&(K.addEventListener("focusout",te),setTimeout(()=>{K?.removeEventListener("focusout",te)})),ya(K,A-u);const Se=B!==void 0?h.slice(u,A).reduce(Ie,0):0;if(Q===!0){const be=I>=M.value.from&&u<=M.value.to?M.value.to:I;M.value={from:u,to:be},l.value=Ee(C,h,0,u),z.value=Ee(C,h,I,e.value),requestAnimationFrame(()=>{M.value.to!==I&&k===v.scrollStart&&(M.value={from:M.value.from,to:I},z.value=Ee(C,h,I,e.value))})}requestAnimationFrame(()=>{if(k!==v.scrollStart)return;Q===!0&&D(u);const be=h.slice(u,A).reduce(Ie,0),ye=be+v.offsetStart+l.value,$e=ye+h[A];let Ae=ye+L;if(B!==void 0){const Qe=be-Se,Be=v.scrollStart+Qe;Ae=E!==!0&&Be<ye&&$e<Be+v.scrollViewSize?Be:B==="end"?$e-v.scrollViewSize:ye-(B==="start"?0:Math.round((v.scrollViewSize-h[A])/2))}k=Ae,zt(a,Ae,i.virtualScrollHorizontal,p.lang.rtl),fe(A)})}function D(a){const v=$.value;if(v){const A=Kt.call(v.children,u=>u.classList&&u.classList.contains("q-virtual-scroll--skip")===!1),L=A.length,X=i.virtualScrollHorizontal===!0?u=>u.getBoundingClientRect().width:u=>u.offsetHeight;let E=a,B,N;for(let u=0;u<L;){for(B=X(A[u]),u++;u<L&&A[u].classList.contains("q-virtual-scroll--with-prev")===!0;)B+=X(A[u]),u++;N=B-h[E],N!==0&&(h[E]+=N,C[Math.floor(E/ue)]+=N),E++}}}function te(){$.value?.focus()}function J(a,v){const A=1*o.value;(v===!0||Array.isArray(h)===!1)&&(h=[]);const L=h.length;h.length=e.value;for(let E=e.value-1;E>=L;E--)h[E]=A;const X=Math.floor((e.value-1)/ue);C=[];for(let E=0;E<=X;E++){let B=0;const N=Math.min((E+1)*ue,e.value);for(let u=E*ue;u<N;u++)B+=h[u];C.push(B)}f=-1,k=void 0,l.value=Ee(C,h,0,M.value.from),z.value=Ee(C,h,M.value.to,e.value),a>=0?(D(M.value.from),me(()=>{F(a)})):oe()}function j(a){if(a===void 0&&typeof window<"u"){const B=r();B!=null&&B.nodeType!==8&&(a=et(B,n(),V.value,S.value,i.virtualScrollHorizontal,p.lang.rtl,i.virtualScrollStickySizeStart,i.virtualScrollStickySizeEnd).scrollViewSize)}_=a;const v=parseFloat(i.virtualScrollSliceRatioBefore)||0,A=parseFloat(i.virtualScrollSliceRatioAfter)||0,L=1+v+A,X=a===void 0||a<=0?1:Math.ceil(a/o.value),E=Math.max(1,X,Math.ceil((i.virtualScrollSliceSize>0?i.virtualScrollSliceSize:10)/L));y.value={total:Math.ceil(E*L),start:Math.ceil(E*v),center:Math.ceil(E*(.5+v)),end:Math.ceil(E*(1+v)),view:X}}function de(a,v){const A=i.virtualScrollHorizontal===!0?"width":"height",L={["--q-virtual-scroll-item-"+A]:o.value+"px"};return[a==="tbody"?s(a,{class:"q-virtual-scroll__padding",key:"before",ref:V},[s("tr",[s("td",{style:{[A]:`${l.value}px`,...L},colspan:ee.value})])]):s(a,{class:"q-virtual-scroll__padding",key:"before",ref:V,style:{[A]:`${l.value}px`,...L}}),s(a,{class:"q-virtual-scroll__content",key:"content",ref:$,tabindex:-1},v.flat()),a==="tbody"?s(a,{class:"q-virtual-scroll__padding",key:"after",ref:S},[s("tr",[s("td",{style:{[A]:`${z.value}px`,...L},colspan:ee.value})])]):s(a,{class:"q-virtual-scroll__padding",key:"after",ref:S,style:{[A]:`${z.value}px`,...L}})]}function fe(a){f!==a&&(i.onVirtualScroll!==void 0&&q("virtualScroll",{index:a,from:M.value.from,to:M.value.to-1,direction:a<f?"decrease":"increase",ref:b}),f=a)}j();const oe=pl(G,p.platform.is.ios===!0?120:35);$t(()=>{j()});let ve=!1;return _l(()=>{ve=!0}),wl(()=>{if(ve!==!0)return;const a=r();k!==void 0&&a!==void 0&&a!==null&&a.nodeType!==8?zt(a,k,i.virtualScrollHorizontal,p.lang.rtl):F(f)}),Le(()=>{oe.cancel()}),Object.assign(b,{scrollTo:F,reset:W,refresh:R}),{virtualScrollSliceRange:M,virtualScrollSliceSizeComputed:y,setVirtualScrollSize:j,onVirtualScrollEvt:oe,localResetVirtualScroll:J,padVirtualScroll:de,scrollTo:F,reset:W,refresh:R}}const At=e=>["add","add-unique","toggle"].includes(e),wa=".*+?^${}()|[]\\",Ca=Object.keys(ot);function tt(e,r){if(typeof e=="function")return e;const n=e!==void 0?e:r;return o=>o!==null&&typeof o=="object"&&n in o?o[n]:o}const Ua=ce({name:"QSelect",inheritAttrs:!1,props:{...It,...Cl,...ot,modelValue:{required:!0},multiple:Boolean,displayValue:[String,Number],displayValueHtml:Boolean,dropdownIcon:String,options:{type:Array,default:()=>[]},optionValue:[Function,String],optionLabel:[Function,String],optionDisable:[Function,String],hideSelected:Boolean,hideDropdownIcon:Boolean,fillInput:Boolean,maxValues:[Number,String],optionsDense:Boolean,optionsDark:{type:Boolean,default:null},optionsSelectedClass:String,optionsHtml:Boolean,optionsCover:Boolean,menuShrink:Boolean,menuAnchor:String,menuSelf:String,menuOffset:Array,popupContentClass:String,popupContentStyle:[String,Array,Object],popupNoRouteDismiss:Boolean,useInput:Boolean,useChips:Boolean,newValueMode:{type:String,validator:At},mapOptions:Boolean,emitValue:Boolean,disableTabSelection:Boolean,inputDebounce:{type:[Number,String],default:500},inputClass:[Array,String,Object],inputStyle:[Array,String,Object],tabindex:{type:[String,Number],default:0},autocomplete:String,transitionShow:{},transitionHide:{},transitionDuration:{},behavior:{type:String,validator:e=>["default","menu","dialog"].includes(e),default:"default"},virtualScrollItemSize:It.virtualScrollItemSize.type,onNewValue:Function,onFilter:Function},emits:[...Et,"add","remove","inputValue","keyup","keypress","keydown","popupShow","popupHide","filterAbort"],setup(e,{slots:r,emit:n}){const{proxy:o}=he(),{$q:c}=o,i=T(!1),q=T(!1),b=T(-1),p=T(""),k=T(!1),f=T(!1);let _=null,C=null,h,l,z,y=null,V,S,$,M;const ee=T(null),w=T(null),O=T(null),W=T(null),R=T(null),F=xl(e),G=ql(ht),x=d(()=>Array.isArray(e.options)?e.options.length:0),D=d(()=>e.virtualScrollItemSize===void 0?e.optionsDense===!0?24:48:e.virtualScrollItemSize),{virtualScrollSliceRange:te,virtualScrollSliceSizeComputed:J,localResetVirtualScroll:j,padVirtualScroll:de,onVirtualScrollEvt:fe,scrollTo:oe,setVirtualScrollSize:ve}=_a({virtualScrollLength:x,getVirtualScrollTarget:Gt,getVirtualScrollEl:mt,virtualScrollItemSizeComputed:D}),a=Mt(),v=d(()=>{const t=e.mapOptions===!0&&e.multiple!==!0,m=e.modelValue!==void 0&&(e.modelValue!==null||t===!0)?e.multiple===!0&&Array.isArray(e.modelValue)?e.modelValue:[e.modelValue]:[];if(e.mapOptions===!0&&Array.isArray(e.options)===!0){const g=e.mapOptions===!0&&h!==void 0?h:[],P=m.map(H=>Yt(H,g));return e.modelValue===null&&t===!0?P.filter(H=>H!==null):P}return m}),A=d(()=>{const t={};return Ca.forEach(m=>{const g=e[m];g!==void 0&&(t[m]=g)}),t}),L=d(()=>e.optionsDark===null?a.isDark.value:e.optionsDark),X=d(()=>Ct(v.value)),E=d(()=>{let t="q-field__input q-placeholder col";return e.hideSelected===!0||v.value.length===0?[t,e.inputClass]:(t+=" q-field__input--padding",e.inputClass===void 0?t:[t,e.inputClass])}),B=d(()=>(e.virtualScrollHorizontal===!0?"q-virtual-scroll--horizontal":"")+(e.popupContentClass?" "+e.popupContentClass:"")),N=d(()=>x.value===0),u=d(()=>v.value.map(t=>ae.value(t)).join(", ")),I=d(()=>e.displayValue!==void 0?e.displayValue:u.value),Q=d(()=>e.optionsHtml===!0?()=>!0:t=>t?.html===!0),le=d(()=>e.displayValueHtml===!0||e.displayValue===void 0&&(e.optionsHtml===!0||v.value.some(Q.value))),K=d(()=>a.focused.value===!0?e.tabindex:-1),Se=d(()=>{const t={tabindex:e.tabindex,role:"combobox","aria-label":e.label,"aria-readonly":e.readonly===!0?"true":"false","aria-autocomplete":e.useInput===!0?"list":"none","aria-expanded":i.value===!0?"true":"false","aria-controls":`${a.targetUid.value}_lb`};return b.value>=0&&(t["aria-activedescendant"]=`${a.targetUid.value}_${b.value}`),t}),be=d(()=>({id:`${a.targetUid.value}_lb`,role:"listbox","aria-multiselectable":e.multiple===!0?"true":"false"})),ye=d(()=>v.value.map((t,m)=>({index:m,opt:t,html:Q.value(t),selected:!0,removeAtIndex:Xt,toggleOption:pe,tabindex:K.value}))),$e=d(()=>{if(x.value===0)return[];const{from:t,to:m}=te.value;return e.options.slice(t,m).map((g,P)=>{const H=Ce.value(g)===!0,U=We(g)===!0,Z=t+P,Y={clickable:!0,active:U,activeClass:Be.value,manualFocus:!0,focused:!1,disable:H,tabindex:-1,dense:e.optionsDense,dark:L.value,role:"option","aria-selected":U===!0?"true":"false",id:`${a.targetUid.value}_${Z}`,onClick:()=>{pe(g)}};return H!==!0&&(b.value===Z&&(Y.focused=!0),c.platform.is.desktop===!0&&(Y.onMousemove=()=>{i.value===!0&&xe(Z)})),{index:Z,opt:g,html:Q.value(g),label:ae.value(g),selected:Y.active,focused:Y.focused,toggleOption:pe,setOptionIndex:xe,itemProps:Y}})}),Ae=d(()=>e.dropdownIcon!==void 0?e.dropdownIcon:c.iconSet.arrow.dropdown),Qe=d(()=>e.optionsCover===!1&&e.outlined!==!0&&e.standout!==!0&&e.borderless!==!0&&e.rounded!==!0),Be=d(()=>e.optionsSelectedClass!==void 0?e.optionsSelectedClass:e.color!==void 0?`text-${e.color}`:""),ie=d(()=>tt(e.optionValue,"value")),ae=d(()=>tt(e.optionLabel,"label")),Ce=d(()=>tt(e.optionDisable,"disable")),Ue=d(()=>v.value.map(ie.value)),Wt=d(()=>{const t={onInput:ht,onChange:G,onKeydown:vt,onKeyup:dt,onKeypress:ft,onFocus:st,onClick(m){l===!0&&ge(m)}};return t.onCompositionstart=t.onCompositionupdate=t.onCompositionend=G,t});ne(v,t=>{h=t,e.useInput===!0&&e.fillInput===!0&&e.multiple!==!0&&a.innerLoading.value!==!0&&(q.value!==!0&&i.value!==!0||X.value!==!0)&&(z!==!0&&Ve(),(q.value===!0||i.value===!0)&&qe(""))},{immediate:!0}),ne(()=>e.fillInput,Ve),ne(i,Xe),ne(x,sl);function it(t){return e.emitValue===!0?ie.value(t):t}function Ke(t){if(t!==-1&&t<v.value.length)if(e.multiple===!0){const m=e.modelValue.slice();n("remove",{index:t,value:m.splice(t,1)[0]}),n("update:modelValue",m)}else n("update:modelValue",null)}function Xt(t){Ke(t),a.focus()}function rt(t,m){const g=it(t);if(e.multiple!==!0){e.fillInput===!0&&Pe(ae.value(t),!0,!0),n("update:modelValue",g);return}if(v.value.length===0){n("add",{index:0,value:g}),n("update:modelValue",e.multiple===!0?[g]:g);return}if(m===!0&&We(t)===!0||e.maxValues!==void 0&&e.modelValue.length>=e.maxValues)return;const P=e.modelValue.slice();n("add",{index:P.length,value:g}),P.push(g),n("update:modelValue",P)}function pe(t,m){if(a.editable.value!==!0||t===void 0||Ce.value(t)===!0)return;const g=ie.value(t);if(e.multiple!==!0){m!==!0&&(Pe(e.fillInput===!0?ae.value(t):"",!0,!0),_e()),w.value?.focus(),(v.value.length===0||Oe(ie.value(v.value[0]),g)!==!0)&&n("update:modelValue",e.emitValue===!0?g:t);return}if((l!==!0||k.value===!0)&&a.focus(),st(),v.value.length===0){const U=e.emitValue===!0?g:t;n("add",{index:0,value:U}),n("update:modelValue",e.multiple===!0?[U]:U);return}const P=e.modelValue.slice(),H=Ue.value.findIndex(U=>Oe(U,g));if(H!==-1)n("remove",{index:H,value:P.splice(H,1)[0]});else{if(e.maxValues!==void 0&&P.length>=e.maxValues)return;const U=e.emitValue===!0?g:t;n("add",{index:P.length,value:U}),P.push(U)}n("update:modelValue",P)}function xe(t){if(c.platform.is.desktop!==!0)return;const m=t!==-1&&t<x.value?t:-1;b.value!==m&&(b.value=m)}function De(t=1,m){if(i.value===!0){let g=b.value;do g=Ft(g+t,-1,x.value-1);while(g!==-1&&g!==b.value&&Ce.value(e.options[g])===!0);b.value!==g&&(xe(g),oe(g),m!==!0&&e.useInput===!0&&e.fillInput===!0&&Ne(g>=0?ae.value(e.options[g]):V,!0))}}function Yt(t,m){const g=P=>Oe(ie.value(P),t);return e.options.find(g)||m.find(g)||t}function We(t){const m=ie.value(t);return Ue.value.find(g=>Oe(g,m))!==void 0}function st(t){e.useInput===!0&&w.value!==null&&(t===void 0||w.value===t.target&&t.target.value===u.value)&&w.value.select()}function ct(t){zl(t,27)===!0&&i.value===!0&&(ge(t),_e(),Ve()),n("keyup",t)}function dt(t){const{value:m}=t.target;if(t.keyCode!==void 0){ct(t);return}if(t.target.value="",_!==null&&(clearTimeout(_),_=null),C!==null&&(clearTimeout(C),C=null),Ve(),typeof m=="string"&&m.length!==0){const g=m.toLocaleLowerCase(),P=U=>{const Z=e.options.find(Y=>String(U.value(Y)).toLocaleLowerCase()===g);return Z===void 0?!1:(v.value.indexOf(Z)===-1?pe(Z):_e(),!0)},H=U=>{P(ie)!==!0&&U!==!0&&P(ae)!==!0&&qe(m,!0,()=>H(!0))};H()}else a.clearValue(t)}function ft(t){n("keypress",t)}function vt(t){if(n("keydown",t),kl(t)===!0)return;const m=p.value.length!==0&&(e.newValueMode!==void 0||e.onNewValue!==void 0),g=t.shiftKey!==!0&&e.disableTabSelection!==!0&&e.multiple!==!0&&(b.value!==-1||m===!0);if(t.keyCode===27){Ge(t);return}if(t.keyCode===9&&g===!1){ke();return}if(t.target===void 0||t.target.id!==a.targetUid.value||a.editable.value!==!0)return;if(t.keyCode===40&&a.innerLoading.value!==!0&&i.value===!1){se(t),Fe();return}if(t.keyCode===8&&(e.useChips===!0||e.clearable===!0)&&e.hideSelected!==!0&&p.value.length===0){e.multiple===!0&&Array.isArray(e.modelValue)===!0?Ke(e.modelValue.length-1):e.multiple!==!0&&e.modelValue!==null&&n("update:modelValue",null);return}(t.keyCode===35||t.keyCode===36)&&(typeof p.value!="string"||p.value.length===0)&&(se(t),b.value=-1,De(t.keyCode===36?1:-1,e.multiple)),(t.keyCode===33||t.keyCode===34)&&J.value!==void 0&&(se(t),b.value=Math.max(-1,Math.min(x.value,b.value+(t.keyCode===33?-1:1)*J.value.view)),De(t.keyCode===33?1:-1,e.multiple)),(t.keyCode===38||t.keyCode===40)&&(se(t),De(t.keyCode===38?-1:1,e.multiple));const P=x.value;if(($===void 0||M<Date.now())&&($=""),P>0&&e.useInput!==!0&&t.key!==void 0&&t.key.length===1&&t.altKey===!1&&t.ctrlKey===!1&&t.metaKey===!1&&(t.keyCode!==32||$.length!==0)){i.value!==!0&&Fe(t);const H=t.key.toLocaleLowerCase(),U=$.length===1&&$[0]===H;M=Date.now()+1500,U===!1&&(se(t),$+=H);const Z=new RegExp("^"+$.split("").map(Ye=>wa.indexOf(Ye)!==-1?"\\"+Ye:Ye).join(".*"),"i");let Y=b.value;if(U===!0||Y<0||Z.test(ae.value(e.options[Y]))!==!0)do Y=Ft(Y+1,-1,P-1);while(Y!==b.value&&(Ce.value(e.options[Y])===!0||Z.test(ae.value(e.options[Y]))!==!0));b.value!==Y&&me(()=>{xe(Y),oe(Y),Y>=0&&e.useInput===!0&&e.fillInput===!0&&Ne(ae.value(e.options[Y]),!0)});return}if(!(t.keyCode!==13&&(t.keyCode!==32||e.useInput===!0||$!=="")&&(t.keyCode!==9||g===!1))){if(t.keyCode!==9&&se(t),b.value!==-1&&b.value<P){pe(e.options[b.value]);return}if(m===!0){const H=(U,Z)=>{if(Z){if(At(Z)!==!0)return}else Z=e.newValueMode;if(Pe("",e.multiple!==!0,!0),U==null)return;(Z==="toggle"?pe:rt)(U,Z==="add-unique"),e.multiple!==!0&&(w.value?.focus(),_e())};if(e.onNewValue!==void 0?n("newValue",p.value,H):H(p.value),e.multiple!==!0)return}i.value===!0?ke():a.innerLoading.value!==!0&&Fe()}}function mt(){return l===!0?R.value:O.value!==null&&O.value.contentEl!==null?O.value.contentEl:void 0}function Gt(){return mt()}function Zt(){return e.hideSelected===!0?[]:r["selected-item"]!==void 0?ye.value.map(t=>r["selected-item"](t)).slice():r.selected!==void 0?[].concat(r.selected()):e.useChips===!0?ye.value.map((t,m)=>s(Sa,{key:"option-"+m,removable:a.editable.value===!0&&Ce.value(t.opt)!==!0,dense:!0,textColor:e.color,tabindex:K.value,onRemove(){t.removeAtIndex(m)}},()=>s("span",{class:"ellipsis",[t.html===!0?"innerHTML":"textContent"]:ae.value(t.opt)}))):[s("span",{class:"ellipsis",[le.value===!0?"innerHTML":"textContent"]:I.value})]}function gt(){if(N.value===!0)return r["no-option"]!==void 0?r["no-option"]({inputValue:p.value}):void 0;const t=r.option!==void 0?r.option:g=>s(Kl,{key:g.index,...g.itemProps},()=>s(jl,()=>s(Ql,()=>s("span",{[g.html===!0?"innerHTML":"textContent"]:g.label}))));let m=de("div",$e.value.map(t));return r["before-options"]!==void 0&&(m=r["before-options"]().concat(m)),Ut(r["after-options"],m)}function Jt(t,m){const g=m===!0?{...Se.value,...a.splitAttrs.attributes.value}:void 0,P={ref:m===!0?w:void 0,key:"i_t",class:E.value,style:e.inputStyle,value:p.value!==void 0?p.value:"",type:"search",...g,id:m===!0?a.targetUid.value:void 0,maxlength:e.maxlength,autocomplete:e.autocomplete,"data-autofocus":t===!0||e.autofocus===!0||void 0,disabled:e.disable===!0,readonly:e.readonly===!0,...Wt.value};return t!==!0&&l===!0&&(Array.isArray(P.class)===!0?P.class=[...P.class,"no-pointer-events"]:P.class+=" no-pointer-events"),s("input",P)}function ht(t){_!==null&&(clearTimeout(_),_=null),C!==null&&(clearTimeout(C),C=null),!(t&&t.target&&t.target.qComposing===!0)&&(Ne(t.target.value||""),z=!0,V=p.value,a.focused.value!==!0&&(l!==!0||k.value===!0)&&a.focus(),e.onFilter!==void 0&&(_=setTimeout(()=>{_=null,qe(p.value)},e.inputDebounce)))}function Ne(t,m){p.value!==t&&(p.value=t,m===!0||e.inputDebounce===0||e.inputDebounce==="0"?n("inputValue",t):C=setTimeout(()=>{C=null,n("inputValue",t)},e.inputDebounce))}function Pe(t,m,g){z=g!==!0,e.useInput===!0&&(Ne(t,!0),(m===!0||g!==!0)&&(V=t),m!==!0&&qe(t))}function qe(t,m,g){if(e.onFilter===void 0||m!==!0&&a.focused.value!==!0)return;a.innerLoading.value===!0?n("filterAbort"):(a.innerLoading.value=!0,f.value=!0),t!==""&&e.multiple!==!0&&v.value.length!==0&&z!==!0&&t===ae.value(v.value[0])&&(t="");const P=setTimeout(()=>{i.value===!0&&(i.value=!1)},10);y!==null&&clearTimeout(y),y=P,n("filter",t,(H,U)=>{(m===!0||a.focused.value===!0)&&y===P&&(clearTimeout(y),typeof H=="function"&&H(),f.value=!1,me(()=>{a.innerLoading.value=!1,a.editable.value===!0&&(m===!0?i.value===!0&&_e():i.value===!0?Xe(!0):i.value=!0),typeof U=="function"&&me(()=>{U(o)}),typeof g=="function"&&me(()=>{g(o)})}))},()=>{a.focused.value===!0&&y===P&&(clearTimeout(y),a.innerLoading.value=!1,f.value=!1),i.value===!0&&(i.value=!1)})}function el(){return s(Xl,{ref:O,class:B.value,style:e.popupContentStyle,modelValue:i.value,fit:e.menuShrink!==!0,cover:e.optionsCover===!0&&N.value!==!0&&e.useInput!==!0,anchor:e.menuAnchor,self:e.menuSelf,offset:e.menuOffset,dark:L.value,noParentEvent:!0,noRefocus:!0,noFocus:!0,noRouteDismiss:e.popupNoRouteDismiss,square:Qe.value,transitionShow:e.transitionShow,transitionHide:e.transitionHide,transitionDuration:e.transitionDuration,separateClosePopup:!0,...be.value,onScrollPassive:fe,onBeforeShow:bt,onBeforeHide:tl,onShow:ll},gt)}function tl(t){yt(t),ke()}function ll(){ve()}function al(t){ge(t),w.value?.focus(),k.value=!0,window.scrollTo(window.pageXOffset||window.scrollX||document.body.scrollLeft||0,0)}function nl(t){ge(t),me(()=>{k.value=!1})}function ul(){const t=[s(ga,{class:`col-auto ${a.fieldClass.value}`,...A.value,for:a.targetUid.value,dark:L.value,square:!0,loading:f.value,itemAligned:!1,filled:!0,stackLabel:p.value.length!==0,...a.splitAttrs.listeners.value,onFocus:al,onBlur:nl},{...r,rawControl:()=>a.getControl(!0),before:void 0,after:void 0})];return i.value===!0&&t.push(s("div",{ref:R,class:B.value+" scroll",style:e.popupContentStyle,...be.value,onClick:Ge,onScrollPassive:fe},gt())),s(Il,{ref:W,modelValue:q.value,position:e.useInput===!0?"top":void 0,transitionShow:S,transitionHide:e.transitionHide,transitionDuration:e.transitionDuration,noRouteDismiss:e.popupNoRouteDismiss,onBeforeShow:bt,onBeforeHide:ol,onHide:il,onShow:rl},()=>s("div",{class:"q-select__dialog"+(L.value===!0?" q-select__dialog--dark q-dark":"")+(k.value===!0?" q-select__dialog--focused":"")},t))}function ol(t){yt(t),W.value!==null&&W.value.__updateRefocusTarget(a.rootRef.value.querySelector(".q-field__native > [tabindex]:last-child")),a.focused.value=!1}function il(t){_e(),a.focused.value===!1&&n("blur",t),Ve()}function rl(){const t=document.activeElement;(t===null||t.id!==a.targetUid.value)&&w.value!==null&&w.value!==t&&w.value.focus(),ve()}function ke(){q.value!==!0&&(b.value=-1,i.value===!0&&(i.value=!1),a.focused.value===!1&&(y!==null&&(clearTimeout(y),y=null),a.innerLoading.value===!0&&(n("filterAbort"),a.innerLoading.value=!1,f.value=!1)))}function Fe(t){a.editable.value===!0&&(l===!0?(a.onControlFocusin(t),q.value=!0,me(()=>{a.focus()})):a.focus(),e.onFilter!==void 0?qe(p.value):(N.value!==!0||r["no-option"]!==void 0)&&(i.value=!0))}function _e(){q.value=!1,ke()}function Ve(){e.useInput===!0&&Pe(e.multiple!==!0&&e.fillInput===!0&&v.value.length!==0&&ae.value(v.value[0])||"",!0,!0)}function Xe(t){let m=-1;if(t===!0){if(v.value.length!==0){const g=ie.value(v.value[0]);m=e.options.findIndex(P=>Oe(ie.value(P),g))}j(m)}xe(m)}function sl(t,m){i.value===!0&&a.innerLoading.value===!1&&(j(-1,!0),me(()=>{i.value===!0&&a.innerLoading.value===!1&&(t>m?j():Xe(!0))}))}function St(){q.value===!1&&O.value!==null&&O.value.updatePosition()}function bt(t){t!==void 0&&ge(t),n("popupShow",t),a.hasPopupOpen=!0,a.onControlFocusin(t)}function yt(t){t!==void 0&&ge(t),n("popupHide",t),a.hasPopupOpen=!1,a.onControlFocusout(t)}function pt(){l=c.platform.is.mobile!==!0&&e.behavior!=="dialog"?!1:e.behavior!=="menu"&&(e.useInput===!0?r["no-option"]!==void 0||e.onFilter!==void 0||N.value===!1:!0),S=c.platform.is.ios===!0&&l===!0&&e.useInput===!0?"fade":e.transitionShow}return Fl(pt),Vl(St),pt(),Le(()=>{_!==null&&clearTimeout(_),C!==null&&clearTimeout(C)}),Object.assign(o,{showPopup:Fe,hidePopup:_e,removeAtIndex:Ke,add:rt,toggleOption:pe,getOptionIndex:()=>b.value,setOptionIndex:xe,moveOptionSelection:De,filter:qe,updateMenuPosition:St,updateInputValue:Pe,isOptionSelected:We,getEmittingOptionValue:it,isOptionDisabled:(...t)=>Ce.value.apply(null,t)===!0,getOptionValue:(...t)=>ie.value.apply(null,t),getOptionLabel:(...t)=>ae.value.apply(null,t)}),Object.assign(a,{innerValue:v,fieldClass:d(()=>`q-select q-field--auto-height q-select--with${e.useInput!==!0?"out":""}-input q-select--with${e.useChips!==!0?"out":""}-chips q-select--${e.multiple===!0?"multiple":"single"}`),inputRef:ee,targetRef:w,hasValue:X,showPopup:Fe,floatingLabel:d(()=>e.hideSelected!==!0&&X.value===!0||typeof p.value=="number"||p.value.length!==0||Ct(e.displayValue)),getControlChild:()=>{if(a.editable.value!==!1&&(q.value===!0||N.value!==!0||r["no-option"]!==void 0))return l===!0?ul():el();a.hasPopupOpen===!0&&(a.hasPopupOpen=!1)},controlEvents:{onFocusin(t){a.onControlFocusin(t)},onFocusout(t){a.onControlFocusout(t,()=>{Ve(),ke()})},onClick(t){if(Ge(t),l!==!0&&i.value===!0){ke(),w.value?.focus();return}Fe(t)}},getControl:t=>{const m=Zt(),g=t===!0||q.value!==!0||l!==!0;if(e.useInput===!0)m.push(Jt(t,g));else if(a.editable.value===!0){const H=g===!0?Se.value:void 0;m.push(s("input",{ref:g===!0?w:void 0,key:"d_t",class:"q-select__focus-target",id:g===!0?a.targetUid.value:void 0,value:I.value,readonly:!0,"data-autofocus":t===!0||e.autofocus===!0||void 0,...H,onKeydown:vt,onKeyup:ct,onKeypress:ft})),g===!0&&typeof e.autocomplete=="string"&&e.autocomplete.length!==0&&m.push(s("input",{class:"q-select__autocomplete-input",autocomplete:e.autocomplete,tabindex:-1,onKeyup:dt}))}if(F.value!==void 0&&e.disable!==!0&&Ue.value.length!==0){const H=Ue.value.map(U=>s("option",{value:U,selected:!0}));m.push(s("select",{class:"hidden",name:F.value,multiple:e.multiple},H))}const P=e.useInput===!0||g!==!0?void 0:a.splitAttrs.attributes.value;return s("div",{class:"q-field__native row items-center",...P,...a.splitAttrs.listeners.value},m)},getInnerAppend:()=>e.loading!==!0&&f.value!==!0&&e.hideDropdownIcon!==!0?[s(Me,{class:"q-select__dropdown-icon"+(i.value===!0?" rotate-180":""),name:Ae.value})]:null}),Tt(a)}}),xa=ce({name:"QCarouselSlide",props:{...$l,imgSrc:String},setup(e,{slots:r}){const n=d(()=>e.imgSrc?{backgroundImage:`url("${e.imgSrc}")`}:{});return()=>s("div",{class:"q-carousel__slide",style:n.value},Dt(r.default))}}),qa=ce({name:"QCarouselControl",props:{position:{type:String,default:"bottom-right",validator:e=>["top-right","top-left","bottom-right","bottom-left","top","right","bottom","left"].includes(e)},offset:{type:Array,default:()=>[18,18],validator:e=>e.length===2}},setup(e,{slots:r}){const n=d(()=>`q-carousel__control absolute absolute-${e.position}`),o=d(()=>({margin:`${e.offset[1]}px ${e.offset[0]}px`}));return()=>s("div",{class:n.value,style:o.value},Dt(r.default))}});let Te=0;const ka={fullscreen:Boolean,noRouteFullscreenExit:Boolean},Fa=["update:fullscreen","fullscreen"];function Va(){const e=he(),{props:r,emit:n,proxy:o}=e;let c,i,q;const b=T(!1);Al(e)===!0&&ne(()=>o.$route.fullPath,()=>{r.noRouteFullscreenExit!==!0&&f()}),ne(()=>r.fullscreen,_=>{b.value!==_&&p()}),ne(b,_=>{n("update:fullscreen",_),n("fullscreen",_)});function p(){b.value===!0?f():k()}function k(){b.value!==!0&&(b.value=!0,q=o.$el.parentNode,q.replaceChild(i,o.$el),document.body.appendChild(o.$el),Te++,Te===1&&document.body.classList.add("q-body--fullscreen-mixin"),c={handler:f},xt.add(c))}function f(){b.value===!0&&(c!==void 0&&(xt.remove(c),c=void 0),q.replaceChild(o.$el,i),b.value=!1,Te=Math.max(0,Te-1),Te===0&&(document.body.classList.remove("q-body--fullscreen-mixin"),o.$el.scrollIntoView!==void 0&&setTimeout(()=>{o.$el.scrollIntoView()})))}return $t(()=>{i=document.createElement("span")}),Nt(()=>{r.fullscreen===!0&&k()}),Le(f),Object.assign(o,{toggleFullscreen:p,setFullscreen:k,exitFullscreen:f}),{inFullscreen:b,toggleFullscreen:p}}const za=["top","right","bottom","left"],Ia=["regular","flat","outline","push","unelevated"],Aa=ce({name:"QCarousel",props:{...nt,...Dl,...ka,transitionPrev:{type:String,default:"fade"},transitionNext:{type:String,default:"fade"},height:String,padding:Boolean,controlColor:String,controlTextColor:String,controlType:{type:String,validator:e=>Ia.includes(e),default:"flat"},autoplay:[Number,Boolean],arrows:Boolean,prevIcon:String,nextIcon:String,navigation:Boolean,navigationPosition:{type:String,validator:e=>za.includes(e)},navigationIcon:String,navigationActiveIcon:String,thumbnails:Boolean},emits:[...Fa,...Ul],setup(e,{slots:r}){const{proxy:{$q:n}}=he(),o=ut(e,n);let c=null,i;const{updatePanelsList:q,getPanelContent:b,panelDirectives:p,goToPanel:k,previousPanel:f,nextPanel:_,getEnabledPanels:C,panelIndex:h}=Nl(),{inFullscreen:l}=Va(),z=d(()=>l.value!==!0&&e.height!==void 0?{height:e.height}:{}),y=d(()=>e.vertical===!0?"vertical":"horizontal"),V=d(()=>e.navigationPosition||(e.vertical===!0?"right":"bottom")),S=d(()=>`q-carousel q-panel-parent q-carousel--with${e.padding===!0?"":"out"}-padding`+(l.value===!0?" fullscreen":"")+(o.value===!0?" q-carousel--dark q-dark":"")+(e.arrows===!0?` q-carousel--arrows-${y.value}`:"")+(e.navigation===!0?` q-carousel--navigation-${V.value}`:"")),$=d(()=>{const F=[e.prevIcon||n.iconSet.carousel[e.vertical===!0?"up":"left"],e.nextIcon||n.iconSet.carousel[e.vertical===!0?"down":"right"]];return e.vertical===!1&&n.lang.rtl===!0?F.reverse():F}),M=d(()=>e.navigationIcon||n.iconSet.carousel.navigationIcon),ee=d(()=>e.navigationActiveIcon||M.value),w=d(()=>({color:e.controlColor,textColor:e.controlTextColor,round:!0,[e.controlType]:!0,dense:!0}));ne(()=>e.modelValue,()=>{e.autoplay&&O()}),ne(()=>e.autoplay,F=>{F?O():c!==null&&(clearTimeout(c),c=null)});function O(){const F=Bl(e.autoplay)===!0?Math.abs(e.autoplay):5e3;c!==null&&clearTimeout(c),c=setTimeout(()=>{c=null,F>=0?_():f()},F)}Nt(()=>{e.autoplay&&O()}),Le(()=>{c!==null&&clearTimeout(c)});function W(F,G){return s("div",{class:`q-carousel__control q-carousel__navigation no-wrap absolute flex q-carousel__navigation--${F} q-carousel__navigation--${V.value}`+(e.controlColor!==void 0?` text-${e.controlColor}`:"")},[s("div",{class:"q-carousel__navigation-inner flex flex-center no-wrap"},C().map(G))])}function R(){const F=[];if(e.navigation===!0){const G=r["navigation-icon"]!==void 0?r["navigation-icon"]:D=>s(we,{key:"nav"+D.name,class:`q-carousel__navigation-icon q-carousel__navigation-icon--${D.active===!0?"":"in"}active`,...D.btnProps,onClick:D.onClick}),x=i-1;F.push(W("buttons",(D,te)=>{const J=D.props.name,j=h.value===te;return G({index:te,maxIndex:x,name:J,active:j,btnProps:{icon:j===!0?ee.value:M.value,size:"sm",...w.value},onClick:()=>{k(J)}})}))}else if(e.thumbnails===!0){const G=e.controlColor!==void 0?` text-${e.controlColor}`:"";F.push(W("thumbnails",x=>{const D=x.props;return s("img",{key:"tmb#"+D.name,class:`q-carousel__thumbnail q-carousel__thumbnail--${D.name===e.modelValue?"":"in"}active`+G,src:D.imgSrc||D["img-src"],onClick:()=>{k(D.name)}})}))}return e.arrows===!0&&h.value>=0&&((e.infinite===!0||h.value>0)&&F.push(s("div",{key:"prev",class:`q-carousel__control q-carousel__arrow q-carousel__prev-arrow q-carousel__prev-arrow--${y.value} absolute flex flex-center`},[s(we,{icon:$.value[0],...w.value,onClick:f})])),(e.infinite===!0||h.value<i-1)&&F.push(s("div",{key:"next",class:`q-carousel__control q-carousel__arrow q-carousel__next-arrow q-carousel__next-arrow--${y.value} absolute flex flex-center`},[s(we,{icon:$.value[1],...w.value,onClick:_})]))),Ut(r.control,F)}return()=>(i=q(r),s("div",{class:S.value,style:z.value},[Lt("div",{class:"q-carousel__slides-container"},b(),"sl-cont",e.swipeable,()=>p.value)].concat(R())))}}),Ba=Pl({__name:"ProductImgCarusel",props:{images:{}},emits:["refresh-data"],setup(e,{emit:r}){const n=e,o=r,c=Wl(),i=Hl(),q=Ol(),{isManager:b}=Yl(d(()=>q.user?.role)),p=T(0),k=T(!1);function f(){c.dialog({title:" ",message:"     ?",cancel:!0,persistent:!0}).onOk(()=>{_()})}async function _(){try{const C=n.images[p.value];await i.deleteFile(C.id),o("refresh-data")}catch(C){console.error(C)}}return(C,h)=>(Re(),He(Aa,{swipeable:"",animated:"",arrows:"",modelValue:p.value,"onUpdate:modelValue":h[2]||(h[2]=l=>p.value=l),fullscreen:k.value,"onUpdate:fullscreen":h[3]||(h[3]=l=>k.value=l),infinite:"",height:Ze(b)?"200px":"250px",class:"q-mb-sm"},{control:Je(()=>[Ml(qa,{position:"bottom-right",offset:[18,18]},{default:Je(()=>[Ze(b)?qt("",!0):(Re(),He(we,{key:0,push:"",round:"",dense:"",color:"white","text-color":"primary",icon:k.value?"fullscreen_exit":"fullscreen",onClick:h[0]||(h[0]=l=>k.value=!k.value)},null,8,["icon"])),Ze(b)?(Re(),He(we,{key:1,round:"",dense:"","text-color":"red",icon:"delete",onClick:h[1]||(h[1]=l=>f())})):qt("",!0)]),_:1})]),default:Je(()=>[(Re(!0),Rl(Tl,null,El(C.images,(l,z)=>(Re(),He(xa,{key:z,name:z,"img-src":l.file_path,class:"card-image"},null,8,["name","img-src"]))),128))]),_:1},8,["modelValue","fullscreen","height"]))}}),Da=Gl(Ba,[["__scopeId","data-v-11af1822"]]);export{Da as P,$a as Q,La as a,Ua as b,ia as g};
